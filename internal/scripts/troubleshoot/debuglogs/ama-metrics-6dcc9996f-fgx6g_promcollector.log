[0;36mMODE[0m=advanced
[0;36mCONTROLLER_TYPE[0m=ReplicaSet
[0;36mCLUSTER[0m=/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr
[0;36;49m***********************************Start Processing***********************************[0m
pod-annotation-based-scraping::configmap section not mounted, using defaults
[0;36;49m**********End default-targets-namespace-keep-list-regex-settings Processing***********[0m
[0;36;49m********************Start prometheus-collector-settings Processing********************[0m
config::AZMON_CLUSTER_ALIAS:''
config::AZMON_CLUSTER_LABEL:kaveeshmultidcr
[0;36;49m*********************End prometheus-collector-settings Processing*********************[0m
[0;36;49m***********************Start default-scrape-settings Processing***********************[0m
[0;33;49mdefault-scrape-settings::warning::MAC mode is enabled. Only enabling targets kubestate,cadvisor,kubelet,kappiebasic & nodeexporter for linux before config map processing....[0m
[0;36;49m************************End default-scrape-settings Processing************************[0m
[0;36;49m*************************Start debug-mode Settings Processing*************************[0m
[0;36;49m**************************End debug-mode Settings Processing**************************[0m
[0;36;49m******************Start default-targets-metrics-keep-list Processing******************[0m
default-scrape-keep-lists::minimalIngestionProfile=true, MAC is enabled. Applying appropriate MAC Regexes
[0;36;49m*******************End default-targets-metrics-keep-list Processing*******************[0m
[0;36;49m**************Start default-targets-scrape-interval-settings Processing***************[0m
[0;36;49m***************End default-targets-scrape-interval-settings Processing****************[0m
[0;33;49mprometheus-config-merger::warning::Custom prometheus config does not exist, using only default scrape targets if they are enabled[0m
[0;36;49m******************Start Merging Default and Custom Prometheus Config******************[0m
prometheus-config-merger::Updating scrape interval config for /opt/microsoft/otelcollector/default-prom-configs/kubestateDefault.yml
prometheus-config-merger::Adding keep list regex or minimal ingestion regex for /opt/microsoft/otelcollector/default-prom-configs/kubestateDefault.yml
prometheus-config-merger::Done merging 1 default prometheus config(s)
prometheus-config-merger::Starting to merge default prometheus config values in collector template as backup
[0;36;49m******************Done Merging Default and Custom Prometheus Config*******************[0m
[0;33mprom-config-validator::No custom prometheus config found. Only using default scrape configs[0m
prom-config-validator::Config file provided - /opt/defaultsMergedConfig.yml
prom-config-validator::Successfully generated otel config
prom-config-validator::Loading configuration...
prom-config-validator::Successfully loaded and validated prometheus config
prom-config-validator::Prometheus default scrape config validation succeeded, using this as collector config
prom-config-validator::Use default prometheus config: true
checking health of token adapter after 1 secs
found token adapter to be healthy after 1 secs
[0;36mME_CONFIG_FILE[0m=/usr/sbin/me.config
[0;36mcustomResourceId[0m=/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr
[0;36mcustomRegion[0m=eastus
Waiting for 10s for token adapter sidecar to be up and running so that it can start serving IMDS requests
Setting env variables from envmdsd file for MDSD
Starting MDSD
1.23.5
[0;36mMDSD_VERSION[0m=Waiting for 30s for MDSD to get the config and put them in place for ME
Reading me config file as a string for configOverrides paramater
Starting metricsextension
[0;36mME_VERSION[0m=2.2023.224.2214-1.cm2
[0;36mRUBY_VERSION[0m=ruby 3.1.4p223 (2023-03-30 revision 957bb7cb81) [x86_64-linux]
[0;36mGOLANG_VERSION[0m=go version go1.19.10 linux/amd64
[0;33mStarting otelcollector with only default scrape configs enabled[0m
[0;36mOTELCOLLECTOR_VERSION[0m=custom-collector-distro version 0.73.0
[0;36mPROMETHEUS_VERSION[0m=2.43.0
starting telegraf
[0;36mTELEGRAF_VERSION[0m=1.25.2-2.cm2
starting fluent-bit
[0;36mFLUENT_BIT_VERSION[0m=Fluent Bit v2.0.9
Git commit: 
[0;36mFLUENT_BIT_CONFIG_FILE[0m=/opt/fluent-bit/fluent-bit.conf
starting inotify for watching mdsd config update
File Doesnt Exist. Creating file...
Fluent Bit v2.0.9
* Copyright (C) 2015-2022 The Fluent Bit Authors
* Fluent Bit is a CNCF sub-project under the umbrella of Fluentd
* https://fluentbit.io

[0;36mAZMON_CONTAINER_START_TIME[0m=1691532275
[0;36mAZMON_CONTAINER_START_TIME_READABLE[0m=Tue Aug  8 22:04:35 UTC 2023
{"time":1691612254.951439,"filepath":"/opt/microsoft/linuxmonagent/mdsd.err","log":"2023-08-09T20:17:21.4076630Z: [/__w/1/s/external/WindowsAgent/src/shared/mcsmanager/lib/src/RefreshConfigurations.cpp:318,GetAgentConfigurations]Could not obtain configuration from https://global.handler.control.monitor.azure.com after first round of tries. Will try again with a fallback endpoint. ErrorCode:1310977"}
{"time":1691612494.951383,"filepath":"/opt/microsoft/linuxmonagent/mdsd.err","log":"2023-08-09T20:21:26.9555700Z: [/__w/1/s/external/WindowsAgent/src/shared/mcsmanager/lib/src/RefreshConfigurations.cpp:354,GetAgentConfigurations]Could not obtain configuration from https://eastus.handler.control.monitor.azure.com after attempting an immediate retry. ErrorCode:1310977"}
{"time":1691612494.951386,"filepath":"/opt/microsoft/linuxmonagent/mdsd.err","log":"2023-08-09T20:21:26.9556220Z: [/__w/1/s/external/WindowsAgent/src/shared/mcsmanager/lib/src/RefreshConfigurations.cpp:384,GetAgentConfigurations]Response Code: 0; Response: . ErrorCode:-2146172665"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T21:02:05.600","level":"Error","message":"TID:140084979447360\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Failed to read HTTP status line\", Error Code: 110"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T21:02:42.866","level":"Error","message":"TID:140084962661952\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Error in SSL handshake\", Error Code: 110"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T21:03:30.219","level":"Error","message":"TID:140084937483840\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Error in SSL handshake\", Error Code: 110"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T22:37:45.463","level":"Error","message":"TID:140084937483840\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Request canceled by user.\", Error Code: 110"}
{"time":1691620774.951456,"filepath":"/opt/microsoft/linuxmonagent/mdsd.err","log":"2023-08-09T22:39:09.9967100Z: [/__w/1/s/external/WindowsAgent/src/shared/mcsmanager/lib/src/RefreshConfigurations.cpp:318,GetAgentConfigurations]Could not obtain configuration from https://global.handler.control.monitor.azure.com after first round of tries. Will try again with a fallback endpoint. ErrorCode:1310977"}
{"time":1691621014.951479,"filepath":"/opt/microsoft/linuxmonagent/mdsd.err","log":"2023-08-09T22:43:00.1024940Z: [/__w/1/s/external/WindowsAgent/src/shared/mcsmanager/lib/src/RefreshConfigurations.cpp:354,GetAgentConfigurations]Could not obtain configuration from https://eastus.handler.control.monitor.azure.com after attempting an immediate retry. ErrorCode:1310977"}
{"time":1691621014.951481,"filepath":"/opt/microsoft/linuxmonagent/mdsd.err","log":"2023-08-09T22:43:00.1025420Z: [/__w/1/s/external/WindowsAgent/src/shared/mcsmanager/lib/src/RefreshConfigurations.cpp:384,GetAgentConfigurations]Response Code: 0; Response: . ErrorCode:-2146172665"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T23:42:25.609","level":"Error","message":"TID:140084962661952\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Failed to read HTTP status line\", Error Code: 110"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T23:42:55.668","level":"Error","message":"TID:140085105337920\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Request canceled by user.\", Error Code: 110"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T23:42:57.739","level":"Error","message":"TID:140085080159808\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Error in SSL handshake\", Error Code: 104"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-09T23:54:28.347","level":"Error","message":"TID:140084878734912\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-326681513e204b23bbc47463ff9d633c/channels/gigm-dce-b47bac70fd634e64a01c6fdb84371d15/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-326681513e204b23bbc47463ff9d633c/channels/gigm-dce-b47bac70fd634e64a01c6fdb84371d15/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Request canceled by user.\", Error Code: 110"}
{"filepath":"/MetricsExtensionConsoleDebugLog.log","time":"2023-08-10T01:21:23.911","level":"Error","message":"TID:140084870342208\tAmcsTokenLoader\thttps://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02\tAmcsTokenLoader.cpp(431)\tQuery for AMCS token has failed with a HTTP exception after receiving a server response. URL: \"https://global.handler.control.monitor.azure.com/subscriptions/ce4d1293-71c0-4c72-bc55-133553ee9e50/resourceGroups/kaveeshmultidcr/providers/Microsoft.ContainerService/managedClusters/kaveeshmultidcr/agentConfigurations/dcr-035162b876e143a89ee8fda34c870ea4/channels/gigm-dce-b955d7a901524646ae05fd133744755f/issueIngestionToken?operatingLocation=eastus&platform=linux&includeMeConfig=true&api-version=2022-06-02[global.handler.control.monitor.azure.com]\", TaskCancelled: false, Exception: \"Request canceled by user.\", Error Code: 110"}
