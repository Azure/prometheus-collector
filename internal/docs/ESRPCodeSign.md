I have followed this [doc](https://eng.ms/docs/more/containers-secure-supply-chain/signing).
[This](https://ms.portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationMenuBlade/~/Overview/quickStartType~/null/sourceType/Microsoft_AAD_IAM/appId/73f8d5f9-b507-497f-b698-4ed00fcba5a3/objectId/cd14f76f-2797-4192-927e-65b7e37e9c26/isMSAApp~/false/defaultBlade/Overview/appSignInAudience/AzureADMyOrg/servicePrincipalCreated~/true) is the ESRP app registration created for ESRP connection.

[This](https://github-private.visualstudio.com/azure/_settings/adminservices?resourceId=58076957-65af-4250-98a3-21edf787554c) is the service connection created for ESRP. I followed this [doc](https://microsoft.sharepoint.com/teams/prss/Codesign/SitePages/ADO%20Task%20v5.aspx?OR=Teams-HL&CT=1714049743060&xsdata=MDV8MDJ8c29oZGFzZ3VwdGFAbWljcm9zb2Z0LmNvbXw4YTc4ZGVmNDJkODg0MjJmNTM4ZDA4ZGM2NTQwMDU4NHw3MmY5ODhiZjg2ZjE0MWFmOTFhYjJkN2NkMDExZGI0N3wxfDB8NjM4NDk2NTcyODU0MjA1ODAwfFVua25vd258VFdGcGJHWnNiM2Q4ZXlKV0lqb2lNQzR3TGpBd01EQWlMQ0pRSWpvaVYybHVNeklpTENKQlRpSTZJazFoYVd3aUxDSlhWQ0k2TW4wPXwwfHx8&sdata=aHV6OG95VHVCbmc4OE9ETkN2bGRWMndMZHh0Y0R3WDdIUkRVWnF3ZG5jTT0%3d&clickparams=eyAiWC1BcHBOYW1lIiA6ICJNaWNyb3NvZnQgT3V0bG9vayIsICJYLUFwcFZlcnNpb24iIDogIjE2LjAuMTc1MzEuMjAxMjAiLCAiT1MiIDogIldpbmRvd3MiIH0%3D) to migrate to ESRP v5.

[This](https://ms.portal.azure.com/#@MSAzureCloud.onmicrosoft.com/resource/subscriptions/30c56c3a-54da-46ea-b004-06eb33432687/resourceGroups/ESRPPrometheusKVProd/providers/Microsoft.KeyVault/vaults/ESRPPrometheusKVProd/overview) is the Key vault in which the 2 prod AME certificates(AuthCertName and AuthSignCertName) are stored through which the container image is signed.

[This](https://portal.esrp.microsoft.com/Onboarding/AccountDetails?clientId=73f8d5f9-b507-497f-b698-4ed00fcba5a3) is the ESRP registration client created for signing Prometheus images. The approved ESRP sign key code CP-469451 is used for signing as mentioned in [doc](https://eng.ms/docs/more/containers-secure-supply-chain/signing).

For verification of signing we can do through 2 ways.

1. Locally through the doc https://eng.ms/docs/more/containers-secure-supply-chain/signing under validation section using notation. We have to use our own [certificate](https://ms.portal.azure.com/#view/Microsoft_Azure_KeyVault/ListObjectVersionsRBACBlade/~/overview/objectType/certificates/objectId/https%3A%2F%2Fesrpprometheuskv.vault.azure.net%2Fcertificates%2FESRPReqPrometheusCert/vaultResourceUri/%2Fsubscriptions%2F9b96ebbd-c57a-42d1-bbe9-b69296e4c7fb%2FresourceGroups%2FESRPPrometheus%2Fproviders%2FMicrosoft.KeyVault%2Fvaults%2FESRPPrometheusKV/vaultId/%2Fsubscriptions%2F9b96ebbd-c57a-42d1-bbe9-b69296e4c7fb%2FresourceGroups%2FESRPPrometheus%2Fproviders%2FMicrosoft.KeyVault%2Fvaults%2FESRPPrometheusKV) instead of the one in the example.
2. We can do a "docker manifest inspect -v <image>" on the signed images and it will not have the following error message - "manifest verification failed for digest sha256..."
