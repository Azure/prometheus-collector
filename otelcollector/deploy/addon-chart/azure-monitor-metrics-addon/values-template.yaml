AzureMonitorMetrics:
  KubeStateMetrics:
# Uncomment the below 2 settings if you want to pass in the labels and/or annotations
    # MetricLabelsAllowlist: "*=[*]"
    # MetricAnnotationsAllowList: "pods=[*],nodes=[*]"
    ImageRepository: "/oss/kubernetes/kube-state-metrics"
# Kube-state-metrics ImageTag - 2.9.2, corresponds to chart version - 5.10.1
    ImageTag: "v2.9.2"
    Collectors:
      - certificatesigningrequests
      - configmaps
      - cronjobs
      - daemonsets
      - deployments
      - endpoints
      - horizontalpodautoscalers
      - ingresses
      - jobs
      - leases
      - limitranges
      - mutatingwebhookconfigurations
      - namespaces
      - networkpolicies
      - nodes
      - persistentvolumeclaims
      - persistentvolumes
      - poddisruptionbudgets
      - pods
      - replicasets
      - replicationcontrollers
      - resourcequotas
      - secrets
      - services
      - statefulsets
      - storageclasses
      - validatingwebhookconfigurations
      - volumeattachments
  ImageRepository: "/azuremonitor/containerinsights/cidev/prometheus-collector/images"
  # ImageTag: "6.7.4-operator-targetallocator-08-15-2023-f0f7de32"
  # ImageTag: "6.7.4-rashmi-ta-bug-fixes-08-30-2023-6562912f" # has pod annotation enabled to all ns by def
  # ImageTag: "6.7.5-rashmi-telegraf-09-27-2023-9201af44"
  #ImageTag: "6.7.5-rashmi-telegraf-09-28-2023-f8f9763e" #increased frequency with debugging enabled and with all plugins
  #ImageTag: "6.7.5-rashmi-telegraf-09-28-2023-ee0b5b84" # reverting all changes
  #ImageTag: "6.7.5-rashmi-telegraf-09-28-2023-d982d023" # telegraf with increased frequency and debugging disabled and ta metrics enabled
  #ImageTag: "6.7.5-rashmi-telegraf-09-27-2023-c380a66b" # telegraf with increased frequency and debugging disabled
  #ImageTag: "6.7.5-rashmi-telegraf-09-27-2023-421ac2ad" # telegraf with debugging and 1min
  #ImageTag: "6.7.5-operator-targetallocator-09-27-2023-380389d0" # Adding chart setting telemetry
  #ImageTag: "6.7.5-rashmi-telegraf-09-28-2023-2cd14345" #Just adding debug and logs and not changing intervals
  ImageTag: "6.7.5-rashmi-telegraf-09-29-2023-ca7ee0bc" #Upgrade tgf with debug logs - wasn't working friday morning, but worked friday evening
  #ImageTag: "6.7.5-operator-targetallocator-09-29-2023-e2be19ca" # fixing space and writing to fie, wasnt working until 4 40PM 09/29, installed around 2PM 
  ImageTagWin: "6.7.5-operator-targetallocator-09-27-2023-380389d0-win"
  # ImageTagWin: "6.7.4-operator-targetallocator-08-15-2023-f0f7de32-win"
  # ImageTagTargetAllocator: "6.7.4-operator-targetallocator-08-15-2023-f0f7de32-targetallocator"
  ImageTagTargetAllocator: "6.7.5-operator-targetallocator-09-27-2023-380389d0-targetallocator"
  #ImageTagCfg: "6.7.4-operator-targetallocator-08-15-2023-f0f7de32-cfg"
  ImageTagCfg: "6.7.5-operator-targetallocator-09-27-2023-380389d0-cfg"
  # The below 2 settings are not Azure Monitor Metrics adapter chart. They are substituted in a different manner.
  # Please update these with the latest ones from here so that you get the image that is currently deployed by the AKS RP -
  # Repository: https://msazure.visualstudio.com/CloudNativeCompute/_git/aks-rp?path=/ccp/charts/addon-charts/azure-monitor-metrics-addon/templates/ama-metrics-daemonset.yaml&version=GBrashmi/prom-addon-arm64&line=136&lineEnd=136&lineStartColumn=56&lineEndColumn=85&lineStyle=plain&_a=contents
  # ImageTag: https://msazure.visualstudio.com/CloudNativeCompute/_git/aks-rp?path=/ccp/charts/kube-control-plane/templates/_images.tpl&version=GBrashmi/prom-addon-arm64&line=530&lineEnd=530&lineStartColumn=28&lineEndColumn=53&lineStyle=plain&_a=contents
  AddonTokenAdapter:
    ImageRepository: "/aks/msi/addon-token-adapter"
    ImageTag: "master.221118.2"
    ImageRepositoryWin: "/aks/hcp/addon-token-adapter"
    ImageTagWin: "20230120winbeta"
  ArcExtension: false
  ArcEnableOperator: true
  # Do not change the below settings. They are reserved for Arc Autonomous
  isArcACluster: false
  arcAutonomousSettings:
    customRegionalEndpoint: ""
    customGlobalEndpoint: ""
    customResourceEndpoint: ""
global:
  commonGlobals:
    CloudEnvironment: "azurepubliccloud"
    Region: "westus2"
    Customer:
      AzureResourceID: "/subscriptions/0e4773a2-8221-441a-a06f-17db16ab16d4/resourcegroups/rashmi-operator-cfg/providers/Microsoft.ContainerService/managedClusters/rashmi-operator-cfg"

# For ARC backdoor testing
Azure:
  Extension:
    Name: azuremonitor-metrics
  Cluster:
    ResourceId: "${ARC_RESOURCE_ID}"
    Region: "${ARC_REGION}"
    Cloud: "azurepubliccloud"
    Distribution: ""
  proxySettings:
    isProxyEnabled: "false"
    httpProxy: ""
    httpsProxy: ""
    noProxy: ""
    proxyCert: ""
  Identity:
      MSIAdapterYaml: |-
        - name: EXTENSION_ARMID
          value: ${ARC_RESOURCE_ID}/providers/Microsoft.KubernetesConfiguration/extensions/azuremonitor-metrics
        - name: EXTENSION_NAME
          value: azuremonitor-metrics
        - name: CLUSTER_IDENTITY
          value: "false"
        - name: CLUSTER_TYPE
          value:  ConnectedClusters
        - name: MANAGED_IDENTITY_AUTH
          value: "true"
        - name: TEST_MODE
          value: "false"
        - name: TEST_FILE
          value: "/data/token"
        image: "mcr.microsoft.com/azurearck8s/msi-adapter:1.0.4"
        securityContext:
          capabilities:
            add:
              - NET_ADMIN
              - NET_RAW
        livenessProbe:
          httpGet:
            path: /healthz
            port: 9999
            scheme: "HTTP"
          initialDelaySeconds: 10
          periodSeconds: 15
        resources:
          limits:
            cpu: 50m
            memory: 100Mi
          requests:
            cpu: 20m
            memory: 50Mi
prometheus-node-exporter:
  service:
    port: 9110
    targetPort: 9110
