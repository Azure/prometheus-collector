kind: ConfigMap
apiVersion: v1
data:
  schema-version:
    #string.used by agent to parse config. supported versions are {v1}. Configs with other schema versions will be rejected by the agent.
    v1
  config-version:
    #string.used by customer to keep track of this config file's version in their source control/repository (max allowed 10 chars, other chars will be truncated)
    ver1
  prometheus-collector-settings: |-
    [prometheus_collector_settings.default_metric_account]
      account_name = {{ required "azureMetricAccount.defaultAccountName is required" .Values.azureMetricAccount.defaultAccountName | toString | quote }}
  default-scrape-settings: |-
    [default_scrape_settings]
      kubelet_enabled = {{ .Values.scrapeTargets.kubelet }}
      coredns_enabled = {{ .Values.scrapeTargets.coreDns }}
metadata:
  name: {{ .Release.Name }}-prometheus-collector-configmap
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "prometheus-collector.labels" . | nindent 4 }}
