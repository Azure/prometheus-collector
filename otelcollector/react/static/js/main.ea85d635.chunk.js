(this.webpackJsonpgraph=this.webpackJsonpgraph||[]).push([[0],{107:function(e,t){},108:function(e,t){},153:function(e,t){},159:function(e,t){},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveAllRecursiveNodes=t.containsChild=t.containsAtLeastOneChild=t.walkThrough=t.walkBackward=t.Parser=t.labelMatchersToString=t.buildLabelMatchers=void 0;var a=n(166);Object.defineProperty(t,"buildLabelMatchers",{enumerable:!0,get:function(){return a.buildLabelMatchers}}),Object.defineProperty(t,"labelMatchersToString",{enumerable:!0,get:function(){return a.labelMatchersToString}});var r=n(275);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return r.Parser}});var i=n(87);Object.defineProperty(t,"walkBackward",{enumerable:!0,get:function(){return i.walkBackward}}),Object.defineProperty(t,"walkThrough",{enumerable:!0,get:function(){return i.walkThrough}}),Object.defineProperty(t,"containsAtLeastOneChild",{enumerable:!0,get:function(){return i.containsAtLeastOneChild}}),Object.defineProperty(t,"containsChild",{enumerable:!0,get:function(){return i.containsChild}}),Object.defineProperty(t,"retrieveAllRecursiveNodes",{enumerable:!0,get:function(){return i.retrieveAllRecursiveNodes}})},166:function(e,t,n){"use strict";var a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.labelMatchersToString=t.buildLabelMatchers=void 0;var r=n(70),i=n(86);t.buildLabelMatchers=function(e,t){var n=[];return e.forEach((function(e){n.push(function(e,t){var n=new i.Matcher(0,"",""),a=e.cursor;if(!a.next())return n;do{switch(a.type.id){case r.LabelName:n.name=t.sliceDoc(a.from,a.to);break;case r.MatchOp:var o=a.node.firstChild;o&&(n.type=o.type.id);break;case r.StringLiteral:n.value=t.sliceDoc(a.from,a.to).slice(1,-1)}}while(a.nextSibling());return n}(e,t))})),n},t.labelMatchersToString=function(e,t,n){var i,o;if(!t||0===t.length)return e;var s="";try{for(var c=a(t),l=c.next();!l.done;l=c.next()){var u=l.value;if(u.name!==n&&""!==u.value){var d="";switch(u.type){case r.EqlSingle:d="=";break;case r.Neq:d="!=";break;case r.NeqRegex:d="!~";break;case r.EqlRegex:d="=~";break;default:d="="}var p=""+u.name+d+'"'+u.value+'"';s=""===s?p:s+","+p}}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return e+"{"+s+"}"}},175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newCompleteStrategy=void 0;var a=n(271),r=n(279);t.newCompleteStrategy=function(e){return(null===e||void 0===e?void 0:e.completeStrategy)?e.completeStrategy:(null===e||void 0===e?void 0:e.remote)?void 0===e.remote.url?new a.HybridComplete(e.remote,e.maxMetricsMetadata):new a.HybridComplete(new r.CachedPrometheusClient(new r.HTTPPrometheusClient(e.remote),e.remote.cache),e.maxMetricsMetadata):new a.HybridComplete}},184:function(e,t,n){e.exports={discovered:"TargetLabels_discovered__2eSl4"}},263:function(e,t){},271:function(e,t,n){"use strict";var a=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.HybridComplete=t.analyzeCompletion=t.computeStartCompletePosition=t.ContextKind=void 0;var o,s=n(70),c=n(165),l=n(278),u=n(41),d={matchOp:l.matchOpTerms,binOp:l.binOpTerms,duration:l.durationTerms,binOpModifier:l.binOpModifierTerms,atModifier:l.atModifierTerms,functionIdentifier:l.functionIdentifierTerms,aggregateOp:l.aggregateOpTerms,aggregateOpModifier:l.aggregateOpModifierTerms,number:l.numberTerms};function p(e,t){var n=(0,c.walkBackward)(e,s.VectorSelector);return n&&(n=(0,c.walkThrough)(n,s.MetricIdentifier,s.Identifier))?t.sliceDoc(n.from,n.to):""}function h(e,t){var n,a,r,i,o,l,u=e.from;return e.type.id===s.LabelMatchers||e.type.id===s.GroupingLabels?u=function(e,t){var n=e.from+1;return null!==e.firstChild&&(n=t),n}(e,t):e.type.id===s.FunctionCallBody||e.type.id===s.StringLiteral&&(null===(n=e.parent)||void 0===n?void 0:n.type.id)===s.LabelMatcher?u++:(e.type.id===s.OffsetExpr||e.type.id===s.NumberLiteral&&0===(null===(a=e.parent)||void 0===a?void 0:a.type.id)&&(null===(r=e.parent.parent)||void 0===r?void 0:r.type.id)===s.SubqueryExpr||0===e.type.id&&((null===(i=e.parent)||void 0===i?void 0:i.type.id)===s.OffsetExpr||(null===(o=e.parent)||void 0===o?void 0:o.type.id)===s.MatrixSelector||(null===(l=e.parent)||void 0===l?void 0:l.type.id)===s.SubqueryExpr&&(0,c.containsAtLeastOneChild)(e.parent,s.Duration)))&&(u=t),u}function f(e,t){var n,a,r,i,u,d,h,f,m,b,v,g,x,O,y,j,k,T,_,w=[];switch(t.type.id){case 0:if((null===(n=t.parent)||void 0===n?void 0:n.type.id)===s.OffsetExpr){w.push({kind:o.Duration});break}if((null===(a=t.parent)||void 0===a?void 0:a.type.id)===s.LabelMatcher){w.push({kind:o.MatchOp});break}if((null===(r=t.parent)||void 0===r?void 0:r.type.id)===s.MatrixSelector){w.push({kind:o.Duration});break}if((null===(i=t.parent)||void 0===i?void 0:i.type.id)===s.SubqueryExpr&&(0,c.containsAtLeastOneChild)(t.parent,s.Duration)){w.push({kind:o.Duration});break}var S=e.sliceDoc(t.from,t.to);l.binOpTerms.filter((function(e){return e.label.includes(S)})).length>0&&w.push({kind:o.BinOp});break;case s.Identifier:if(0===(null===(u=t.parent)||void 0===u?void 0:u.type.id)){var C=t.parent;if((null===(d=C.parent)||void 0===d?void 0:d.type.id)===s.StepInvariantExpr){w.push({kind:o.AtModifiers});break}if((null===(h=C.parent)||void 0===h?void 0:h.type.id)===s.AggregateExpr){w.push({kind:o.AggregateOpModifier},{kind:o.BinOp});break}if((null===(f=C.parent)||void 0===f?void 0:f.type.id)===s.VectorSelector){var M=p(t,e);l.aggregateOpTerms.filter((function(e){return e.label===M})).length>0&&w.push({kind:o.AggregateOpModifier}),w.push({kind:o.BinOp},{kind:o.Offset});break}}var P=null===(v=null===(b=null===(m=t.parent)||void 0===m?void 0:m.parent)||void 0===b?void 0:b.parent)||void 0===v?void 0:v.parent;if(!P){w.push({kind:o.MetricName,metricName:e.sliceDoc(t.from,t.to)});break}(0,c.containsChild)(P,s.Expr,s.Expr)?P.type.id!==s.BinaryExpr||(0,c.containsAtLeastOneChild)(P,0)?(P.type.id!==s.BinaryExpr||P.type.id===s.BinaryExpr&&(0,c.containsAtLeastOneChild)(P,0))&&w.push({kind:o.BinOp},{kind:o.Offset}):(w.push({kind:o.MetricName,metricName:e.sliceDoc(t.from,t.to)},{kind:o.Function},{kind:o.Aggregation},{kind:o.BinOpModifier},{kind:o.Number}),(0,c.containsAtLeastOneChild)(P,s.Eql,s.Gte,s.Gtr,s.Lte,s.Lss,s.Neq)&&!(0,c.walkThrough)(P,s.BinModifiers,s.Bool)&&w.push({kind:o.Bool})):(w.push({kind:o.MetricName,metricName:e.sliceDoc(t.from,t.to)},{kind:o.Function},{kind:o.Aggregation}),P.type.id!==s.FunctionCallArgs&&P.type.id!==s.MatrixSelector&&w.push({kind:o.Number}));break;case s.PromQL:t.firstChild||w.push({kind:o.MetricName,metricName:""},{kind:o.Function},{kind:o.Aggregation},{kind:o.Number});break;case s.GroupingLabels:w.push({kind:o.LabelName});break;case s.LabelMatchers:w.push({kind:o.LabelName,metricName:p(t,e)});break;case s.LabelName:(null===(g=t.parent)||void 0===g?void 0:g.type.id)===s.GroupingLabel?w.push({kind:o.LabelName}):(null===(x=t.parent)||void 0===x?void 0:x.type.id)===s.LabelMatcher&&w.push({kind:o.LabelName,metricName:p(t,e)});break;case s.StringLiteral:if((null===(O=t.parent)||void 0===O?void 0:O.type.id)===s.LabelMatcher){var L="";(null===(y=t.parent.firstChild)||void 0===y?void 0:y.type.id)===s.LabelName&&(L=e.sliceDoc(t.parent.firstChild.from,t.parent.firstChild.to));var $=p(t,e),E=(0,c.buildLabelMatchers)((0,c.retrieveAllRecursiveNodes)((0,c.walkBackward)(t,s.LabelMatchList),s.LabelMatchList,s.LabelMatcher),e);w.push({kind:o.LabelValue,metricName:$,labelName:L,matchers:E})}break;case s.NumberLiteral:0===(null===(j=t.parent)||void 0===j?void 0:j.type.id)&&(null===(k=t.parent.parent)||void 0===k?void 0:k.type.id)===s.SubqueryExpr?w.push({kind:o.Duration}):w.push({kind:o.Number});break;case s.Duration:case s.OffsetExpr:w.push({kind:o.Duration});break;case s.FunctionCallBody:w.push({kind:o.MetricName,metricName:""},{kind:o.Function},{kind:o.Aggregation});break;case s.Neq:(null===(T=t.parent)||void 0===T?void 0:T.type.id)===s.MatchOp?w.push({kind:o.MatchOp}):(null===(_=t.parent)||void 0===_?void 0:_.type.id)===s.BinaryExpr&&w.push({kind:o.BinOp});break;case s.EqlSingle:case s.EqlRegex:case s.NeqRegex:case s.MatchOp:w.push({kind:o.MatchOp});break;case s.Pow:case s.Mul:case s.Div:case s.Mod:case s.Add:case s.Sub:case s.Eql:case s.Gte:case s.Gtr:case s.Lte:case s.Lss:case s.And:case s.Unless:case s.Or:case s.BinaryExpr:w.push({kind:o.BinOp})}return w}!function(e){e[e.MetricName=0]="MetricName",e[e.LabelName=1]="LabelName",e[e.LabelValue=2]="LabelValue",e[e.Function=3]="Function",e[e.Aggregation=4]="Aggregation",e[e.BinOpModifier=5]="BinOpModifier",e[e.BinOp=6]="BinOp",e[e.MatchOp=7]="MatchOp",e[e.AggregateOpModifier=8]="AggregateOpModifier",e[e.Duration=9]="Duration",e[e.Offset=10]="Offset",e[e.Bool=11]="Bool",e[e.AtModifiers=12]="AtModifiers",e[e.Number=13]="Number"}(o=t.ContextKind||(t.ContextKind={})),t.computeStartCompletePosition=h,t.analyzeCompletion=f;var m=function(){function e(e,t){void 0===t&&(t=1e4),this.prometheusClient=e,this.maxMetricsMetadata=t}return e.prototype.getPrometheusClient=function(){return this.prometheusClient},e.prototype.promQL=function(e){var t,n,s=this,c=e.state,p=e.pos,m=(0,u.syntaxTree)(c).resolve(p,-1),b=f(c,m),v=Promise.resolve([]),g=!1,x=!0,O=function(e){switch(e.kind){case o.Aggregation:g=!0,v=v.then((function(e){return e.concat(d.aggregateOp)}));break;case o.Function:g=!0,v=v.then((function(e){return e.concat(d.functionIdentifier)}));break;case o.BinOpModifier:v=v.then((function(e){return e.concat(d.binOpModifier)}));break;case o.BinOp:v=v.then((function(e){return e.concat(d.binOp)}));break;case o.MatchOp:v=v.then((function(e){return e.concat(d.matchOp)}));break;case o.AggregateOpModifier:v=v.then((function(e){return e.concat(d.aggregateOpModifier)}));break;case o.Duration:x=!1,v=v.then((function(e){return e.concat(d.duration)}));break;case o.Offset:v=v.then((function(e){return e.concat([{label:"offset"}])}));break;case o.Bool:v=v.then((function(e){return e.concat([{label:"bool"}])}));break;case o.AtModifiers:v=v.then((function(e){return e.concat(d.atModifier)}));break;case o.Number:v=v.then((function(e){return e.concat(d.number)}));break;case o.MetricName:v=v.then((function(t){return s.autocompleteMetricName(t,e)}));break;case o.LabelName:v=v.then((function(t){return s.autocompleteLabelName(t,e)}));break;case o.LabelValue:v=v.then((function(t){return s.autocompleteLabelValue(t,e)}))}};try{for(var y=i(b),j=y.next();!j.done;j=y.next()){O(j.value)}}catch(k){t={error:k}}finally{try{j&&!j.done&&(n=y.return)&&n.call(y)}finally{if(t)throw t.error}}return v.then((function(e){return function(e,t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var s=e;return i&&s.push.apply(s,r([],a(l.snippets),!1)),{from:t,to:n,options:s,span:o?/^[a-zA-Z0-9_:]+$/:void 0}}(e,h(m,p),p,g,x)}))},e.prototype.autocompleteMetricName=function(e,t){var n=this;if(!this.prometheusClient)return e;var r=new Map;return this.prometheusClient.metricNames(t.metricName).then((function(e){var t,a,o;try{for(var s=i(e),c=s.next();!c.done;c=s.next()){var l=c.value;r.set(l,{label:l,type:"constant"})}}catch(u){t={error:u}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(t)throw t.error}}if(e.length<=n.maxMetricsMetadata)return null===(o=n.prometheusClient)||void 0===o?void 0:o.metricMetadata()})).then((function(t){var n,o,s,c;if(t)try{for(var l=i(r),u=l.next();!u.done;u=l.next()){var d=a(u.value,2),p=d[0],h=d[1],f=t[p.replace(/(_count|_sum|_bucket)$/,"")];if(f)if(f.length>1)try{for(var m=(s=void 0,i(f)),b=m.next();!b.done;b=m.next()){var v=b.value;""===h.detail?h.detail=v.type:h.detail!==v.type&&(h.detail="unknown",h.info="multiple different definitions for this metric"),""===h.info?h.info=v.help:h.info!==v.help&&(h.info="multiple different definitions for this metric")}}catch(y){s={error:y}}finally{try{b&&!b.done&&(c=m.return)&&c.call(m)}finally{if(s)throw s.error}}else if(1===f.length){var g=f[0],x=g.type,O=g.help;"histogram"!==x&&"summary"!==x||(p.endsWith("_count")&&(x="counter",O="The total number of observations for: "+O),p.endsWith("_sum")&&(x="counter",O="The total sum of observations for: "+O),p.endsWith("_bucket")&&(x="counter",O="The total count of observations for a bucket in the histogram: "+O)),h.detail=x,h.info=O}}}catch(j){n={error:j}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return e.concat(Array.from(r.values()))}))},e.prototype.autocompleteLabelName=function(e,t){return this.prometheusClient?this.prometheusClient.labelNames(t.metricName).then((function(t){return e.concat(t.map((function(e){return{label:e,type:"constant"}})))})):e},e.prototype.autocompleteLabelValue=function(e,t){return this.prometheusClient&&t.labelName?this.prometheusClient.labelValues(t.labelName,t.metricName,t.matchers).then((function(t){return e.concat(t.map((function(e){return{label:e,type:"text"}})))})):e},e}();t.HybridComplete=m},272:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.getFunction=t.ValueType=void 0;var r,i=n(70);!function(e){e.none="none",e.vector="vector",e.scalar="scalar",e.matrix="matrix",e.string="string"}(r=t.ValueType||(t.ValueType={}));var o=((a={})[i.Abs]={name:"abs",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Absent]={name:"absent",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.AbsentOverTime]={name:"absent_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Acos]={name:"acos",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Acosh]={name:"acosh",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Asin]={name:"asin",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Asinh]={name:"asinh",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Atan]={name:"atan",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Atanh]={name:"atanh",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.AvgOverTime]={name:"avg_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Ceil]={name:"ceil",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Changes]={name:"changes",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Clamp]={name:"clamp",argTypes:[r.vector,r.scalar,r.scalar],variadic:0,returnType:r.vector},a[i.ClampMax]={name:"clamp_max",argTypes:[r.vector,r.scalar],variadic:0,returnType:r.vector},a[i.ClampMin]={name:"clamp_min",argTypes:[r.vector,r.scalar],variadic:0,returnType:r.vector},a[i.Cos]={name:"cos",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Cosh]={name:"Cosh",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.CountOverTime]={name:"count_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.DaysInMonth]={name:"days_in_month",argTypes:[r.vector],variadic:1,returnType:r.vector},a[i.DayOfMonth]={name:"day_of_month",argTypes:[r.vector],variadic:1,returnType:r.vector},a[i.DayOfWeek]={name:"day_of_week",argTypes:[r.vector],variadic:1,returnType:r.vector},a[i.Deg]={name:"deg",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Delta]={name:"delta",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Deriv]={name:"deriv",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Exp]={name:"exp",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Floor]={name:"floor",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.HistogramQuantile]={name:"histogram_quantile",argTypes:[r.scalar,r.vector],variadic:0,returnType:r.vector},a[i.HoltWinters]={name:"holt_winters",argTypes:[r.matrix,r.scalar,r.scalar],variadic:0,returnType:r.vector},a[i.Hour]={name:"hour",argTypes:[r.vector],variadic:1,returnType:r.vector},a[i.Idelta]={name:"idelta",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Increase]={name:"increase",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Irate]={name:"irate",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.LabelReplace]={name:"label_replace",argTypes:[r.vector,r.string,r.string,r.string,r.string],variadic:0,returnType:r.vector},a[i.LabelJoin]={name:"label_join",argTypes:[r.vector,r.string,r.string,r.string],variadic:-1,returnType:r.vector},a[i.LastOverTime]={name:"last_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Ln]={name:"ln",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Log10]={name:"log10",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Log2]={name:"log2",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.MaxOverTime]={name:"max_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.MinOverTime]={name:"min_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Minute]={name:"minute",argTypes:[r.vector],variadic:1,returnType:r.vector},a[i.Month]={name:"month",argTypes:[r.vector],variadic:1,returnType:r.vector},a[i.Pi]={name:"pi",argTypes:[],variadic:0,returnType:r.vector},a[i.PredictLinear]={name:"predict_linear",argTypes:[r.matrix,r.scalar],variadic:0,returnType:r.vector},a[i.PresentOverTime]={name:"present_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.QuantileOverTime]={name:"quantile_over_time",argTypes:[r.scalar,r.matrix],variadic:0,returnType:r.vector},a[i.Rad]={name:"rad",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Rate]={name:"rate",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Resets]={name:"resets",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Round]={name:"round",argTypes:[r.vector,r.scalar],variadic:1,returnType:r.vector},a[i.Scalar]={name:"scalar",argTypes:[r.vector],variadic:0,returnType:r.scalar},a[i.Sgn]={name:"sgn",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Sin]={name:"sin",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Sinh]={name:"Sinh",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Sort]={name:"sort",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.SortDesc]={name:"sort_desc",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Sqrt]={name:"sqrt",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.StddevOverTime]={name:"stddev_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.StdvarOverTime]={name:"stdvar_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.SumOverTime]={name:"sum_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},a[i.Tan]={name:"tan",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Tanh]={name:"tanh",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Time]={name:"time",argTypes:[],variadic:0,returnType:r.scalar},a[i.Timestamp]={name:"timestamp",argTypes:[r.vector],variadic:0,returnType:r.vector},a[i.Vector]={name:"vector",argTypes:[r.scalar],variadic:0,returnType:r.vector},a[i.Year]={name:"year",argTypes:[r.vector],variadic:1,returnType:r.vector},a);t.getFunction=function(e){return o[e]}},273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matcher=void 0;var a=n(70),r=function(){function e(e,t,n){this.type=e,this.name=t,this.value=n}return e.prototype.matchesEmpty=function(){switch(this.type){case a.EqlSingle:return""===this.value;case a.Neq:return""!==this.value;default:return!1}},e}();t.Matcher=r},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorMatchCardinality=void 0,function(e){e.CardOneToOne="one-to-one",e.CardManyToOne="many-to-one",e.CardOneToMany="one-to-many",e.CardManyToMany="many-to-many"}(t.VectorMatchCardinality||(t.VectorMatchCardinality={}))},275:function(e,t,n){"use strict";var a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var r=n(70),i=n(87),o=n(276),s=n(166),c=n(41),l=n(86),u=n(277),d=function(){function e(e){this.tree=(0,c.syntaxTree)(e),this.state=e,this.diagnostics=[]}return e.prototype.getDiagnostics=function(){return this.diagnostics.sort((function(e,t){return e.from-t.from}))},e.prototype.analyze=function(){this.checkAST(this.tree.topNode.firstChild),this.diagnoseAllErrorNodes()},e.prototype.diagnoseAllErrorNodes=function(){for(var e=this.tree.cursor();e.next();)if(0===e.type.id&&e.to!==this.tree.topNode.to){var t=e.node.parent;this.diagnostics.push({severity:"error",message:"unexpected expression",from:t?t.from:e.from,to:t?t.to:e.to})}},e.prototype.checkAST=function(e){if(!e)return l.ValueType.none;switch(e.type.id){case r.Expr:return this.checkAST(e.firstChild);case r.AggregateExpr:this.checkAggregationExpr(e);break;case r.BinaryExpr:this.checkBinaryExpr(e);break;case r.FunctionCall:this.checkCallFunction(e);break;case r.ParenExpr:this.checkAST((0,i.walkThrough)(e,r.Expr));break;case r.UnaryExpr:var t=this.checkAST((0,i.walkThrough)(e,r.Expr));t!==l.ValueType.scalar&&t!==l.ValueType.vector&&this.addDiagnostic(e,"unary expression only allowed on expressions of type scalar or instant vector, got "+t);break;case r.SubqueryExpr:var n=this.checkAST((0,i.walkThrough)(e,r.Expr));n!==l.ValueType.vector&&this.addDiagnostic(e,"subquery is only allowed on instant vector, got "+n+" in "+e.name+" instead");break;case r.MatrixSelector:this.checkAST((0,i.walkThrough)(e,r.Expr));break;case r.VectorSelector:this.checkVectorSelector(e);break;case r.StepInvariantExpr:var a=this.checkAST((0,i.walkThrough)(e,r.Expr));a!==l.ValueType.vector&&a!==l.ValueType.matrix&&this.addDiagnostic(e,"@ modifier must be preceded by an instant selector vector or range vector selector or a subquery")}return(0,o.getType)(e)},e.prototype.checkAggregationExpr=function(e){var t,n=null===(t=e.firstChild)||void 0===t?void 0:t.firstChild;if(n){var a=(0,i.walkThrough)(e,r.FunctionCallBody,r.FunctionCallArgs,r.Expr);if(a){this.expectType(a,l.ValueType.vector,"aggregation expression");var o=(0,i.walkThrough)(e,r.FunctionCallBody,r.FunctionCallArgs,r.FunctionCallArgs,r.Expr);if(n.type.id===r.Topk||n.type.id===r.Bottomk||n.type.id===r.Quantile){if(!o)return void this.addDiagnostic(e,"no parameter found");this.expectType(o,l.ValueType.scalar,"aggregation parameter")}if(n.type.id===r.CountValues){if(!o)return void this.addDiagnostic(e,"no parameter found");this.expectType(o,l.ValueType.string,"aggregation parameter")}}else this.addDiagnostic(e,"unable to find the parameter for the expression")}else this.addDiagnostic(e,"aggregation operator expected in aggregation expression but got nothing")},e.prototype.checkBinaryExpr=function(e){var t,n,o,s,c=e.firstChild,d=e.lastChild;if(c&&d){var p=this.checkAST(c),h=this.checkAST(d),f=(0,i.walkThrough)(e,r.BinModifiers,r.Bool),m=(0,i.containsAtLeastOneChild)(e,r.Eql,r.Neq,r.Lte,r.Lss,r.Gte,r.Gtr),b=(0,i.containsAtLeastOneChild)(e,r.And,r.Or,r.Unless);f?m||this.addDiagnostic(e,"bool modifier can only be used on comparison operators"):m&&p===l.ValueType.scalar&&h===l.ValueType.scalar&&this.addDiagnostic(e,"comparisons between scalars must use BOOL modifier");var v=(0,u.buildVectorMatching)(this.state,e);if(null!==v&&v.on)try{for(var g=a(v.matchingLabels),x=g.next();!x.done;x=g.next()){var O=x.value;try{for(var y=(o=void 0,a(v.include)),j=y.next();!j.done;j=y.next()){O===j.value&&this.addDiagnostic(e,'label "'+O+'" must not occur in ON and GROUP clause at once')}}catch(k){o={error:k}}finally{try{j&&!j.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}}}catch(T){t={error:T}}finally{try{x&&!x.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}p!==l.ValueType.scalar&&p!==l.ValueType.vector&&this.addDiagnostic(c,"binary expression must contain only scalar and instant vector types"),h!==l.ValueType.scalar&&h!==l.ValueType.vector&&this.addDiagnostic(d,"binary expression must contain only scalar and instant vector types"),p===l.ValueType.vector&&h===l.ValueType.vector||null===v?b&&((null===v||void 0===v?void 0:v.card)!==l.VectorMatchCardinality.CardOneToMany&&(null===v||void 0===v?void 0:v.card)!==l.VectorMatchCardinality.CardManyToOne||this.addDiagnostic(e,"no grouping allowed for set operations"),(null===v||void 0===v?void 0:v.card)!==l.VectorMatchCardinality.CardManyToMany&&this.addDiagnostic(e,"set operations must always be many-to-many")):v.matchingLabels.length>0&&this.addDiagnostic(e,"vector matching only allowed between instant vectors"),p!==l.ValueType.scalar&&h!==l.ValueType.scalar||!b||this.addDiagnostic(e,"set operator not allowed in binary scalar expression")}else this.addDiagnostic(e,"left or right expression is missing in binary expression")},e.prototype.checkCallFunction=function(e){var t,n=null===(t=e.firstChild)||void 0===t?void 0:t.firstChild;if(n){var a=(0,i.retrieveAllRecursiveNodes)((0,i.walkThrough)(e,r.FunctionCallBody),r.FunctionCallArgs,r.Expr),o=(0,l.getFunction)(n.type.id),s=o.argTypes.length;if(0===o.variadic)a.length!==s&&this.addDiagnostic(e,"expected "+s+' argument(s) in call to "'+o.name+'", got '+a.length);else{var c=s-1;if(c>a.length)this.addDiagnostic(e,"expected at least "+c+' argument(s) in call to "'+o.name+'", got '+a.length);else{var u=c+o.variadic;o.variadic>0&&u<a.length&&this.addDiagnostic(e,"expected at most "+u+' argument(s) in call to "'+o.name+'", got '+a.length)}}for(var d=0,p=0;p<a.length;p++){if((d=p)>=o.argTypes.length){if(0===o.variadic)break;d=o.argTypes.length-1}this.expectType(a[p],o.argTypes[d],'call to function "'+o.name+'"')}}else this.addDiagnostic(e,"function not defined")},e.prototype.checkVectorSelector=function(e){var t=(0,s.buildLabelMatchers)((0,i.retrieveAllRecursiveNodes)((0,i.walkThrough)(e,r.LabelMatchers,r.LabelMatchList),r.LabelMatchList,r.LabelMatcher),this.state),n="",a=(0,i.walkThrough)(e,r.MetricIdentifier,r.Identifier);if(a&&(n=this.state.sliceDoc(a.from,a.to)),""!==n){var o=t.find((function(e){return"__name__"===e.name}));o&&this.addDiagnostic(e,"metric name must not be set twice: "+n+" or "+o.value),t.push(new l.Matcher(r.EqlSingle,"__name__",n))}t.every((function(e){return e.matchesEmpty()}))&&this.addDiagnostic(e,"vector selector must contain at least one non-empty matcher")},e.prototype.expectType=function(e,t,n){var a=this.checkAST(e);a!==t&&this.addDiagnostic(e,"expected type "+t+" in "+n+", got "+a)},e.prototype.addDiagnostic=function(e,t){this.diagnostics.push({severity:"error",message:t,from:e.from,to:e.to})},e}();t.Parser=d},276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getType=void 0;var a=n(70),r=n(87),i=n(86);t.getType=function e(t){var n;if(!t)return i.ValueType.none;switch(t.type.id){case a.Expr:return e(t.firstChild);case a.AggregateExpr:case a.VectorSelector:return i.ValueType.vector;case a.OffsetExpr:return e(t.firstChild);case a.StringLiteral:return i.ValueType.string;case a.NumberLiteral:return i.ValueType.scalar;case a.MatrixSelector:case a.SubqueryExpr:return i.ValueType.matrix;case a.ParenExpr:case a.UnaryExpr:return e((0,r.walkThrough)(t,a.Expr));case a.BinaryExpr:var o=e(t.firstChild),s=e(t.lastChild);return o===i.ValueType.scalar&&s===i.ValueType.scalar?i.ValueType.scalar:i.ValueType.vector;case a.FunctionCall:var c=null===(n=t.firstChild)||void 0===n?void 0:n.firstChild;return c?(0,i.getFunction)(c.type.id).returnType:i.ValueType.none;case a.StepInvariantExpr:return e((0,r.walkThrough)(t,a.Expr));default:return i.ValueType.none}}},277:function(e,t,n){"use strict";var a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.buildVectorMatching=void 0;var r=n(70),i=n(86),o=n(87);t.buildVectorMatching=function(e,t){var n,s,c,l;if(!t||t.type.id!==r.BinaryExpr)return null;var u={card:i.VectorMatchCardinality.CardOneToOne,matchingLabels:[],on:!1,include:[]},d=t.getChild(r.BinModifiers);if(d){var p=d.getChild(r.OnOrIgnoring);if(p){u.on=null!==p.getChild(r.On);var h=(0,o.retrieveAllRecursiveNodes)(p.getChild(r.GroupingLabels),r.GroupingLabelList,r.GroupingLabel);if(h.length>0)try{for(var f=a(h),m=f.next();!m.done;m=f.next()){var b=m.value;u.matchingLabels.push(e.sliceDoc(b.from,b.to))}}catch(j){n={error:j}}finally{try{m&&!m.done&&(s=f.return)&&s.call(f)}finally{if(n)throw n.error}}}var v=d.getChild(r.GroupLeft),g=d.getChild(r.GroupRight);if(v||g){u.card=v?i.VectorMatchCardinality.CardManyToOne:i.VectorMatchCardinality.CardOneToMany;var x=(0,o.retrieveAllRecursiveNodes)(d.getChild(r.GroupingLabels),r.GroupingLabelList,r.GroupingLabel);if(x.length>0)try{for(var O=a(x),y=O.next();!y.done;y=O.next()){b=y.value;u.include.push(e.sliceDoc(b.from,b.to))}}catch(k){c={error:k}}finally{try{y&&!y.done&&(l=O.return)&&l.call(O)}finally{if(c)throw c.error}}}}return(0,o.containsAtLeastOneChild)(t,r.And,r.Or,r.Unless)&&u.card===i.VectorMatchCardinality.CardOneToOne&&(u.card=i.VectorMatchCardinality.CardManyToMany),u}},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snippets=t.numberTerms=t.aggregateOpModifierTerms=t.aggregateOpTerms=t.functionIdentifierTerms=t.atModifierTerms=t.binOpModifierTerms=t.binOpTerms=t.matchOpTerms=t.durationTerms=void 0;var a=n(68);t.durationTerms=[{label:"y"},{label:"w"},{label:"d"},{label:"h"},{label:"m"},{label:"s"},{label:"ms"}],t.matchOpTerms=[{label:"="},{label:"!="},{label:"=~"},{label:"!~"}],t.binOpTerms=[{label:"^"},{label:"*"},{label:"/"},{label:"%"},{label:"+"},{label:"-"},{label:"=="},{label:">="},{label:">"},{label:"<"},{label:"<="},{label:"!="},{label:"and"},{label:"or"},{label:"unless"}],t.binOpModifierTerms=[{label:"on",info:"Match only on specified labels",type:"keyword"},{label:"ignoring",info:"Ignore specified labels for matching",type:"keyword"},{label:"group_left",info:"Allow many-to-one matching",type:"keyword"},{label:"group_right",info:"Allow one-to-many matching",type:"keyword"}],t.atModifierTerms=[{label:"start()",info:"resolve to the start of the query",type:"keyword"},{label:"end()",info:"resolve to the end of the query",type:"keyword"}],t.functionIdentifierTerms=[{label:"abs",detail:"function",info:"Return absolute values of input series",type:"function"},{label:"absent",detail:"function",info:"Determine whether input vector is empty",type:"function"},{label:"absent_over_time",detail:"function",info:"Determine whether input range vector is empty",type:"function"},{label:"acos",detail:"function",info:"Calculate the arccosine, in radians, for input series",type:"function"},{label:"acosh",detail:"function",info:"Calculate the inverse hyperbolic cosine, in radians, for input series",type:"function"},{label:"asin",detail:"function",info:"Calculate the arcsine, in radians, for input series",type:"function"},{label:"asinh",detail:"function",info:"Calculate the inverse hyperbolic sine, in radians, for input series",type:"function"},{label:"atan",detail:"function",info:"Calculate the arctangent, in radians, for input series",type:"function"},{label:"atanh",detail:"function",info:"Calculate the inverse hyperbolic tangent, in radians, for input series",type:"function"},{label:"avg_over_time",detail:"function",info:"Average series values over time",type:"function"},{label:"ceil",detail:"function",info:"Round up values of input series to nearest integer",type:"function"},{label:"changes",detail:"function",info:"Return number of value changes in input series over time",type:"function"},{label:"clamp",detail:"function",info:"Limit the value of input series between a minimum and a maximum",type:"function"},{label:"clamp_max",detail:"function",info:"Limit the value of input series to a maximum",type:"function"},{label:"clamp_min",detail:"function",info:"Limit the value of input series to a minimum",type:"function"},{label:"cos",detail:"function",info:"Calculate the cosine, in radians, for input series",type:"function"},{label:"cosh",detail:"function",info:"Calculate the hyperbolic cosine, in radians, for input series",type:"function"},{label:"count_over_time",detail:"function",info:"Count the number of values for each input series",type:"function"},{label:"days_in_month",detail:"function",info:"Return the number of days in current month for provided timestamps",type:"function"},{label:"day_of_month",detail:"function",info:"Return the day of the month for provided timestamps",type:"function"},{label:"day_of_week",detail:"function",info:"Return the day of the week for provided timestamps",type:"function"},{label:"deg",detail:"function",info:"Convert radians to degrees for input series",type:"function"},{label:"delta",detail:"function",info:"Calculate the difference between beginning and end of a range vector (for gauges)",type:"function"},{label:"deriv",detail:"function",info:"Calculate the per-second derivative over series in a range vector (for gauges)",type:"function"},{label:"exp",detail:"function",info:"Calculate exponential function for input vector values",type:"function"},{label:"floor",detail:"function",info:"Round down values of input series to nearest integer",type:"function"},{label:"histogram_quantile",detail:"function",info:"Calculate quantiles from histogram buckets",type:"function"},{label:"holt_winters",detail:"function",info:"Calculate smoothed value of input series",type:"function"},{label:"hour",detail:"function",info:"Return the hour of the day for provided timestamps",type:"function"},{label:"idelta",detail:"function",info:"Calculate the difference between the last two samples of a range vector (for counters)",type:"function"},{label:"increase",detail:"function",info:"Calculate the increase in value over a range of time (for counters)",type:"function"},{label:"irate",detail:"function",info:"Calculate the per-second increase over the last two samples of a range vector (for counters)",type:"function"},{label:"label_replace",detail:"function",info:"Set or replace label values",type:"function"},{label:"label_join",detail:"function",info:"Join together label values into new label",type:"function"},{label:"last_over_time",detail:"function",info:"The most recent point value in specified interval.",type:"function"},{label:"ln",detail:"function",info:"Calculate natural logarithm of input series",type:"function"},{label:"log10",detail:"function",info:"Calulcate base-10 logarithm of input series",type:"function"},{label:"log2",detail:"function",info:"Calculate base-2 logarithm of input series",type:"function"},{label:"max_over_time",detail:"function",info:"Return the maximum value over time for input series",type:"function"},{label:"min_over_time",detail:"function",info:"Return the minimum value over time for input series",type:"function"},{label:"minute",detail:"function",info:"Return the minute of the hour for provided timestamps",type:"function"},{label:"month",detail:"function",info:"Return the month for provided timestamps",type:"function"},{label:"pi",detail:"function",info:"Return pi",type:"function"},{label:"predict_linear",detail:"function",info:"Predict the value of a gauge into the future",type:"function"},{label:"present_over_time",detail:"function",info:"the value 1 for any series in the specified interval",type:"function"},{label:"quantile_over_time",detail:"function",info:"Calculate value quantiles over time for input series",type:"function"},{label:"rad",detail:"function",info:"Convert degrees to radians for input series",type:"function"},{label:"rate",detail:"function",info:"Calculate per-second increase over a range vector (for counters)",type:"function"},{label:"resets",detail:"function",info:"Return number of value decreases (resets) in input series of time",type:"function"},{label:"round",detail:"function",info:"Round values of input series to nearest integer",type:"function"},{label:"scalar",detail:"function",info:"Convert single-element series vector into scalar value",type:"function"},{label:"sgn",detail:"function",info:"Returns the sign of the instant vector",type:"function"},{label:"sin",detail:"function",info:"Calculate the sine, in radians, for input series",type:"function"},{label:"sinh",detail:"function",info:"Calculate the hyperbolic sine, in radians, for input series",type:"function"},{label:"sort",detail:"function",info:"Sort input series ascendingly by value",type:"function"},{label:"sort_desc",detail:"function",info:"Sort input series descendingly by value",type:"function"},{label:"sqrt",detail:"function",info:"Return the square root for input series",type:"function"},{label:"stddev_over_time",detail:"function",info:"Calculate the standard deviation within input series over time",type:"function"},{label:"stdvar_over_time",detail:"function",info:"Calculate the standard variation within input series over time",type:"function"},{label:"sum_over_time",detail:"function",info:"Calculate the sum over the values of input series over time",type:"function"},{label:"tan",detail:"function",info:"Calculate the tangent, in radians, for input series",type:"function"},{label:"tanh",detail:"function",info:"Calculate the hyperbolic tangent, in radians, for input series",type:"function"},{label:"time",detail:"function",info:"Return the Unix timestamp at the current evaluation time",type:"function"},{label:"timestamp",detail:"function",info:"Return the Unix timestamp for the samples in the input vector",type:"function"},{label:"vector",detail:"function",info:"Convert a scalar value into a single-element series vector",type:"function"},{label:"year",detail:"function",info:"Return the year for provided timestamps",type:"function"}],t.aggregateOpTerms=[{label:"avg",detail:"aggregation",info:"Calculate the average over dimensions",type:"keyword"},{label:"bottomk",detail:"aggregation",info:"Smallest k elements by sample value",type:"keyword"},{label:"count",detail:"aggregation",info:"Count number of elements in the vector",type:"keyword"},{label:"count_values",detail:"aggregation",info:"Count number of elements with the same value",type:"keyword"},{label:"group",detail:"aggregation",info:"Group series, while setting the sample value to 1",type:"keyword"},{label:"max",detail:"aggregation",info:"Select maximum over dimensions",type:"keyword"},{label:"min",detail:"aggregation",info:"Select minimum over dimensions",type:"keyword"},{label:"quantile",detail:"aggregation",info:"Calculate \u03c6-quantile (0 \u2264 \u03c6 \u2264 1) over dimensions",type:"keyword"},{label:"stddev",detail:"aggregation",info:"Calculate population standard deviation over dimensions",type:"keyword"},{label:"stdvar",detail:"aggregation",info:"Calculate population standard variance over dimensions",type:"keyword"},{label:"sum",detail:"aggregation",info:"Calculate sum over dimensions",type:"keyword"},{label:"topk",detail:"aggregation",info:"Largest k elements by sample value",type:"keyword"}],t.aggregateOpModifierTerms=[{label:"by",info:"Keep the listed labels, remove all others.",type:"keyword"},{label:"without",info:"Remove the listed labels, preserve all others.",type:"keyword"}],t.numberTerms=[{label:"nan",info:"Floating-point NaN value",type:"constant"},{label:"inf",info:"Floating-point infinity",type:"constant"}],t.snippets=[{label:"sum(rate(__input_vector__[5m]))",type:"function",detail:"snippet",info:"Sum over rates of increase",apply:(0,a.snippet)("sum(rate(${__input_vector__}[5m]))")},{label:"histogram_quantile(__quantile__, sum by(le) (rate(__histogram_metric__[5m])))",type:"function",detail:"snippet",info:"Approximate a quantile value from an aggregated histogram",apply:(0,a.snippet)("histogram_quantile(${__quantile__}, sum by(le) (rate(${__histogram_metric__}[5m])))")},{label:'label_replace(__input_vector__, "__dst__", "__replacement__", "__src__", "__regex__")',type:"function",detail:"snippet",info:"Set or replace a label value in an input vector",apply:(0,a.snippet)('label_replace(${__input_vector__}, "${__dst__}", "${__replacement__}", "${__src__}", "${__regex__}")')},{label:"topk(__rank_number__, __input_vector__)",type:"function",detail:"snippet",info:"Largest k elements by sample value",apply:(0,a.snippet)("topk(${__rank_number__}, ${__input_vector__})")},{label:"bottomk(__rank_number__, __input_vector__)",type:"function",detail:"snippet",info:"Smallest k elements by sample value",apply:(0,a.snippet)("bottomk(${__rank_number__}, ${__input_vector__})")},{label:'count_values("__label_name__", __input_vector__)',type:"function",detail:"snippet",info:"Count the number of series per distinct sample value",apply:(0,a.snippet)('count_values("${__label_name__}", ${__metric__})')}]},279:function(e,t,n){"use strict";var a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CachedPrometheusClient=t.HTTPPrometheusClient=void 0;var o=n(165),s=i(n(91)),c="/api/v1/label/:name/values",l=400,u=422,d=503,p=function(){function e(e){this.lookbackInterval=432e5,this.httpMethod="POST",this.fetchFn=function(e,t){return fetch(e,t)},this.url=e.url,this.errorHandler=e.httpErrorHandler,e.lookbackInterval&&(this.lookbackInterval=e.lookbackInterval),e.fetchFn&&(this.fetchFn=e.fetchFn),e.httpMethod&&(this.httpMethod=e.httpMethod)}return e.prototype.labelNames=function(e){var t=this,n=new Date,i=new Date(n.getTime()-this.lookbackInterval);if(void 0===e||""===e){var o=this.buildRequest("/api/v1/labels",new URLSearchParams({start:i.toISOString(),end:n.toISOString()}));return this.fetchAPI(o.uri,{method:this.httpMethod,body:o.body}).catch((function(e){return t.errorHandler&&t.errorHandler(e),[]}))}return this.series(e).then((function(e){var t,n,i,o,s=new Set;try{for(var c=a(e),l=c.next();!l.done;l=c.next()){var u=l.value;try{for(var d=(i=void 0,a(Object.entries(u))),p=d.next();!p.done;p=d.next()){var h=r(p.value,1)[0];"__name__"!==h&&s.add(h)}}catch(f){i={error:f}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return Array.from(s)}))},e.prototype.labelValues=function(e,t,n){var i=this,o=new Date,s=new Date(o.getTime()-this.lookbackInterval);if(!t||0===t.length){var l=new URLSearchParams({start:s.toISOString(),end:o.toISOString()});return this.fetchAPI(c.replace(/:name/gi,e)+"?"+l).catch((function(e){return i.errorHandler&&i.errorHandler(e),[]}))}return this.series(t,n,e).then((function(t){var n,i,o,s,c=new Set;try{for(var l=a(t),u=l.next();!u.done;u=l.next()){var d=u.value;try{for(var p=(o=void 0,a(Object.entries(d))),h=p.next();!h.done;h=p.next()){var f=r(h.value,2),m=f[0],b=f[1];"__name__"!==m&&(m===e&&c.add(b))}}catch(v){o={error:v}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}}}catch(g){n={error:g}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return Array.from(c)}))},e.prototype.metricMetadata=function(){var e=this;return this.fetchAPI("/api/v1/metadata").catch((function(t){return e.errorHandler&&e.errorHandler(t),{}}))},e.prototype.series=function(e,t,n){var a=this,r=new Date,i=new Date(r.getTime()-this.lookbackInterval),s=this.buildRequest("/api/v1/series",new URLSearchParams({start:i.toISOString(),end:r.toISOString(),"match[]":(0,o.labelMatchersToString)(e,t,n)}));return this.fetchAPI(s.uri,{method:this.httpMethod,body:s.body}).catch((function(e){return a.errorHandler&&a.errorHandler(e),[]}))},e.prototype.metricNames=function(){return this.labelValues("__name__")},e.prototype.fetchAPI=function(e,t){return this.fetchFn(this.url+e,t).then((function(e){if(!e.ok&&![l,u,d].includes(e.status))throw new Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){if("error"===e.status)throw new Error(void 0!==e.error?e.error:'missing "error" field in response JSON');if(void 0===e.data)throw new Error('missing "data" field in response JSON');return e.data}))},e.prototype.buildRequest=function(e,t){var n=e,a=t;return"GET"===this.httpMethod&&(n=n+"?"+t,a=null),{uri:n,body:a}},e}();t.HTTPPrometheusClient=p;var h=function(){function e(e){var t=e&&e.maxAge?e.maxAge:3e5;this.completeAssociation=new s.default(t),this.metricMetadata={},this.labelValues=new s.default(t),this.labelNames=[],(null===e||void 0===e?void 0:e.initialMetricList)&&this.setLabelValues("__name__",e.initialMetricList)}return e.prototype.setAssociations=function(e,t){var n=this;t.forEach((function(t){var i,o,s=n.completeAssociation.get(e);s||(s=new Map,n.completeAssociation.set(e,s));try{for(var c=a(Object.entries(t)),l=c.next();!l.done;l=c.next()){var u=r(l.value,2),d=u[0],p=u[1];if("__name__"!==d){var h=s.get(d);void 0===h?s.set(d,new Set([p])):h.add(p)}}}catch(f){i={error:f}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}))},e.prototype.setMetricMetadata=function(e){this.metricMetadata=e},e.prototype.getMetricMetadata=function(){return this.metricMetadata},e.prototype.setLabelNames=function(e){this.labelNames=e},e.prototype.getLabelNames=function(e){if(!e||0===e.length)return this.labelNames;var t=this.completeAssociation.get(e);return t?Array.from(t.keys()):[]},e.prototype.setLabelValues=function(e,t){this.labelValues.set(e,t)},e.prototype.getLabelValues=function(e,t){if(!t||0===t.length){var n=this.labelValues.get(e);return n||[]}var a=this.completeAssociation.get(t);if(a){var r=a.get(e);return r?Array.from(r):[]}return[]},e}(),f=function(){function e(e,t){this.client=e,this.cache=new h(t)}return e.prototype.labelNames=function(e){var t=this,n=this.cache.getLabelNames(e);return n&&n.length>0?Promise.resolve(n):void 0===e||""===e?this.client.labelNames().then((function(e){return t.cache.setLabelNames(e),e})):this.series(e).then((function(){return t.cache.getLabelNames(e)}))},e.prototype.labelValues=function(e,t){var n=this,a=this.cache.getLabelValues(e,t);return a&&a.length>0?Promise.resolve(a):void 0===t||""===t?this.client.labelValues(e).then((function(t){return n.cache.setLabelValues(e,t),t})):this.series(t).then((function(){return n.cache.getLabelValues(e,t)}))},e.prototype.metricMetadata=function(){var e=this,t=this.cache.getMetricMetadata();return t&&Object.keys(t).length>0?Promise.resolve(t):this.client.metricMetadata().then((function(t){return e.cache.setMetricMetadata(t),e.cache.getMetricMetadata()}))},e.prototype.series=function(e){var t=this;return this.client.series(e).then((function(n){return t.cache.setAssociations(e,n),n}))},e.prototype.metricNames=function(){return this.labelValues("__name__")},e}();t.CachedPrometheusClient=f},283:function(e,t){!function(e){e.color={},e.color.make=function(t,n,a,r){var i={};return i.r=t||0,i.g=n||0,i.b=a||0,i.a=null!=r?r:1,i.add=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]+=t;return i.normalize()},i.scale=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]*=t;return i.normalize()},i.toString=function(){return i.a>=1?"rgb("+[i.r,i.g,i.b].join(",")+")":"rgba("+[i.r,i.g,i.b,i.a].join(",")+")"},i.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}return i.r=e(0,parseInt(i.r),255),i.g=e(0,parseInt(i.g),255),i.b=e(0,parseInt(i.b),255),i.a=e(0,i.a,1),i},i.clone=function(){return e.color.make(i.r,i.b,i.g,i.a)},i.normalize()},e.color.extract=function(t,n){var a;do{if(""!=(a=t.css(n).toLowerCase())&&"transparent"!=a)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==a&&(a="transparent"),e.color.parse(a)},e.color.parse=function(n){var a,r=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return r(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return r(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return r(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return r(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return r(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));var i=e.trim(n).toLowerCase();return"transparent"==i?r(255,255,255,0):r((a=t[i]||[0,0,0])[0],a[1],a[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(window.jQuery),function(e){var t=Object.prototype.hasOwnProperty;function n(t,n){var a=n.children("."+t)[0];if(null==a&&((a=document.createElement("canvas")).className=t,e(a).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!a.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");a=window.G_vmlCanvasManager.initElement(a)}this.element=a;var r=this.context=a.getContext("2d"),i=window.devicePixelRatio||1,o=r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;this.pixelRatio=i/o,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function a(t,a,r,i){var o=[],s={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},c=null,l=null,u=null,d=null,p=null,h=[],f=[],m={left:0,right:0,top:0,bottom:0},b=0,v=0,g={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function O(e,t){t=[x].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function y(t){o=function(t){for(var n=[],a=0;a<t.length;++a){var r=e.extend(!0,{},s.series);null!=t[a].data?(r.data=t[a].data,delete t[a].data,e.extend(!0,r,t[a]),t[a].data=r.data):r.data=t[a],n.push(r)}return n}(t),function(){var t,n=o.length,a=-1;for(t=0;t<o.length;++t){var r=o[t].color;null!=r&&(n--,"number"==typeof r&&r>a&&(a=r))}n<=a&&(n=a+1);var i,c=[],l=s.colors,u=l.length,d=0;for(t=0;t<n;t++)i=e.color.parse(l[t%u]||"#666"),t%u==0&&t&&(d=d>=0?d<.5?-d-.2:0:-d),c[t]=i.scale("rgb",1+d);var p,m=0;for(t=0;t<o.length;++t){if(null==(p=o[t]).color?(p.color=c[m].toString(),++m):"number"==typeof p.color&&(p.color=c[p.color].toString()),null==p.lines.show){var b,v=!0;for(b in p)if(p[b]&&p[b].show){v=!1;break}v&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=_(h,j(p,"x")),p.yaxis=_(f,j(p,"y"))}}(),function(){var t,n,a,r,i,s,c,l,u,d,p,h,f=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE;function v(e,t,n){t<e.datamin&&t!=-b&&(e.datamin=t),n>e.datamax&&n!=b&&(e.datamax=n)}for(e.each(k(),(function(e,t){t.datamin=f,t.datamax=m,t.used=!1})),t=0;t<o.length;++t)(i=o[t]).datapoints={points:[]},O(g.processRawData,[i,i.data,i.datapoints]);for(t=0;t<o.length;++t){if(p=(i=o[t]).data,!(h=i.datapoints.format)){if((h=[]).push({x:!0,number:!0,required:!0}),h.push({y:!0,number:!0,required:!0}),i.stack||i.bars.show||i.lines.show&&i.lines.fill){var x=!!(i.bars.show&&i.bars.zero||i.lines.show&&i.lines.zero);h.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),i.bars.horizontal&&(delete h[h.length-1].y,h[h.length-1].x=!0)}i.datapoints.format=h}if(null==i.datapoints.pointsize){i.datapoints.pointsize=h.length,c=i.datapoints.pointsize,s=i.datapoints.points;var y=i.lines.show&&i.lines.steps;for(i.xaxis.used=i.yaxis.used=!0,n=a=0;n<p.length;++n,a+=c){var j=null==(d=p[n]);if(!j)for(r=0;r<c;++r)l=d[r],(u=h[r])&&(u.number&&null!=l&&(l=+l,isNaN(l)?l=null:l==1/0?l=b:l==-1/0&&(l=-b)),null==l&&(u.required&&(j=!0),null!=u.defaultValue&&(l=u.defaultValue))),s[a+r]=l;if(j)for(r=0;r<c;++r)null!=(l=s[a+r])&&!1!==(u=h[r]).autoscale&&(u.x&&v(i.xaxis,l,l),u.y&&v(i.yaxis,l,l)),s[a+r]=null;if(y&&a>0&&(!j||null!=s[a-c])){for(r=0;r<c;++r)s[a+c+r]=s[a+r];s[a+1]=s[a-c+1]||0,j&&(s[a]=d[0]),a+=c}}}}for(t=0;t<o.length;++t){if(s=(i=o[t]).datapoints.points,c=i.datapoints.pointsize,"negative-Y"===i.transform)for(n=0;n<s.length;n+=c)null!=s[n]&&(l=s[n+1],s[n+1]=-l);O(g.processDatapoints,[i,i.datapoints])}for(t=0;t<o.length;++t){s=(i=o[t]).datapoints.points,c=i.datapoints.pointsize,h=i.datapoints.format;var T=f,_=f,w=m,S=m;for(n=0;n<s.length;n+=c)if(null!=s[n])for(r=0;r<c;++r)l=s[n+r],(u=h[r])&&!1!==u.autoscale&&l!=b&&l!=-b&&(u.x&&(l<T&&(T=l),l>w&&(w=l)),u.y&&(l<_&&(_=l),l>S&&(S=l)));if(i.bars.show){var C;switch(i.bars.align){case"left":C=0;break;case"right":C=-i.bars.barWidth;break;default:C=-i.bars.barWidth/2}i.bars.horizontal?(_+=C,S+=C+i.bars.barWidth):(T+=C,w+=C+i.bars.barWidth)}v(i.xaxis,T,w),v(i.yaxis,_,S)}e.each(k(),(function(e,t){t.datamin==f&&(t.datamin=null),t.datamax==m&&(t.datamax=null)}))}()}function j(e,t){var n=e[t+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function k(){return e.grep(h.concat(f),(function(e){return e}))}function T(e){var t,n,a={};for(t=0;t<h.length;++t)(n=h[t])&&(a["x"+n.n]=n.c2p(e.left));for(t=0;t<f.length;++t)(n=f[t])&&(a["y"+n.n]=n.c2p(e.top));return void 0!==a.x1&&(a.x=a.x1),void 0!==a.y1&&(a.y=a.y1),a}function _(t,n){return t[n-1]||(t[n-1]={n:n,direction:t==h?"x":"y",options:e.extend(!0,{},t==h?s.xaxis:s.yaxis)}),t[n-1]}function w(){q&&clearTimeout(q),u.unbind("mousemove",F),u.unbind("mouseleave",V),u.unbind("click",z),O(g.shutdown,[u])}function S(e){for(var t=e.options,n=e.ticks||[],a=t.labelWidth||0,r=t.labelHeight||0,i=a||("x"==e.direction?Math.floor(c.width/(n.length||1)):null),o=e.direction+"Axis "+e.direction+e.n+"Axis",s="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+o,l=t.font||"flot-tick-label tickLabel",u=0;u<n.length;++u){var d=n[u];if(d.label){var p=c.getTextInfo(s,d.label,l,null,i);a=Math.max(a,p.width+1),r=Math.max(r,p.height)}}e.labelWidth=t.labelWidth||a,e.labelHeight=t.labelHeight||r}function C(t){var n=t.labelWidth,a=t.labelHeight,r=t.options.position,i="x"===t.direction,o=t.options.tickLength,l=s.grid.axisMargin,u=s.grid.labelMargin,d=s.grid.eventSectionHeight,p=!0,b=!0,v=!0,g=!1;e.each(i?h:f,(function(e,n){n&&(n.show||n.reserveSpace)&&(n===t?g=!0:n.options.position===r&&(g?b=!1:p=!1),g||(v=!1))})),b&&(l=0),null==o&&(o=v?"full":5),isNaN(+o)||(u+=+o),i?(a+=u,a+=d,"bottom"==r?(m.bottom+=a+l,t.box={top:c.height-m.bottom,height:a}):(t.box={top:m.top+l,height:a},m.top+=a+l)):(n+=u,"left"==r?(t.box={left:m.left+l,width:n},m.left+=n+l):(m.right+=n+l,t.box={left:c.width-m.right,width:n})),t.position=r,t.tickLength=o,t.box.padding=u,t.box.eventSectionPadding=d,t.innermost=p}function M(){var n,a,r=k(),i=s.grid.show;for(var l in m){var u=s.grid.margin||0;m[l]="number"==typeof u?u:u[l]||0}for(var l in O(g.processOffset,[m]),m)"object"==typeof s.grid.borderWidth?m[l]+=i?s.grid.borderWidth[l]:0:m[l]+=i?s.grid.borderWidth:0;(e.each(r,(function(e,t){var n=t.options;t.show=null==n.show?t.used:n.show,t.reserveSpace=null==n.reserveSpace?t.show:n.reserveSpace,function(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),a=+(null!=t.max?t.max:e.datamax),r=a-n;if(0==r){var i=.25,o=Math.abs(0==a?1:a*i);null==t.min&&(n-=o),null!=t.max&&null==t.min||(a+=o)}else{var s=t.autoscaleMargin;null!=s&&(null==t.min&&(n-=r*s)<0&&null!=e.datamin&&e.datamin>=0&&(n=0),null==t.max&&(a+=r*s)>0&&null!=e.datamax&&e.datamax<=0&&(a=0))}e.min=n,e.max=a}(t)})),O(g.processRange,[]),i)&&function(){n=e.grep(r,(function(e){return e.show||e.reserveSpace}));var t=!1;for(a=0;a<2&&(e.each(n,(function(e,n){P(n),L(n),t=$(n,n.ticks)||t,S(n)})),t&&g.processRange.length>0);a++)O(g.processRange,[]),t=!1;for(a=n.length-1;a>=0;--a)C(n[a]);!function(){var t,n=s.grid.minBorderMargin;if(null==n)for(n=0,t=0;t<o.length;++t)n=Math.max(n,2*(o[t].points.radius+o[t].points.lineWidth/2));var a={left:n,right:n,top:n,bottom:n};e.each(k(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(a.left=Math.max(a.left,t.labelWidth/2),a.right=Math.max(a.right,t.labelWidth/2)):(a.bottom=Math.max(a.bottom,t.labelHeight/2),a.top=Math.max(a.top,t.labelHeight/2)))})),m.left=Math.ceil(Math.max(a.left,m.left)),m.right=Math.ceil(Math.max(a.right,m.right)),m.top=Math.ceil(Math.max(a.top,m.top)),m.bottom=Math.ceil(Math.max(a.bottom,m.bottom))}(),e.each(n,(function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left-e.labelWidth/2,e.box.width=c.width-m.left-m.right+e.labelWidth):(e.box.top=m.top-e.labelHeight/2,e.box.height=c.height-m.bottom-m.top+e.labelHeight)}(t)}))}();b=c.width-m.left-m.right,v=c.height-m.bottom-m.top,e.each(r,(function(e,t){!function(e){function t(e){return e}var n,a,r=e.options.transform||t,i=e.options.inverseTransform;"x"==e.direction?(n=e.scale=b/Math.abs(r(e.max)-r(e.min)),a=Math.min(r(e.max),r(e.min))):(n=-(n=e.scale=v/Math.abs(r(e.max)-r(e.min))),a=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-a)*n}:function(e){return(r(e)-a)*n},e.c2p=i?function(e){return i(a+e/n)}:function(e){return a+e/n}}(t)})),i&&e.each(k(),(function(e,t){var n,a,r,i,o,s=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",u="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,d=t.options.font||"flot-tick-label tickLabel";if(c.removeText(u),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(n=t.ticks[p]).label||n.v<t.min||n.v>t.max||("x"==t.direction?(i="center",a=m.left+t.p2c(n.v),"bottom"==t.position?r=s.top+s.padding+s.eventSectionPadding:(r=s.top+s.height-s.padding,o="bottom")):(o="middle",r=m.top+t.p2c(n.v),"left"==t.position?(a=s.left+s.width-s.padding,i="right"):a=s.left+s.padding),c.addText(u,a,r,n.label,d,null,null,i,o))})),function(){null!=s.legend.container?e(s.legend.container).html(""):t.find(".legend").remove();if(!s.legend.show)return;for(var n,a,r=[],i=[],c=!1,l=s.legend.labelFormatter,u=0;u<o.length;++u)(n=o[u]).label&&(a=l?l(n.label,n):n.label)&&i.push({label:a,color:n.color});if(s.legend.sorted)if(e.isFunction(s.legend.sorted))i.sort(s.legend.sorted);else if("reverse"==s.legend.sorted)i.reverse();else{var d="descending"!=s.legend.sorted;i.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=d?1:-1}))}for(u=0;u<i.length;++u){var p=i[u];u%s.legend.noColumns==0&&(c&&r.push("</tr>"),r.push("<tr>"),c=!0),r.push('<td class="legendColorBox"><div style="border:1px solid '+s.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+p.label+"</td>")}c&&r.push("</tr>");if(0==r.length)return;var h='<table style="font-size:smaller;color:'+s.grid.color+'">'+r.join("")+"</table>";if(null!=s.legend.container)e(s.legend.container).html(h);else{var f="",b=s.legend.position,v=s.legend.margin;null==v[0]&&(v=[v,v]),"n"==b.charAt(0)?f+="top:"+(v[1]+m.top)+"px;":"s"==b.charAt(0)&&(f+="bottom:"+(v[1]+m.bottom)+"px;"),"e"==b.charAt(1)?f+="right:"+(v[0]+m.right)+"px;":"w"==b.charAt(1)&&(f+="left:"+(v[0]+m.left)+"px;");var g=e('<div class="legend">'+h.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(t);if(0!=s.legend.backgroundOpacity){var x=s.legend.backgroundColor;null==x&&((x=(x=s.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(g,"background-color")).a=1,x=x.toString());var O=g.children();e('<div style="position:absolute;width:'+O.width()+"px;height:"+O.height()+"px;"+f+"background-color:"+x+';"> </div>').prependTo(g).css("opacity",s.legend.backgroundOpacity)}}}()}function P(t){var n,a=t.options;n="number"==typeof a.ticks&&a.ticks>0?a.ticks:.3*Math.sqrt("x"==t.direction?c.width:c.height);var r=(t.max-t.min)/n,i=-Math.floor(Math.log(r)/Math.LN10),o=a.tickDecimals;null!=o&&i>o&&(i=o);var s,l=Math.pow(10,-i),u=r/l;if(u<1.5?s=1:u<3?(s=2,u>2.25&&(null==o||i+1<=o)&&(s=2.5,++i)):s=u<7.5?5:10,s*=l,null!=a.minTickSize&&s<a.minTickSize&&(s=a.minTickSize),t.delta=r,t.tickDecimals=Math.max(0,null!=o?o:i),t.tickSize=a.tickSize||s,null!==a.tickDecimals&&void 0!==a.tickDecimals||(t.scaledDecimals=t.tickDecimals+i),"time"==a.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,n,a,r=[],i=(n=e.min,(a=e.tickSize)*Math.floor(n/a)),o=0,s=Number.NaN;do{t=s,s=i+o*e.tickSize,r.push(s),++o}while(s<e.max&&s!=t);return r},t.tickFormatter=function(e,t){var n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,a=""+Math.round(e*n)/n;if(null!=t.tickDecimals){var r=a.indexOf("."),i=-1==r?0:a.length-r-1;if(i<t.tickDecimals)return(i?a:a+".")+(""+n).substr(1,t.tickDecimals-i)}return a}),e.isFunction(a.tickFormatter)&&(t.tickFormatter=function(e,t){return""+a.tickFormatter(e,t)}),null!=a.alignTicksWithAxis){var d=("x"==t.direction?h:f)[a.alignTicksWithAxis-1];if(d&&d.used&&d!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==a.min&&(t.min=Math.min(t.min,p[0])),null==a.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,n,a=[];for(n=0;n<d.ticks.length;++n)t=(d.ticks[n].v-d.min)/(d.max-d.min),t=e.min+t*(e.max-e.min),a.push(t);return a},!t.mode&&null==a.tickDecimals){var m=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),b=t.tickGenerator(t);b.length>1&&/\..*0$/.test((b[1]-b[0]).toFixed(m))||(t.tickDecimals=m)}}}}function L(t){var n,a,r=t.options.ticks,i=[];for(null==r||"number"==typeof r&&r>0?i=t.tickGenerator(t):r&&(i=e.isFunction(r)?r(t):r),t.ticks=[],n=0;n<i.length;++n){var o=null,s=i[n];"object"==typeof s?(a=+s[0],s.length>1&&(o=s[1])):a=+s,null==o&&(o=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:o})}}function $(e,t){var n=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),n=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),n=!0)),n}function E(){c.clear(),O(g.drawBackground,[d]);var e=s.grid;e.show&&e.backgroundColor&&(d.save(),d.translate(m.left,m.top),d.fillStyle=K(s.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,b,v),d.restore()),e.show&&!e.aboveData&&Q();for(var t=0;t<o.length;++t)O(g.drawSeries,[d,o[t]]),A(o[t]);O(g.draw,[d]),e.show&&e.aboveData&&Q(),c.render(),B()}function N(e,t){for(var n,a,r,i,o=k(),s=0;s<o.length;++s)if((n=o[s]).direction==t&&(e[i=t+n.n+"axis"]||1!=n.n||(i=t+"axis"),e[i])){a=e[i].from,r=e[i].to;break}if(e[i]||(n="x"==t?h[0]:f[0],a=e[t+"1"],r=e[t+"2"]),null!=a&&null!=r&&a>r){var c=a;a=r,r=c}return{from:a,to:r,axis:n}}function Q(){var t,n,a,r;d.save(),d.translate(m.left,m.top);var i=s.grid.markings;if(i)for(e.isFunction(i)&&((n=x.getAxes()).xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)),t=0;t<i.length;++t){var o=i[t],c=N(o,"x"),l=N(o,"y");if(null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(c.to<c.axis.min||c.from>c.axis.max||l.to<l.axis.min||l.from>l.axis.max)){c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var u=c.from===c.to,p=l.from===l.to;if(!u||!p)if(c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),u||p){var h=o.lineWidth||s.grid.markingsLineWidth,f=h%2?.5:0;d.beginPath(),d.strokeStyle=o.color||s.grid.markingsColor,d.lineWidth=h,u?(d.moveTo(c.to+f,l.from),d.lineTo(c.to+f,l.to)):(d.moveTo(c.from,l.to+f),d.lineTo(c.to,l.to+f)),d.stroke()}else d.fillStyle=o.color||s.grid.markingsColor,d.fillRect(c.from,l.to,c.to-c.from,l.from-l.to)}}n=k(),a=s.grid.borderWidth;for(var g=0;g<n.length;++g){var O,y,j,T,_=n[g],w=_.box,S=_.tickLength;if(_.show&&0!=_.ticks.length){for(d.lineWidth=1,"x"==_.direction?(O=0,y="full"==S?"top"==_.position?0:v:w.top-m.top+("top"==_.position?w.height:0)):(y=0,O="full"==S?"left"==_.position?0:b:w.left-m.left+("left"==_.position?w.width:0)),_.innermost||(d.strokeStyle=_.options.color,d.beginPath(),j=T=0,"x"==_.direction?j=b+1:T=v+1,1==d.lineWidth&&("x"==_.direction?y=Math.floor(y)+.5:O=Math.floor(O)+.5),d.moveTo(O,y),d.lineTo(O+j,y+T),d.stroke()),d.strokeStyle=_.options.tickColor,d.beginPath(),t=0;t<_.ticks.length;++t){var C=_.ticks[t].v;j=T=0,isNaN(C)||C<_.min||C>_.max||"full"==S&&("object"==typeof a&&a[_.position]>0||a>0)&&(C==_.min||C==_.max)||("x"==_.direction?(O=_.p2c(C),T="full"==S?-v:S,"top"==_.position&&(T=-T)):(y=_.p2c(C),j="full"==S?-b:S,"left"==_.position&&(j=-j)),1==d.lineWidth&&("x"==_.direction?O=Math.floor(O)+.5:y=Math.floor(y)+.5),d.moveTo(O,y),d.lineTo(O+j,y+T))}d.stroke()}}a&&(r=s.grid.borderColor,"object"==typeof a||"object"==typeof r?("object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a}),"object"!==typeof r&&(r={top:r,right:r,bottom:r,left:r}),a.top>0&&(d.strokeStyle=r.top,d.lineWidth=a.top,d.beginPath(),d.moveTo(0-a.left,0-a.top/2),d.lineTo(b,0-a.top/2),d.stroke()),a.right>0&&(d.strokeStyle=r.right,d.lineWidth=a.right,d.beginPath(),d.moveTo(b+a.right/2,0-a.top),d.lineTo(b+a.right/2,v),d.stroke()),a.bottom>0&&(d.strokeStyle=r.bottom,d.lineWidth=a.bottom,d.beginPath(),d.moveTo(b+a.right,v+a.bottom/2),d.lineTo(0,v+a.bottom/2),d.stroke()),a.left>0&&(d.strokeStyle=r.left,d.lineWidth=a.left,d.beginPath(),d.moveTo(0-a.left/2,v+a.bottom),d.lineTo(0-a.left/2,0),d.stroke())):(d.lineWidth=a,d.strokeStyle=s.grid.borderColor,d.strokeRect(-a/2,-a/2,b+a,v+a))),d.restore()}function A(e){e.lines.show&&(function(e){function t(e,t,n,a,r){var i=e.points,o=e.pointsize,s=null,c=null;d.beginPath();for(var l=o;l<i.length;l+=o){var u=i[l-o],p=i[l-o+1],h=i[l],f=i[l+1];if(null!=u&&null!=h){if(p<=f&&p<r.min){if(f<r.min)continue;u=(r.min-p)/(f-p)*(h-u)+u,p=r.min}else if(f<=p&&f<r.min){if(p<r.min)continue;h=(r.min-p)/(f-p)*(h-u)+u,f=r.min}if(p>=f&&p>r.max){if(f>r.max)continue;u=(r.max-p)/(f-p)*(h-u)+u,p=r.max}else if(f>=p&&f>r.max){if(p>r.max)continue;h=(r.max-p)/(f-p)*(h-u)+u,f=r.max}if(u<=h&&u<a.min){if(h<a.min)continue;p=(a.min-u)/(h-u)*(f-p)+p,u=a.min}else if(h<=u&&h<a.min){if(u<a.min)continue;f=(a.min-u)/(h-u)*(f-p)+p,h=a.min}if(u>=h&&u>a.max){if(h>a.max)continue;p=(a.max-u)/(h-u)*(f-p)+p,u=a.max}else if(h>=u&&h>a.max){if(u>a.max)continue;f=(a.max-u)/(h-u)*(f-p)+p,h=a.max}u==s&&p==c||d.moveTo(a.p2c(u)+t,r.p2c(p)+n),s=h,c=f,d.lineTo(a.p2c(h)+t,r.p2c(f)+n)}}d.stroke()}function n(e,t,n){for(var a=e.points,r=e.pointsize,i=Math.min(Math.max(0,n.min),n.max),o=0,s=!1,c=1,l=0,u=0;!(r>0&&o>a.length+r);){var p=a[(o+=r)-r],h=a[o-r+c],f=a[o],m=a[o+c];if(s){if(r>0&&null!=p&&null==f){u=o,r=-r,c=2;continue}if(r<0&&o==l+r){d.fill(),s=!1,c=1,o=l=u+(r=-r);continue}}if(null!=p&&null!=f){if(p<=f&&p<t.min){if(f<t.min)continue;h=(t.min-p)/(f-p)*(m-h)+h,p=t.min}else if(f<=p&&f<t.min){if(p<t.min)continue;m=(t.min-p)/(f-p)*(m-h)+h,f=t.min}if(p>=f&&p>t.max){if(f>t.max)continue;h=(t.max-p)/(f-p)*(m-h)+h,p=t.max}else if(f>=p&&f>t.max){if(p>t.max)continue;m=(t.max-p)/(f-p)*(m-h)+h,f=t.max}if(s||(d.beginPath(),d.moveTo(t.p2c(p),n.p2c(i)),s=!0),h>=n.max&&m>=n.max)d.lineTo(t.p2c(p),n.p2c(n.max)),d.lineTo(t.p2c(f),n.p2c(n.max));else if(h<=n.min&&m<=n.min)d.lineTo(t.p2c(p),n.p2c(n.min)),d.lineTo(t.p2c(f),n.p2c(n.min));else{var b=p,v=f;h<=m&&h<n.min&&m>=n.min?(p=(n.min-h)/(m-h)*(f-p)+p,h=n.min):m<=h&&m<n.min&&h>=n.min&&(f=(n.min-h)/(m-h)*(f-p)+p,m=n.min),h>=m&&h>n.max&&m<=n.max?(p=(n.max-h)/(m-h)*(f-p)+p,h=n.max):m>=h&&m>n.max&&h<=n.max&&(f=(n.max-h)/(m-h)*(f-p)+p,m=n.max),p!=b&&d.lineTo(t.p2c(b),n.p2c(h)),d.lineTo(t.p2c(p),n.p2c(h)),d.lineTo(t.p2c(f),n.p2c(m)),f!=v&&(d.lineTo(t.p2c(f),n.p2c(m)),d.lineTo(t.p2c(v),n.p2c(m)))}}}}d.save(),d.translate(m.left,m.top),d.lineJoin="round";var a=e.lines.lineWidth,r=e.shadowSize;if(a>0&&r>0){d.lineWidth=r,d.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;t(e.datapoints,Math.sin(i)*(a/2+r/2),Math.cos(i)*(a/2+r/2),e.xaxis,e.yaxis),d.lineWidth=r/2,t(e.datapoints,Math.sin(i)*(a/2+r/4),Math.cos(i)*(a/2+r/4),e.xaxis,e.yaxis)}d.lineWidth=a,d.strokeStyle=e.color;var o=I(e.lines,e.color,0,v);o&&(d.fillStyle=o,n(e.datapoints,e.xaxis,e.yaxis));a>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);d.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],n=null,a=null,r=e.datapoints,i=[],o=0;o<r.pointsize-2;o++)i.push(0);for(var s=0;s<r.points.length;s+=r.pointsize){var c=r.points[s],l=r.points[s+1];a=s===r.points.length-r.pointsize?null:r.points[s+r.pointsize],null!==c&&null!==l&&null===n&&null===a&&(t.push(c),t.push(l),t.push.apply(t,i)),n=c}var u=r.points;r.points=t,e.points.radius=e.lines.lineWidth/2,D(e),r.points=u}(e)),e.bars.show&&function(e){function t(t,n,a,r,i,o){for(var s=t.points,c=t.pointsize,l=0;l<s.length;l+=c)null!=s[l]&&R(s[l],s[l+1],s[l+2],n,a,r,i,o,d,e.bars.horizontal,e.bars.lineWidth)}var n;switch(d.save(),d.translate(m.left,m.top),d.lineWidth=e.bars.lineWidth,d.strokeStyle=e.color,e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}var a=e.bars.fill?function(t,n){return I(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,a,e.xaxis,e.yaxis),d.restore()}(e),e.points.show&&D(e)}function D(e){function t(e,t,n,a,r,i,o,s){for(var c=e.points,l=e.pointsize,u=0;u<c.length;u+=l){var p=c[u],h=c[u+1];null==p||p<i.min||p>i.max||h<o.min||h>o.max||(d.beginPath(),p=i.p2c(p),h=o.p2c(h)+a,"circle"==s?d.arc(p,h,t,0,r?Math.PI:2*Math.PI,!1):s(d,p,h,t,r),d.closePath(),n&&(d.fillStyle=n,d.fill()),d.stroke())}}d.save(),d.translate(m.left,m.top);var n=e.points.lineWidth,a=e.shadowSize,r=e.points.radius,i=e.points.symbol;if(0==n&&(n=1e-4),n>0&&a>0){var o=a/2;d.lineWidth=o,d.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,o+o/2,!0,e.xaxis,e.yaxis,i),d.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,o/2,!0,e.xaxis,e.yaxis,i)}d.lineWidth=n,d.strokeStyle=e.color,t(e.datapoints,r,I(e.points,e.color),0,!1,e.xaxis,e.yaxis,i),d.restore()}function R(e,t,n,a,r,i,o,s,c,l,u){var d,p,h,f,m,b,v,g,x;l?(g=b=v=!0,m=!1,f=t+a,h=t+r,(p=e)<(d=n)&&(x=p,p=d,d=x,m=!0,b=!1)):(m=b=v=!0,g=!1,d=e+a,p=e+r,(f=t)<(h=n)&&(x=f,f=h,h=x,g=!0,v=!1)),p<o.min||d>o.max||f<s.min||h>s.max||(d<o.min&&(d=o.min,m=!1),p>o.max&&(p=o.max,b=!1),h<s.min&&(h=s.min,g=!1),f>s.max&&(f=s.max,v=!1),d=o.p2c(d),h=s.p2c(h),p=o.p2c(p),f=s.p2c(f),i&&(c.fillStyle=i(h,f),c.fillRect(d,f,p-d,h-f)),u>0&&(m||b||v||g)&&(c.beginPath(),c.moveTo(d,h),m?c.lineTo(d,f):c.moveTo(d,f),v?c.lineTo(p,f):c.moveTo(p,f),b?c.lineTo(p,h):c.moveTo(p,h),g?c.lineTo(d,h):c.moveTo(d,h),c.stroke()))}function I(t,n,a,r){var i=t.fill;if(!i)return null;if(t.fillColor)return K(t.fillColor,a,r,n);var o=e.color.parse(n);return o.a="number"==typeof i?i:.4,o.normalize(),o.toString()}x.setData=y,x.setupGrid=M,x.draw=E,x.getPlaceholder=function(){return t},x.getCanvas=function(){return c.element},x.getPlotOffset=function(){return m},x.width=function(){return b},x.height=function(){return v},x.offset=function(){var e=u.offset();return e.left+=m.left,e.top+=m.top,e},x.getData=function(){return o},x.getAxes=function(){var t={};return e.each(h.concat(f),(function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)})),t},x.getXAxes=function(){return h},x.getYAxes=function(){return f},x.c2p=T,x.p2c=function(e){var t,n,a,r={};for(t=0;t<h.length;++t)if((n=h[t])&&n.used&&(a="x"+n.n,null==e[a]&&1==n.n&&(a="x"),null!=e[a])){r.left=n.p2c(e[a]);break}for(t=0;t<f.length;++t)if((n=f[t])&&n.used&&(a="y"+n.n,null==e[a]&&1==n.n&&(a="y"),null!=e[a])){r.top=n.p2c(e[a]);break}return r},x.getOptions=function(){return s},x.highlight=U,x.unhighlight=Y,x.triggerRedrawOverlay=B,x.pointOffset=function(e){return{left:parseInt(h[j(e,"x")-1].p2c(+e.x)+m.left,10),top:parseInt(f[j(e,"y")-1].p2c(+e.y)+m.top,10)}},x.shutdown=w,x.destroy=function(){w(),t.removeData("plot").empty(),o=[],s=null,c=null,l=null,u=null,d=null,p=null,h=[],f=[],g=null,X=[],x=null},x.resize=function(){var e=t.width(),n=t.height();c.resize(e,n),l.resize(e,n)},x.hooks=g,function(){for(var t={Canvas:n},a=0;a<i.length;++a){var r=i[a];r.init(x,t),r.options&&e.extend(!0,s,r.options)}}(),function(n){e.extend(!0,s,n),n&&n.colors&&(s.colors=n.colors);null==s.xaxis.color&&(s.xaxis.color=e.color.parse(s.grid.color).scale("a",.22).toString());null==s.yaxis.color&&(s.yaxis.color=e.color.parse(s.grid.color).scale("a",.22).toString());null==s.xaxis.tickColor&&(s.xaxis.tickColor=s.grid.tickColor||s.xaxis.color);null==s.yaxis.tickColor&&(s.yaxis.tickColor=s.grid.tickColor||s.yaxis.color);null==s.grid.borderColor&&(s.grid.borderColor=s.grid.color);null==s.grid.tickColor&&(s.grid.tickColor=e.color.parse(s.grid.color).scale("a",.22).toString());var a,r,i,o=t.css("font-size"),c=o?+o.replace("px",""):13,l={style:t.css("font-style"),size:Math.round(.8*c),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(i=s.xaxes.length||1,a=0;a<i;++a)(r=s.xaxes[a])&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},s.xaxis,r),s.xaxes[a]=r,r.font&&(r.font=e.extend({},l,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));for(i=s.yaxes.length||1,a=0;a<i;++a)(r=s.yaxes[a])&&!r.tickColor&&(r.tickColor=r.color),r=e.extend(!0,{},s.yaxis,r),s.yaxes[a]=r,r.font&&(r.font=e.extend({},l,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(1.15*r.font.size)));s.xaxis.noTicks&&null==s.xaxis.ticks&&(s.xaxis.ticks=s.xaxis.noTicks);s.yaxis.noTicks&&null==s.yaxis.ticks&&(s.yaxis.ticks=s.yaxis.noTicks);s.x2axis&&(s.xaxes[1]=e.extend(!0,{},s.xaxis,s.x2axis),s.xaxes[1].position="top",null==s.x2axis.min&&(s.xaxes[1].min=null),null==s.x2axis.max&&(s.xaxes[1].max=null));s.y2axis&&(s.yaxes[1]=e.extend(!0,{},s.yaxis,s.y2axis),s.yaxes[1].position="right",null==s.y2axis.min&&(s.yaxes[1].min=null),null==s.y2axis.max&&(s.yaxes[1].max=null));s.grid.coloredAreas&&(s.grid.markings=s.grid.coloredAreas);s.grid.coloredAreasColor&&(s.grid.markingsColor=s.grid.coloredAreasColor);s.lines&&e.extend(!0,s.series.lines,s.lines);s.points&&e.extend(!0,s.series.points,s.points);s.bars&&e.extend(!0,s.series.bars,s.bars);null!=s.shadowSize&&(s.series.shadowSize=s.shadowSize);null!=s.highlightColor&&(s.series.highlightColor=s.highlightColor);for(a=0;a<s.xaxes.length;++a)_(h,a+1).options=s.xaxes[a];for(a=0;a<s.yaxes.length;++a)_(f,a+1).options=s.yaxes[a];for(var u in g)s.hooks[u]&&s.hooks[u].length&&(g[u]=g[u].concat(s.hooks[u]));O(g.processOptions,[s])}(r),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");c=new n("flot-base",t),l=new n("flot-overlay",t),d=c.context,p=l.context,u=e(l.element).unbind();var a=t.data("plot");a&&(a.shutdown(),l.clear());t.data("plot",x)}(),y(a),M(),E(),function(){s.grid.hoverable&&(u.mousemove(F),u.bind("mouseleave",V));s.grid.clickable&&u.click(z);O(g.bindEvents,[u])}();var X=[],q=null;function F(e){s.grid.hoverable&&W("plothover",e,(function(e){return 0!=e.hoverable}))}function V(e){s.grid.hoverable&&W("plothover",e,(function(){return!1}))}function z(e){x.isSelecting||W("plotclick",e,(function(e){return 0!=e.clickable}))}function W(e,n,a){var r=u.offset(),i=n.pageX-r.left-m.left,c=n.pageY-r.top-m.top,l=T({left:i,top:c});l.pageX=n.pageX,l.pageY=n.pageY,l.ctrlKey=n.ctrlKey,l.metaKey=n.metaKey;var d=function(e,t,n){var a,r,i,c=s.grid.mouseActiveRadius,l=c*c+1,u=null;for(a=o.length-1;a>=0;--a)if(n(o[a])){var d=o[a],p=d.xaxis,h=d.yaxis,f=d.datapoints.points,m=p.c2p(e),b=h.c2p(t),v=c/p.scale,g=c/h.scale;if(i=d.datapoints.pointsize,p.options.inverseTransform&&(v=Number.MAX_VALUE),h.options.inverseTransform&&(g=Number.MAX_VALUE),d.lines.show||d.points.show)for(r=0;r<f.length;r+=i){var x=f[r],O=f[r+1];if(null!=x&&!(x-m>v||x-m<-v||O-b>g||O-b<-g)){var y=Math.abs(p.p2c(x)-e),j=Math.abs(h.p2c(O)-t),k=y*y+j*j;k<l&&(l=k,u=[a,r/i])}}if(d.bars.show&&!u){var T,_;switch(d.bars.align){case"left":T=0;break;case"right":T=-d.bars.barWidth;break;default:T=-d.bars.barWidth/2}for(_=T+d.bars.barWidth,r=0;r<f.length;r+=i){x=f[r],O=f[r+1];var w=f[r+2];null!=x&&(o[a].bars.horizontal?m<=Math.max(w,x)&&m>=Math.min(w,x)&&b>=O+T&&b<=O+_:m>=x+T&&m<=x+_&&b>=Math.min(w,O)&&b<=Math.max(w,O))&&(u=[a,r/i])}}}return u?(a=u[0],r=u[1],i=o[a].datapoints.pointsize,{datapoint:o[a].datapoints.points.slice(r*i,(r+1)*i),dataIndex:r,series:o[a],seriesIndex:a}):null}(i,c,a);if(d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+r.left+m.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+r.top+m.top,10)),s.grid.autoHighlight){for(var p=0;p<X.length;++p){var h=X[p];h.auto!=e||d&&h.series==d.series&&h.point[0]==d.datapoint[0]&&h.point[1]==d.datapoint[1]||Y(h.series,h.point)}d&&U(d.series,d.datapoint,e)}t.trigger(e,[l,d])}function B(){var e=s.interaction.redrawOverlayInterval;-1!=e?q||(q=setTimeout(H,e)):H()}function H(){var e,t;for(q=null,p.save(),l.clear(),p.translate(m.left,m.top),e=0;e<X.length;++e)(t=X[e]).series.bars.show?J(t.series,t.point):Z(t.series,t.point);p.restore(),O(g.drawOverlay,[p])}function U(e,t,n){if("number"==typeof e&&(e=o[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var r=G(e,t);-1==r?(X.push({series:e,point:t,auto:n}),B()):n||(X[r].auto=!1)}function Y(e,t){if(null==e&&null==t)return X=[],void B();if("number"==typeof e&&(e=o[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var a=G(e,t);-1!=a&&(X.splice(a,1),B())}function G(e,t){for(var n=0;n<X.length;++n){var a=X[n];if(a.series==e&&a.point[0]==t[0]&&a.point[1]==t[1])return n}return-1}function Z(t,n){var a=n[0],r=n[1],i=t.xaxis,o=t.yaxis,s="string"===typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(a<i.min||a>i.max||r<o.min||r>o.max)){var c=t.points.radius+t.points.lineWidth/2;p.lineWidth=c,p.strokeStyle=s;var l=1.5*c;a=i.p2c(a),r=o.p2c(r),p.beginPath(),"circle"==t.points.symbol?p.arc(a,r,l,0,2*Math.PI,!1):t.points.symbol(p,a,r,l,!1),p.closePath(),p.stroke()}}function J(t,n){var a,r="string"===typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),i=r;switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=r,R(n[0],n[1],n[2]||0,a,a+t.bars.barWidth,(function(){return i}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function K(t,n,a,r){if("string"==typeof t)return t;for(var i=d.createLinearGradient(0,a,0,n),o=0,s=t.colors.length;o<s;++o){var c=t.colors[o];if("string"!=typeof c){var l=e.color.parse(r);null!=c.brightness&&(l=l.scale("rgb",c.brightness)),null!=c.opacity&&(l.a*=c.opacity),c=l.toString()}i.addColorStop(o/(s-1),c)}return i}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),n.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var n=this.element,a=this.context,r=this.pixelRatio;this.width!=e&&(n.width=e*r,n.style.width=e+"px",this.width=e),this.height!=t&&(n.height=t*r,n.style.height=t+"px",this.height=t),a.restore(),a.save(),a.scale(r,r)},n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.render=function(){var e=this._textCache;for(var n in e)if(t.call(e,n)){var a=this.getTextLayer(n),r=e[n];for(var i in a.hide(),r)if(t.call(r,i)){var o=r[i];for(var s in o)if(t.call(o,s)){for(var c,l=o[s].positions,u=0;c=l[u];u++)c.active?c.rendered||(a.append(c.element),c.rendered=!0):(l.splice(u--,1),c.rendered&&c.element.detach());0==l.length&&delete o[s]}}a.show()}},n.prototype.getTextLayer=function(t){var n=this.text[t];return null==n&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},n.prototype.getTextInfo=function(t,n,a,r,i){var o,s,c,l;if(n=""+n,o="object"===typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px/"+a.lineHeight+"px "+a.family:a,null==(s=this._textCache[t])&&(s=this._textCache[t]={}),null==(c=s[o])&&(c=s[o]={}),null==(l=c[n])){var u=e("<div></div>").html(n).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(t));"object"===typeof a?u.css({font:o,color:a.color}):"string"===typeof a&&u.addClass(a),l=c[n]={element:u,positions:[]};var d=this._textSizeCache[n];d?(l.width=d.width,l.height=d.height):(l.width=u.outerWidth(!0),l.height=u.outerHeight(!0),this._textSizeCache[n]={width:l.width,height:l.height}),u.detach()}return l},n.prototype.addText=function(e,t,n,a,r,i,o,s,c){var l=this.getTextInfo(e,a,r,i,o),u=l.positions;"center"==s?t-=l.width/2:"right"==s&&(t-=l.width),"middle"==c?n-=l.height/2:"bottom"==c&&(n-=l.height);for(var d,p=0;d=u[p];p++)if(d.x==t&&d.y==n)return void(d.active=!0);d={active:!0,rendered:!1,element:u.length?l.element.clone():l.element,x:t,y:n},u.push(d),d.element.css({top:Math.round(n),left:Math.round(t),"text-align":s})},n.prototype.removeText=function(e,n,a,r,i,o){if(null==r){var s=this._textCache[e];if(null!=s)for(var c in s)if(t.call(s,c)){var l=s[c];for(var u in l)if(t.call(l,u))for(var d=l[u].positions,p=0;h=d[p];p++)h.active=!1}}else{var h;for(d=this.getTextInfo(e,r,i,o).positions,p=0;h=d[p];p++)h.x==n&&h.y==a&&(h.active=!1)}},e.plot=function(t,n,r){return new a(e(t),n,r,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,n){return this.each((function(){e.plot(this,t,n)}))}}(window.jQuery)},284:function(e,t){window.jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,n){if(null!=t.stack&&!1!==t.stack){var a=function(e,t){for(var n=null,a=0;a<t.length&&e!=t[a];++a)t[a].stack==e.stack&&(n=t[a]);return n}(t,e.getData());if(a){for(var r,i,o,s,c,l,u,d,p=n.pointsize,h=n.points,f=a.datapoints.pointsize,m=a.datapoints.points,b=[],v=t.lines.show,g=t.bars.horizontal,x=p>2&&(g?n.format[2].x:n.format[2].y),O=v&&t.lines.steps,y=g?1:0,j=g?0:1,k=0,T=0;!(k>=h.length&&T>=m.length);){if(u=b.length,k<h.length&&null==h[k]){for(d=0;d<p;++d)b.push(m[k+d]);x&&(b[u+2]=m[k+j]),k+=p}else if(k>=h.length)T+=f;else if(T>=m.length){for(d=0;d<p;++d)b.push(h[k+d]);k+=p}else if(T<m.length&&null==m[T])T+=f;else{if(r=h[k+y],i=h[k+j],s=m[T+y],c=m[T+j],l=0,r==s){for(d=0;d<p;++d)b.push(h[k+d]);b[u+j]+=c,l=c,k+=p,T+=f}else if(r>s){if(0==k){for(d=0;d<p;++d)b.push(m[T+d]);l=c}if(k>0&&null!=h[k-p]){for(o=i+(h[k-p+j]-i)*(s-r)/(h[k-p+y]-r),b.push(s),b.push(o+c),d=2;d<p;++d)b.push(h[k+d]);l=c}T+=f}else{for(d=0;d<p;++d)b.push(h[k+d]);T>0&&null!=m[T-f]&&(l=c+(m[T-f+j]-c)*(r-s)/(m[T-f+y]-s)),b[u+j]+=l,k+=p}u!=b.length&&x&&(b[u+2]=l)}if(O&&u!=b.length&&u>0&&null!=b[u]&&b[u]!=b[u-p]&&b[u+1]!=b[u-p+1]){for(d=0;d<p;++d)b[u+p+d]=b[u+d];b[u+1]=b[u-p+1]}}n.points=b}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},285:function(e,t){!function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,a){if("function"==typeof e.strftime)return e.strftime(t);var r,i=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},o=[],s=!1,c=e.getHours(),l=c<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==a&&(a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),r=c>12?c-12:0==c?12:c;for(var u=0;u<t.length;++u){var d=t.charAt(u);if(s){switch(d){case"a":d=""+a[e.getDay()];break;case"b":d=""+n[e.getMonth()];break;case"d":d=i(e.getDate(),"");break;case"e":d=i(e.getDate()," ");break;case"h":case"H":d=i(c);break;case"I":d=i(r);break;case"l":d=i(r," ");break;case"m":d=i(e.getMonth()+1,"");break;case"M":d=i(e.getMinutes());break;case"q":d=""+(Math.floor(e.getMonth()/3)+1);break;case"S":d=i(e.getSeconds());break;case"y":d=i(e.getFullYear()%100);break;case"Y":d=""+e.getFullYear();break;case"p":d=l?"am":"pm";break;case"P":d=l?"AM":"PM";break;case"w":d=""+e.getDay()}o.push(d),s=!1}else"%"==d?s=!0:o.push(d)}return o.join("")}function a(e){function t(e,t,n,a){e[t]=function(){return n[a].apply(n,arguments)}}var n={date:e};void 0!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var a=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],r=0;r<a.length;r++)t(n,"get"+a[r],e,"getUTC"+a[r]),t(n,"set"+a[r],e,"setUTC"+a[r]);return n}function r(e,t){return"browser"==t.timezone?new Date(e):(t.timezone&&t.timezone,a(new Date(e)))}var i={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],s=o.concat([[3,"month"],[6,"month"],[1,"year"]]),c=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(a){e.each(a.getAxes(),(function(e,a){var o=a.options;"time"==o.mode&&(a.tickGenerator=function(e){var n=[],a=r(e.min,o),l=0,u=o.tickSize&&"quarter"===o.tickSize[1]||o.minTickSize&&"quarter"===o.minTickSize[1]?c:s;null!=o.minTickSize&&(l="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*i[o.minTickSize[1]]);for(var d=0;d<u.length-1&&!(e.delta<(u[d][0]*i[u[d][1]]+u[d+1][0]*i[u[d+1][1]])/2&&u[d][0]*i[u[d][1]]>=l);++d);var p=u[d][0],h=u[d][1];if("year"==h){if(null!=o.minTickSize&&"year"==o.minTickSize[1])p=Math.floor(o.minTickSize[0]);else{var f=Math.pow(10,Math.floor(Math.log(e.delta/i.year)/Math.LN10)),m=e.delta/i.year/f;p=m<1.5?1:m<3?2:m<7.5?5:10,p*=f}p<1&&(p=1)}e.tickSize=o.tickSize||[p,h];var b=e.tickSize[0];h=e.tickSize[1];var v=b*i[h];"second"==h?a.setSeconds(t(a.getSeconds(),b)):"minute"==h?a.setMinutes(t(a.getMinutes(),b)):"hour"==h?a.setHours(t(a.getHours(),b)):"month"==h?a.setMonth(t(a.getMonth(),b)):"quarter"==h?a.setMonth(3*t(a.getMonth()/3,b)):"year"==h&&a.setFullYear(t(a.getFullYear(),b)),a.setMilliseconds(0),v>=i.minute&&a.setSeconds(0),v>=i.hour&&a.setMinutes(0),v>=i.day&&a.setHours(0),v>=4*i.day&&a.setDate(1),v>=2*i.month&&a.setMonth(t(a.getMonth(),3)),v>=2*i.quarter&&a.setMonth(t(a.getMonth(),6)),v>=i.year&&a.setMonth(0);var g,x=0,O=Number.NaN;do{if(g=O,O=a.getTime(),n.push(O),"month"==h||"quarter"==h)if(b<1){a.setDate(1);var y=a.getTime();a.setMonth(a.getMonth()+("quarter"==h?3:1));var j=a.getTime();a.setTime(O+x*i.hour+(j-y)*b),x=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+b*("quarter"==h?3:1));else"year"==h?a.setFullYear(a.getFullYear()+b):a.setTime(O+v)}while(O<e.max&&O!=g);return n},a.tickFormatter=function(e,t){var a=r(e,t.options);if(null!=o.timeformat)return n(a,o.timeformat,o.monthNames,o.dayNames);var s=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],c=t.tickSize[0]*i[t.tickSize[1]],l=t.max-t.min,u=o.twelveHourClock?" %p":"",d=o.twelveHourClock?"%I":"%H";return n(a,c<i.minute?d+":%M:%S"+u:c<i.day?l<2*i.day?d+":%M"+u:"%b %d "+d+":%M"+u:c<i.month?"%b %d":s&&c<i.quarter||!s&&c<i.year?l<i.year?"%b":"%b %Y":s&&c<i.year?l<i.year?"Q%q":"Q%q %Y":"%Y",o.monthNames,o.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=n}(window.jQuery)},286:function(e,t){window.jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function n(){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function a(n){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var a=e.offset();t.x=Math.max(0,Math.min(n.pageX-a.left,e.width())),t.y=Math.max(0,Math.min(n.pageY-a.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(n){if(n){var a=e.p2c(n);t.x=Math.max(0,Math.min(a.left,e.width())),t.y=Math.max(0,Math.min(a.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(n){n&&e.setCrosshair(n),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(n),t.mousemove(a))})),e.hooks.drawOverlay.push((function(e,n){var a=e.getOptions().crosshair;if(a.mode){var r=e.getPlotOffset();if(n.save(),n.translate(r.left,r.top),-1!=t.x){var i=e.getOptions().crosshair.lineWidth%2?.5:0;if(n.strokeStyle=a.color,n.lineWidth=a.lineWidth,n.lineJoin="round",n.beginPath(),-1!=a.mode.indexOf("x")){var o=Math.floor(t.x)+i;n.moveTo(o,0),n.lineTo(o,e.height())}if(-1!=a.mode.indexOf("y")){var s=Math.floor(t.y)+i;n.moveTo(0,s),n.lineTo(e.width(),s)}n.stroke()}n.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",n),t.unbind("mousemove",a)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},287:function(e,t){var n;(n=window.jQuery).plot.plugins.push({init:function(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},r=null;function i(n){t.active&&(p(n),e.getPlaceholder().trigger("plotselecting",[c()]))}function o(e){1==e.which&&(document.body.focus(),void 0!==document.onselectstart&&null==a.onselectstart&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==a.ondrag&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),d(t.first,e),t.active=!0,r=function(e){s(e)},n(document).one("mouseup",r))}function s(n){return r=null,void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart),void 0!==document.ondrag&&(document.ondrag=a.ondrag),t.active=!1,p(n),m()?l(n):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout((function(){e.isSelecting=!1}),10),!1}function c(){if(!m())return null;if(!t.show)return null;var a={},r=t.first,i=t.second,o=e.getAxes();return n.each(o,(function(e,t){t.used})),n.each(o,(function(e,t){t.used;var n=t.c2p(r[t.direction]),o=t.c2p(i[t.direction]);a[e]={from:Math.min(n,o),to:Math.max(n,o)}})),a}function l(t){var n=c();n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,e.getPlaceholder().trigger("plotselected",[n]),n.xaxis&&n.yaxis&&e.getPlaceholder().trigger("selected",[{x1:n.xaxis.from,y1:n.yaxis.from,x2:n.xaxis.to,y2:n.yaxis.to}])}function u(e,t,n){return t<e?e:t>n?n:t}function d(n,a){var r=e.getOptions(),i=e.getPlaceholder().offset(),o=e.getPlotOffset();n.x=u(0,a.pageX-i.left-o.left,e.width()),n.y=u(0,a.pageY-i.top-o.top,e.height()),"y"==r.selection.mode&&(n.x=n==t.first?0:e.width()),"x"==r.selection.mode&&(n.y=n==t.first?0:e.height())}function p(n){null!=n.pageX&&(d(t.second,n),m()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):h(!0))}function h(n){t.show&&(t.show=!1,e.triggerRedrawOverlay(),n||e.getPlaceholder().trigger("plotunselected",[]))}function f(t,n){var a,r,i,o,s=e.getAxes();for(var c in s)if((a=s[c]).direction==n&&(t[o=n+a.n+"axis"]||1!=a.n||(o=n+"axis"),t[o])){r=t[o].from,i=t[o].to;break}if(t[o]||(a="x"==n?e.getXAxes()[0]:e.getYAxes()[0],r=t[n+"1"],i=t[n+"2"]),null!=r&&null!=i&&r>i){var l=r;r=i,i=l}return{from:r,to:i,axis:a}}function m(){var n=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=n&&Math.abs(t.second.y-t.first.y)>=n}e.clearSelection=h,e.setSelection=function(n,a){var r,i=e.getOptions();"y"==i.selection.mode?(t.first.x=0,t.second.x=e.width()):(r=f(n,"x"),t.first.x=r.axis.p2c(r.from),t.second.x=r.axis.p2c(r.to)),"x"==i.selection.mode?(t.first.y=0,t.second.y=e.height()):(r=f(n,"y"),t.first.y=r.axis.p2c(r.from),t.second.y=r.axis.p2c(r.to)),t.show=!0,e.triggerRedrawOverlay(),!a&&m()&&l()},e.getSelection=c,e.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(i),t.mousedown(o))})),e.hooks.drawOverlay.push((function(e,a){if(t.show&&m()){var r=e.getPlotOffset(),i=e.getOptions();a.save(),a.translate(r.left,r.top);var o=n.color.parse(i.selection.color);a.strokeStyle=o.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=i.selection.shape,a.fillStyle=o.scale("a",.4).toString();var s=Math.min(t.first.x,t.second.x)+.5,c=Math.min(t.first.y,t.second.y)+.5,l=Math.abs(t.second.x-t.first.x)-1,u=Math.abs(t.second.y-t.first.y)-1;a.fillRect(s,c,l,u),a.strokeRect(s,c,l,u),a.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mousemove",i),t.unbind("mousedown",o),r&&(n(document).unbind("mouseup",r),void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart),void 0!==document.ondrag&&(document.ondrag=a.ondrag))}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a);window.jQuery=r.a,window.moment=n(63);var i=n(5),o=n.n(i),s=n(49),c=n.n(s),l=n(13),u=n(50),d=n(299),p=n(300),h=n(301),f=n(302),m=n(303),b=n(304),v=n(324),g=n(325),x=n(305),O=n(306),y=o.a.createContext("");function j(){return o.a.useContext(y)}var k,T,_=n(297),w=n(298),S=n(168),C=n(29),M=n(25),P=o.a.createContext({theme:"light",userPreference:"auto",setTheme:function(e){}}),L=function(){return o.a.useContext(P)},$=n(0),E=function(){var e=L().theme;return Object(i.useEffect)((function(){document.body.classList.toggle("bootstrap-dark","dark"===e),document.body.classList.toggle("bootstrap","light"===e)}),[e]),null},N=function(){var e=L(),t=e.userPreference,n=e.setTheme;return Object($.jsx)(_.a,{className:"ml-auto",inline:!0,children:Object($.jsxs)(w.a,{size:"sm",children:[Object($.jsx)(S.a,{color:"secondary",title:"Use light theme",active:"light"===t,onClick:function(){return n("light")},children:Object($.jsx)(C.a,{icon:M.s,className:"light"===t?"text-white":"text-dark"})}),Object($.jsx)(S.a,{color:"secondary",title:"Use dark theme",active:"dark"===t,onClick:function(){return n("dark")},children:Object($.jsx)(C.a,{icon:M.l,className:"dark"===t?"text-white":"text-dark"})}),Object($.jsx)(S.a,{color:"secondary",title:"Use browser-preferred theme",active:"auto"===t,onClick:function(){return n("auto")},children:Object($.jsx)(C.a,{icon:M.a,className:"auto"===t?"text-white":"text-dark"})})]})})},Q=function(e){var t=e.consolesLink,n=Object(i.useState)(!1),a=Object(l.a)(n,2),r=a[0],o=a[1];j();return Object($.jsxs)(d.a,{className:"mb-3",dark:!0,color:"dark",expand:"md",fixed:"top",children:[Object($.jsx)(p.a,{onClick:function(){return o(!r)},className:"mr-2"}),Object($.jsx)(u.b,{className:"pt-0 navbar-brand",to:"/graph",children:"Prometheus"}),Object($.jsx)(h.a,{isOpen:r,navbar:!0,style:{justifyContent:"space-between"},children:Object($.jsxs)(f.a,{className:"ml-0",navbar:!0,children:[null!==t&&Object($.jsx)(m.a,{children:Object($.jsx)(b.a,{href:t,children:"Consoles"})}),Object($.jsxs)(v.a,{nav:!0,inNavbar:!0,children:[Object($.jsx)(g.a,{nav:!0,caret:!0,children:"Status"}),Object($.jsxs)(x.a,{children:[Object($.jsx)(O.a,{tag:u.b,to:"/config",children:"Configuration"}),Object($.jsx)(O.a,{tag:u.b,to:"/targets",children:"Targets"}),Object($.jsx)(O.a,{tag:u.b,to:"/service-discovery",children:"Service Discovery"})]})]}),Object($.jsx)(m.a,{children:Object($.jsx)(b.a,{href:"https://prometheus.io/docs/prometheus/latest/getting_started/",children:"Help"})})]})}),Object($.jsx)(N,{})]})},A=n(322),D=n(34),R=n(18),I=n(53),X=n.n(I),q=n(81),F="api/v1",V=function(e,t){var n=Object(i.useState)({status:"start fetching"}),a=Object(l.a)(n,2),r=a[0],o=a[1],s=Object(i.useState)(),c=Object(l.a)(s,2),u=c[0],d=c[1],p=Object(i.useState)(!0),h=Object(l.a)(p,2),f=h[0],m=h[1];return Object(i.useEffect)((function(){var n=function(){var n=Object(q.a)(X.a.mark((function n(){var a,r,i;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m(!0),n.prev=1,n.next=4,fetch(e,Object(R.a)({cache:"no-store",credentials:"same-origin"},t));case 4:if((a=n.sent).ok){n.next=7;break}throw new Error(a.statusText);case 7:return n.next=9,a.json();case 9:r=n.sent,o(r),m(!1),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),i=n.t0,d(i);case 18:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(){return n.apply(this,arguments)}}();n()}),[e,t]),{response:r,error:u,isLoading:f}},z=!1,W=n(75),B=n(307),H=["error","isLoading","customErrorMsg","componentTitle"],U=function(e){return function(t){var n=t.error,a=t.isLoading,r=t.customErrorMsg,i=t.componentTitle,o=Object(W.a)(t,H);return n?Object($.jsx)(B.a,{color:"danger",children:r||Object($.jsxs)($.Fragment,{children:[Object($.jsx)("strong",{children:"Error:"})," Error fetching ",i||e.displayName,": ",n.message]})}):a?Object($.jsx)(C.a,{size:"3x",icon:M.r,spin:!0,className:"position-absolute",style:{transform:"translate(-50%, -50%)",top:"50%",left:"50%"}}):Object($.jsx)(e,Object(R.a)({},o))}},Y=n(16),G=n(318),Z=n(313),J=n(20),K=n(47),ee=n.n(K),te=n(2),ne=n(4),ae=n(12),re=n(11),ie=n(314),oe=n(315),se=n(316),ce=n(317),le=n(310),ue=n(311),de=n(173),pe=n(312),he=n(186),fe=n(82),me=n.n(fe),be=n(326),ve=n(308),ge=n(309),xe=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(te.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMetricClick=function(t){e.props.insertAtCursor(t),e.props.updateShow(!1)},e.toggle=function(){e.props.updateShow(!e.props.show)},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this;return Object($.jsxs)(be.a,{isOpen:this.props.show,toggle:this.toggle,className:"metrics-explorer",children:[Object($.jsx)(ve.a,{toggle:this.toggle,children:"Metrics Explorer"}),Object($.jsx)(ge.a,{children:this.props.metrics.map((function(t){return Object($.jsx)("p",{className:"metric",onClick:e.handleMetricClick.bind(e,t),children:t},t)}))})]})}}]),n}(i.Component),Oe=xe,ye=n(89),je=new ye.Fuzzy({pre:"<strong>",post:"</strong>",shouldSort:!0}),ke=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(e){var a;return Object(te.a)(this,n),(a=t.call(this,e)).exprInputRef=o.a.createRef(),a.setHeight=function(){if(a.exprInputRef.current){var e=a.exprInputRef.current,t=e.offsetHeight,n=e.clientHeight,r=e.scrollHeight,i=t-n;a.setState({height:r+i})}},a.handleInput=function(){a.exprInputRef.current&&a.setValue(a.exprInputRef.current.value)},a.setValue=function(e){(0,a.props.onExpressionChange)(e),a.setState({height:"auto"},a.setHeight)},a.handleKeyPress=function(e){var t=a.props.executeQuery;"Enter"!==e.key||e.shiftKey||(t(),e.preventDefault())},a.getSearchMatches=function(e,t){return je.filter(e.replace(/ /g,""),t)},a.createAutocompleteSection=function(e){var t=e.inputValue,n=void 0===t?"":t,r=e.closeMenu,i=e.highlightedIndex,o={"Query History":a.props.queryHistory,"Metric Names":a.props.metricNames},s=0,c=(null===n||void 0===n?void 0:n.length)&&a.props.enableAutocomplete?Object.entries(o).reduce((function(t,r){var o=Object(l.a)(r,2),c=o[0],u=o[1],d=a.getSearchMatches(n,u);return d.length?[].concat(Object(J.a)(t),[Object($.jsxs)("ul",{className:"autosuggest-dropdown-list",children:[Object($.jsx)("li",{className:"autosuggest-dropdown-header",children:c}),d.slice(0,100).map((function(t){var n=e.getItemProps({key:t.original,index:s,item:t.original,style:{backgroundColor:i===s++?"lightgray":"white"}});return Object($.jsx)("li",Object(R.a)(Object(R.a)({},n),{},{dangerouslySetInnerHTML:{__html:me()(t.rendered,{allowedTags:["strong"]})}}),c)}))]},c)]):t}),[]):[];return c.length?Object($.jsx)("div",Object(R.a)(Object(R.a)({},e.getMenuProps()),{},{className:"autosuggest-dropdown",children:c})):(setTimeout(r),null)},a.openMetricsExplorer=function(){a.setState({showMetricsExplorer:!0})},a.updateShowMetricsExplorer=function(e){a.setState({showMetricsExplorer:e})},a.insertAtCursor=function(e){if(a.exprInputRef.current){var t,n=a.exprInputRef.current.selectionStart,r=a.exprInputRef.current.selectionEnd,i=a.exprInputRef.current.value;t=n&&r?i.substring(0,n)+e+i.substring(r,i.length):i+e,a.setValue(t)}},a.state={height:"auto",showMetricsExplorer:!1},a}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){this.setHeight()}},{key:"componentDidUpdate",value:function(e){var t=this.props.value;t!==e.value&&this.setValue(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.executeQuery,a=t.value,r=this.state.height;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(he.a,{onSelect:this.setValue,children:function(t){return Object($.jsxs)("div",{children:[Object($.jsxs)(le.a,{className:"expression-input",children:[Object($.jsx)(ue.a,{addonType:"prepend",children:Object($.jsx)(de.a,{children:e.props.loading?Object($.jsx)(C.a,{icon:M.r,spin:!0}):Object($.jsx)(C.a,{icon:M.n})})}),Object($.jsx)(pe.a,Object(R.a)(Object(R.a)({onInput:e.handleInput,style:{height:r},autoFocus:!0,type:"textarea",rows:"1",onKeyPress:e.handleKeyPress,placeholder:"Expression (press Shift+Enter for newlines)",innerRef:e.exprInputRef},t.getInputProps({onKeyDown:function(n){switch(n.key){case"Home":case"End":n.nativeEvent.preventDownshiftDefault=!0;break;case"ArrowUp":case"ArrowDown":t.isOpen||(n.nativeEvent.preventDownshiftDefault=!0);break;case"Enter":t.closeMenu();break;case"Escape":!t.isOpen&&e.exprInputRef.current&&e.exprInputRef.current.blur()}}})),{},{value:a})),Object($.jsx)(ue.a,{addonType:"append",children:Object($.jsx)(S.a,{className:"metrics-explorer-btn",title:"Open metrics explorer",onClick:e.openMetricsExplorer,children:Object($.jsx)(C.a,{icon:M.j})})}),Object($.jsx)(ue.a,{addonType:"append",children:Object($.jsx)(S.a,{className:"execute-btn",color:"primary",onClick:n,children:"Execute"})})]}),t.isOpen&&e.createAutocompleteSection(t)]})}}),Object($.jsx)(Oe,{show:this.state.showMetricsExplorer,updateShow:this.updateShowMetricsExplorer,metrics:this.props.metricNames,insertAtCursor:this.insertAtCursor})]})}}]),n}(i.Component),Te=n(10),_e=n(6),we=n(27),Se=n(119),Ce=n(122),Me=n(59),Pe=n(120),Le=n(176),$e=n(177),Ee=n(178),Ne=n(121),Qe=n(43),Ae=Te.c.theme({"&":{"&.cm-focused":{outline:"none",outline_fallback:"none"}},".cm-scroller":{overflow:"hidden",fontFamily:'"DejaVu Sans Mono", monospace'},".cm-placeholder":{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"'},".cm-matchingBracket":{color:"#000",backgroundColor:"#dedede",fontWeight:"bold",outline:"1px dashed transparent"},".cm-nonmatchingBracket":{borderColor:"red"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"350px",fontFamily:'"DejaVu Sans Mono", monospace',maxWidth:"unset"},"& > ul > li":{padding:"2px 1em 2px 3px"},minWidth:"30%"},".cm-completionDetail":{float:"right",color:"#999"},".cm-tooltip.cm-completionInfo":{marginTop:"-11px",padding:"10px",fontFamily:"'Open Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;",border:"none",minWidth:"250px",maxWidth:"min-content"},".cm-completionInfo.cm-completionInfo-right":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",left:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginLeft:"12px"},".cm-completionInfo.cm-completionInfo-left":{"&:before":{content:"' '",height:"0",position:"absolute",width:"0",right:"-20px",borderWidth:"10px",borderStyle:"solid",borderColor:"transparent"},marginRight:"12px"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold",color:"#0066bf"},".cm-selectionMatch":{backgroundColor:"#e6f3ff"},".cm-diagnostic":{"&.cm-diagnostic-error":{borderLeft:"3px solid #e65013"}},".cm-completionIcon":{boxSizing:"content-box",fontSize:"16px",lineHeight:"1",marginRight:"10px",verticalAlign:"top","&:after":{content:"'\\ea88'"},fontFamily:"codicon",paddingRight:"0",opacity:"1",color:"#007acc"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\ea8c'"},color:"#652d90"},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\eb5f'"},color:"#007acc"},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\eb62'"},color:"#616161"},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'\\ea95'"},color:"#ee9d28"}}),De=Te.c.theme({".cm-tooltip":{backgroundColor:"#f8f8f8",borderColor:"rgba(52, 79, 113, 0.2)"},".cm-tooltip.cm-tooltip-autocomplete":{"& li:hover":{backgroundColor:"#ddd"},"& > ul > li[aria-selected]":{backgroundColor:"#d6ebff",color:"unset"}},".cm-tooltip.cm-completionInfo":{backgroundColor:"#d6ebff"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#d6ebff"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#d6ebff"}},".cm-line":{"&::selection":{backgroundColor:"#add6ff"},"& > span::selection":{backgroundColor:"#add6ff"}}},{dark:!1}),Re=Te.c.theme({".cm-content":{caretColor:"#fff"},".cm-tooltip.cm-completionInfo":{backgroundColor:"#333338"},".cm-tooltip > .cm-completionInfo.cm-completionInfo-right":{"&:before":{borderRightColor:"#333338"}},".cm-tooltip > .cm-completionInfo.cm-completionInfo-left":{"&:before":{borderLeftColor:"#333338"}},".cm-line":{"&::selection":{backgroundColor:"#767676"},"& > span::selection":{backgroundColor:"#767676"}}},{dark:!0}),Ie=Qe.a.define([{tag:Qe.b.name,color:"#000"},{tag:Qe.b.number,color:"#09885a"},{tag:Qe.b.string,color:"#a31515"},{tag:Qe.b.keyword,color:"#008080"},{tag:Qe.b.function(Qe.b.variableName),color:"#008080"},{tag:Qe.b.labelName,color:"#800000"},{tag:Qe.b.operator},{tag:Qe.b.modifier,color:"#008080"},{tag:Qe.b.paren},{tag:Qe.b.squareBracket},{tag:Qe.b.brace},{tag:Qe.b.invalid,color:"red"},{tag:Qe.b.comment,color:"#888",fontStyle:"italic"}]),Xe=n(174),qe=28,Fe=38,Ve=122,ze=125,We=127,Be=128,He=131,Ue=134,Ye=135,Ge=137,Ze={inf:145,nan:146,bool:1,ignoring:2,on:3,group_left:4,group_right:5,offset:6},Je={avg:7,bottomk:8,count:9,count_values:10,group:11,max:12,min:13,quantile:14,stddev:15,stdvar:16,sum:17,topk:18,by:19,without:20,and:21,or:22,unless:23,start:24,end:25},Ke={__proto__:null,absent_over_time:305,absent:307,abs:309,acos:311,acosh:313,asin:315,asinh:317,atan:319,atanh:321,avg_over_time:323,ceil:325,changes:327,clamp:329,clamp_max:331,clamp_min:333,cos:335,cosh:337,count_over_time:339,days_in_month:341,day_of_month:343,day_of_week:345,deg:347,delta:349,deriv:351,exp:353,floor:355,histogram_quantile:357,holt_winters:359,hour:361,idelta:363,increase:365,irate:367,label_replace:369,label_join:371,last_over_time:373,ln:375,log10:377,log2:379,max_over_time:381,min_over_time:383,minute:385,month:387,pi:389,predict_linear:391,present_over_time:393,quantile_over_time:395,rad:397,rate:399,resets:401,round:403,scalar:405,sgn:407,sin:409,sinh:411,sort:413,sort_desc:415,sqrt:417,stddev_over_time:419,stdvar_over_time:421,sum_over_time:423,tan:425,tanh:427,timestamp:429,time:431,vector:433,year:435},et=Xe.a.deserialize({version:13,states:"6[OYQPOOO&{QPOOOOQO'#Cz'#CzO'QQPO'#CyQ']QQOOOOQO'#Dd'#DdO'WQPO'#DcOOQO'#E|'#E|O(gQPO'#FSOYQPO'#FOOYQPO'#FROOQO'#FU'#FUO.cQSO'#FVO.kQQO'#FTOOQO'#FT'#FTOOQO'#Cx'#CxOOQO'#De'#DeOOQO'#Dg'#DgOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyQOQPOOO0RQPO'#C{O0WQPO'#DQO'WQPO,59eO0_QQO,59eO1xQPO,59nO1xQPO,59nO1xQPO,59nO1xQPO,59nO1xQPO,59nO7tQQO,5;fO7yQQO,5;iO8RQPO,5;xOOQO,59},59}OOQO,5;h,5;hO8jQQO,5;jO8qQQO,5;mO:UQPO'#FXO:dQPO,5;qOOQO'#FW'#FWOOQO,5;q,5;qOOQO,5;o,5;oO:lQSO'#C|OOQO,59g,59gO:tQPO,59lO:|QQO'#DROOQO,59l,59lOOQO1G/P1G/PO0RQPO'#DVO@yQPO'#DUOATQPO'#DUOYQPO1G/YOYQPO1G/YOYQPO1G/YOYQPO1G/YOYQPO1G/YOA_QSO1G1QOOQO1G1T1G1TOAgQQO1G1TOAlQPO'#E|OOQO'#F`'#F`OOQO1G1d1G1dOAwQPO1G1dOOQO1G1U1G1UOOQO'#FY'#FYOA|QPO,5;sOBRQSO1G1]OOQO1G1]1G1]OOQO'#DO'#DOOBZQPO,59hOOQO'#C}'#C}OOQO,59h,59hOYQPO,59mOOQO1G/W1G/WOOQO,59q,59qOHRQPO,59pOHYQPO,59pOIqQQO7+$tOJOQQO7+$tOK^QQO7+$tOKtQQO7+$tOMYQQO7+$tOOQO7+&l7+&lOMsQQO7+&rOOQO7+&o7+&oOM{QPO7+'OOOQO1G1_1G1_OOQO1G1^1G1^OOQO7+&w7+&wONQQSO1G/SOOQO1G/S1G/SONYQQO1G/XOOQO1G/[1G/[ONdQPO1G/[OOQO<<J^<<J^O!&VQPO<<J^OOQO<<Jj<<JjOOQO1G/T1G/TOOQO7+$n7+$nOOQO7+$v7+$vOOQOAN?xAN?x",stateData:"!&[~O$YOSjOS~OVQOWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQO!YZO#s_O$VVO$WVO$ZXO$^`O$_aO$`bO$acO$bdO$ceO$dfO$egO$fhO$giO$hjO$ikO$jlO$kmO$lnO$moO$npO$oqO$prO$qsO$rtO$suO$tvO$uwO$vxO$wyO$xzO$y{O$z|O${}O$|!OO$}!PO%O!QO%P!RO%Q!SO%R!TO%S!UO%T!VO%U!WO%V!XO%W!YO%X!ZO%Y![O%Z!]O%[!^O%]!_O%^!`O%_!aO%`!bO%a!cO%b!dO%c!eO%d!fO%e!gO%f!hO%g!iO%h!jO%i!kO%j!lO%k!mO%l!nO%m!oO%n!pO%o!qO%p!rO%q!sO%tWO%uWO%vVO%x[O~O!YZO~Oc!uOd!uO$Z!vO~OU#POe!|Of!}Og!|Ow!yOz!yO{!yO|!yO}!zO!O!zO!P!{O!Q!{O!R!{O!S!{O!T!{O!U!{O$R#QO%r#OO~O$V#SO$W#SO%v#SOV#vXW#vXX#vXY#vXZ#vX[#vX]#vX^#vX_#vX`#vXa#vXb#vX!Y#vX#s#vX$V#vX$W#vX$Z#vX$^#vX$_#vX$`#vX$a#vX$b#vX$c#vX$d#vX$e#vX$f#vX$g#vX$h#vX$i#vX$j#vX$k#vX$l#vX$m#vX$n#vX$o#vX$p#vX$q#vX$r#vX$s#vX$t#vX$u#vX$v#vX$w#vX$x#vX$y#vX$z#vX${#vX$|#vX$}#vX%O#vX%P#vX%Q#vX%R#vX%S#vX%T#vX%U#vX%V#vX%W#vX%X#vX%Y#vX%Z#vX%[#vX%]#vX%^#vX%_#vX%`#vX%a#vX%b#vX%c#vX%d#vX%e#vX%f#vX%g#vX%h#vX%i#vX%j#vX%k#vX%l#vX%m#vX%n#vX%o#vX%p#vX%q#vX%t#vX%u#vX%v#vX%x#vX~Os#VO%y#YO~O%x[OU#wXe#wXf#wXg#wXw#wXz#wX{#wX|#wX}#wX!O#wX!P#wX!Q#wX!R#wX!S#wX!T#wX!U#wX$R#wX$U#wX%r#wX$]#wX$[#wX~O$Z#[O~O$]#`O~PYOc!uOd!uOUmaemafmagmawmazma{ma|ma}ma!Oma!Pma!Qma!Rma!Sma!Tma!Uma$Rma$Uma%rma$]ma$[ma~OP#dOQ#bOR#bOVxPWxPXxPYxPZxP[xP]xP^xP_xP`xPaxPbxP!YxP#sxP$VxP$WxP$ZxP$^xP$_xP$`xP$axP$bxP$cxP$dxP$exP$fxP$gxP$hxP$ixP$jxP$kxP$lxP$mxP$nxP$oxP$pxP$qxP$rxP$sxP$txP$uxP$vxP$wxP$xxP$yxP$zxP${xP$|xP$}xP%OxP%PxP%QxP%RxP%SxP%TxP%UxP%VxP%WxP%XxP%YxP%ZxP%[xP%]xP%^xP%_xP%`xP%axP%bxP%cxP%dxP%exP%fxP%gxP%hxP%ixP%jxP%kxP%lxP%mxP%nxP%oxP%pxP%qxP%txP%uxP%vxP%xxP~O#o#jO~O!O#lO#o#kO~Oh#nOi#nO$VVO$WVO%t#mO%u#mO%vVO~O$]#qO~P']Ow!yOU#uae#uaf#uag#uaz#ua{#ua|#ua}#ua!O#ua!P#ua!Q#ua!R#ua!S#ua!T#ua!U#ua$R#ua$U#ua%r#ua$]#ua$[#ua~O!U#rO#}#rO$O#rO$P#rO~O$[#tO%y#uO~Os#vO$]#yO~O$[#zO$]#{O~O$[uX$]uX~P']OVxXWxXXxXYxXZxX[xX]xX^xX_xX`xXaxXbxX!YxX#sxX$VxX$WxX$ZxX$^xX$_xX$`xX$axX$bxX$cxX$dxX$exX$fxX$gxX$hxX$ixX$jxX$kxX$lxX$mxX$nxX$oxX$pxX$qxX$rxX$sxX$txX$uxX$vxX$wxX$xxX$yxX$zxX${xX$|xX$}xX%OxX%PxX%QxX%RxX%SxX%TxX%UxX%VxX%WxX%XxX%YxX%ZxX%[xX%]xX%^xX%_xX%`xX%axX%bxX%cxX%dxX%exX%fxX%gxX%hxX%ixX%jxX%kxX%lxX%mxX%nxX%oxX%pxX%qxX%txX%uxX%vxX%xxX~OS#}OT#}O~P;WOQ#bOR#bO~P;WO%s$UO%w$VO~O#o$WO~O$V#SO$W#SO%v#SO~O$Z$XO~O#s$YO~Os#VO%y$[O~O$[$]O$]$^O~OVxaWxaXxaYxaZxa[xa]xa^xa_xa`xaaxabxa!Yxa#sxa$Vxa$Wxa$^xa$_xa$`xa$axa$bxa$cxa$dxa$exa$fxa$gxa$hxa$ixa$jxa$kxa$lxa$mxa$nxa$oxa$pxa$qxa$rxa$sxa$txa$uxa$vxa$wxa$xxa$yxa$zxa${xa$|xa$}xa%Oxa%Pxa%Qxa%Rxa%Sxa%Txa%Uxa%Vxa%Wxa%Xxa%Yxa%Zxa%[xa%]xa%^xa%_xa%`xa%axa%bxa%cxa%dxa%exa%fxa%gxa%hxa%ixa%jxa%kxa%lxa%mxa%nxa%oxa%pxa%qxa%txa%uxa%vxa%xxa~O$Z#[O~PBcOS$aOT$aO$Zxa~PBcOw!yOUvqevqfvqgvq}vq!Ovq!Pvq!Qvq!Rvq!Svq!Tvq!Uvq$Rvq$Uvq%rvq$]vq$[vq~Ozvq{vq|vq~PHgOz!yO{!yO|!yO~PHgOw!yOz!yO{!yO|!yO}!zO!O!zOUvqevqfvqgvq$Rvq$Uvq%rvq$]vq$[vq~O!Pvq!Qvq!Rvq!Svq!Tvq!Uvq~PJ]O!P!{O!Q!{O!R!{O!S!{O!T!{O!U!{O~PJ]Oe!|Og!|Ow!yOz!yO{!yO|!yO}!zO!O!zO!P!{O!Q!{O!R!{O!S!{O!T!{O!U!{O~OUvqfvq$Rvq$Uvq%rvq$]vq$[vq~PL[O#o$cO%s$bO~O$]$dO~Os#vO$]$fO~O$[ui$]ui~P']O$Z#[OVxiWxiXxiYxiZxi[xi]xi^xi_xi`xiaxibxi!Yxi#sxi$Vxi$Wxi$^xi$_xi$`xi$axi$bxi$cxi$dxi$exi$fxi$gxi$hxi$ixi$jxi$kxi$lxi$mxi$nxi$oxi$pxi$qxi$rxi$sxi$txi$uxi$vxi$wxi$xxi$yxi$zxi${xi$|xi$}xi%Oxi%Pxi%Qxi%Rxi%Sxi%Txi%Uxi%Vxi%Wxi%Xxi%Yxi%Zxi%[xi%]xi%^xi%_xi%`xi%axi%bxi%cxi%dxi%exi%fxi%gxi%hxi%ixi%jxi%kxi%lxi%mxi%nxi%oxi%pxi%qxi%txi%uxi%vxi%xxi~O%s$hO~O",goto:"(t$TPPPPPPPPPPPPPPPPPPPPPPPPPPPP$U$t%Q%^%d%p%sP%y&S$tP&V&fPPPPPPPPPPP$t&p&|P&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|$tP'Y$t$tP$t$t'i$t'u(U(e(h(nPPP$tP(qQSOQ#TXQ#UYQ#_!vQ$P#eQ$Q#fQ$R#gQ$S#hQ$T#iR$_#ze_OXY!v#e#f#g#h#i#zeROXY!v#e#f#g#h#i#zQ!wRR#a!xQ#]!uQ#|#bQ$`#}R$g$aR#w#[Q#x#[R$e$]Q!xRQ#RUR#a!wR#^!vQ#e!yQ#f!zQ#g!{Q#h!|R#i!}Y#c!y!z!{!|!}R$O#deUOXY!v#e#f#g#h#i#zeTOXY!v#e#f#g#h#i#zd_OXY!v#e#f#g#h#i#zR#o#QeYOXY!v#e#f#g#h#i#zd]OXY!v#e#f#g#h#i#zR!tPd^OXY!v#e#f#g#h#i#zR#Z]R#W[Q#X[R$Z#tR#s#VR#p#Q",nodeNames:"\u26a0 Bool Ignoring On GroupLeft GroupRight Offset Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifiers OnOrIgnoring Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName",maxTerm:225,skippedNodes:[0,26],repeatNodeCount:0,tokenData:"1R~RwX^#lpq#lqr$ars$tst%huv%swx%xxy&gyz&lz{&q{|&v|}&}}!O'S!O!P'Z!P!Q(Z!Q!R(`!R![)W![!]-r!^!_.n!_!`.{!`!a/b!b!c/o!c!}/t!}#O0[#P#Q0a#Q#R0f#R#S/t#S#T0k#T#o/t#o#p0w#q#r0|#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$Y~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!U~~$tO$P~~$yU#s~OY$tZr$trs%]s#O$t#O#P%b#P~$t~%bO#s~~%ePO~$t~%mQj~OY%hZ~%h~%xO|~~%}U#s~OY%xZw%xwx%]x#O%x#O#P&a#P~%x~&dPO~%x~&lO$Z~~&qO$]~~&vOz~R&}O%uP}Q~'SO$[~R'ZO%tP!OQP'^P!Q!['aP'fR%vP!Q!['a!g!h'o#X#Y'oP'rR{|'{}!O'{!Q![(RP(OP!Q![(RP(WP%vP!Q![(R~(`O{~R(eZ%vP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#l#m-W#m#n,iR)]Y%vP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#m#n,iQ*QP#oQ!Q![*TQ*WS!Q![*T#[#]*d#a#b*x#g#h+lQ*iP#oQ!Q![*lQ*oR!Q![*l#a#b*x#g#h+lQ*}Q#oQ!Q![+T#g#h+gQ+WR!Q![+T#a#b+a#g#h+lQ+dP#g#h+gQ+lO#oQQ+qP#oQ!Q![+tQ+wQ!Q![+t#a#b+aQ,SP#oQ!Q![,VQ,YT!Q![,V#W#X){#[#]*d#a#b*x#g#h+lQ,nP#oQ!Q![,qQ,tU!Q![,q#W#X){#[#]*d#a#b*x#g#h+l#k#l+}P-ZR!Q![-d!c!i-d#T#Z-dP-iR%vP!Q![-d!c!i-d#T#Z-dV-yT%wS!YR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.YR._T!YR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.Y~.sP!T~!_!`.v~.{O!S~~/QQ#}P!_!`/W#r#s/]Q/]O!PQ~/bO$O~~/gP!R~!_!`/j~/oO!Q~~/tO$R~V/{T!YRsS!Q![/t![!].Y!c!}/t#R#S/t#T#o/t~0aO%r~~0fO%s~~0kOw~~0nRO#S0k#S#T%]#T~0k~0|O%x~~1RO%y~",tokenizers:[0,1,2],topRules:{PromQL:[0,27],MetricName:[1,143]},specialized:[{term:56,get:function(e,t){return function(e,t){return Ze[e.toLowerCase()]||-1}(e)<<1}},{term:56,get:function(e,t){return function(e,t){return Je[e.toLowerCase()]||-1}(e)<<1|1}},{term:56,get:function(e){return Ke[e]||-1}}],tokenPrec:0}),tt=n(39),nt=n(3);!function(e){e.none="none",e.vector="vector",e.scalar="scalar",e.matrix="matrix",e.string="string"}(T||(T={}));var at=(k={},Object(Y.a)(k,58,{name:"abs",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,57,{name:"absent",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,55,{name:"absent_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,59,{name:"acos",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,60,{name:"acosh",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,61,{name:"asin",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,62,{name:"asinh",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,63,{name:"atan",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,64,{name:"atanh",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,65,{name:"avg_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,66,{name:"ceil",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,67,{name:"changes",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,68,{name:"clamp",argTypes:[T.vector,T.scalar,T.scalar],variadic:0,returnType:T.vector}),Object(Y.a)(k,69,{name:"clamp_max",argTypes:[T.vector,T.scalar],variadic:0,returnType:T.vector}),Object(Y.a)(k,70,{name:"clamp_min",argTypes:[T.vector,T.scalar],variadic:0,returnType:T.vector}),Object(Y.a)(k,71,{name:"cos",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,72,{name:"Cosh",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,73,{name:"count_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,74,{name:"days_in_month",argTypes:[T.vector],variadic:1,returnType:T.vector}),Object(Y.a)(k,75,{name:"day_of_month",argTypes:[T.vector],variadic:1,returnType:T.vector}),Object(Y.a)(k,76,{name:"day_of_week",argTypes:[T.vector],variadic:1,returnType:T.vector}),Object(Y.a)(k,77,{name:"deg",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,78,{name:"delta",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,79,{name:"deriv",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,80,{name:"exp",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,81,{name:"floor",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,82,{name:"histogram_quantile",argTypes:[T.scalar,T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,83,{name:"holt_winters",argTypes:[T.matrix,T.scalar,T.scalar],variadic:0,returnType:T.vector}),Object(Y.a)(k,84,{name:"hour",argTypes:[T.vector],variadic:1,returnType:T.vector}),Object(Y.a)(k,85,{name:"idelta",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,86,{name:"increase",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,87,{name:"irate",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,88,{name:"label_replace",argTypes:[T.vector,T.string,T.string,T.string,T.string],variadic:0,returnType:T.vector}),Object(Y.a)(k,89,{name:"label_join",argTypes:[T.vector,T.string,T.string,T.string],variadic:-1,returnType:T.vector}),Object(Y.a)(k,90,{name:"last_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,91,{name:"ln",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,92,{name:"log10",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,93,{name:"log2",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,94,{name:"max_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,95,{name:"min_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,96,{name:"minute",argTypes:[T.vector],variadic:1,returnType:T.vector}),Object(Y.a)(k,97,{name:"month",argTypes:[T.vector],variadic:1,returnType:T.vector}),Object(Y.a)(k,98,{name:"pi",argTypes:[],variadic:0,returnType:T.vector}),Object(Y.a)(k,99,{name:"predict_linear",argTypes:[T.matrix,T.scalar],variadic:0,returnType:T.vector}),Object(Y.a)(k,100,{name:"present_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,101,{name:"quantile_over_time",argTypes:[T.scalar,T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,102,{name:"rad",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,103,{name:"rate",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,104,{name:"resets",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,105,{name:"round",argTypes:[T.vector,T.scalar],variadic:1,returnType:T.vector}),Object(Y.a)(k,106,{name:"scalar",argTypes:[T.vector],variadic:0,returnType:T.scalar}),Object(Y.a)(k,107,{name:"sgn",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,108,{name:"sin",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,109,{name:"Sinh",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,110,{name:"sort",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,111,{name:"sort_desc",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,112,{name:"sqrt",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,113,{name:"stddev_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,114,{name:"stdvar_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,115,{name:"sum_over_time",argTypes:[T.matrix],variadic:0,returnType:T.vector}),Object(Y.a)(k,116,{name:"tan",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,117,{name:"tanh",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,119,{name:"time",argTypes:[],variadic:0,returnType:T.scalar}),Object(Y.a)(k,118,{name:"timestamp",argTypes:[T.vector],variadic:0,returnType:T.vector}),Object(Y.a)(k,120,{name:"vector",argTypes:[T.scalar],variadic:0,returnType:T.vector}),Object(Y.a)(k,121,{name:"year",argTypes:[T.vector],variadic:1,returnType:T.vector}),k);function rt(e){return at[e]}var it,ot=function(){function e(t,n,a){Object(te.a)(this,e),this.type=t,this.name=n,this.value=a}return Object(ne.a)(e,[{key:"matchesEmpty",value:function(){switch(this.type){case Ge:return""===this.value;case 52:return""!==this.value;default:return!1}}}]),e}();function st(e,t){var n=[];return e.forEach((function(e){n.push(function(e,t){var n=new ot(0,"",""),a=e.cursor;if(!a.next())return n;do{switch(a.type.id){case 35:n.name=t.sliceDoc(a.from,a.to);break;case 136:var r=a.node.firstChild;r&&(n.type=r.type.id);break;case We:n.value=t.sliceDoc(a.from,a.to).slice(1,-1)}}while(a.nextSibling());return n}(e,t))})),n}function ct(e,t,n){if(!t||0===t.length)return e;var a,r="",i=Object(nt.a)(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o.name!==n&&""!==o.value){var s="";switch(o.type){default:s="=";break;case 52:s="!=";break;case 139:s="!~";break;case 138:s="=~"}var c="".concat(o.name).concat(s,'"').concat(o.value,'"');r=""===r?c:"".concat(r,",").concat(c)}}}catch(l){i.e(l)}finally{i.f()}return"".concat(e,"{").concat(r,"}")}function lt(e,t){for(var n=e.cursor,a=!0;a&&n.type.id!==t;)a=n.parent();return n.type.id===t?n.node:null}function ut(e){for(var t=e.cursor,n=0,a=!0,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(i.unshift(t.type.id);n<i.length&&a;)t.type.id===i[n]||t.type.name===i[n]?++n<i.length&&(a=t.next()):a=t.nextSibling();return n>=i.length?t.node:null}function dt(e){var t=e.cursor;if(!t.next())return!1;for(var n=!1,a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];do{n=r.some((function(e){return t.type.id===e||t.type.name===e}))}while(!n&&t.nextSibling());return n}function pt(e,t,n){var a=[];return function e(a,r){var i=null===a||void 0===a?void 0:a.getChild(t),o=null===a||void 0===a?void 0:a.lastChild;i&&i.type.id===t&&e(i,r),o&&o.type.id===n&&r.push(o)}(e,a),a}function ht(e){var t;if(!e)return T.none;switch(e.type.id){case qe:case ze:return ht(e.firstChild);case 29:case He:return T.vector;case We:return T.string;case 124:return T.scalar;case Ve:case Be:return T.matrix;case 126:case 129:case 140:return ht(ut(e,qe));case Fe:var n=ht(e.firstChild),a=ht(e.lastChild);return n===T.scalar&&a===T.scalar?T.scalar:T.vector;case 53:var r=null===(t=e.firstChild)||void 0===t?void 0:t.firstChild;return r?rt(r.type.id).returnType:T.none;default:return T.none}}!function(e){e.CardOneToOne="one-to-one",e.CardManyToOne="many-to-one",e.CardOneToMany="one-to-many",e.CardManyToMany="many-to-many"}(it||(it={}));var ft=n(41);var mt,bt=function(){function e(t){Object(te.a)(this,e),this.tree=Object(ft.syntaxTree)(t),this.state=t,this.diagnostics=[]}return Object(ne.a)(e,[{key:"getDiagnostics",value:function(){return this.diagnostics.sort((function(e,t){return e.from-t.from}))}},{key:"analyze",value:function(){this.checkAST(this.tree.topNode.firstChild),this.diagnoseAllErrorNodes()}},{key:"diagnoseAllErrorNodes",value:function(){for(var e=this.tree.cursor();e.next();)if(0===e.type.id&&e.to!==this.tree.topNode.to){var t=e.node.parent;this.diagnostics.push({severity:"error",message:"unexpected expression",from:t?t.from:e.from,to:t?t.to:e.to})}}},{key:"checkAST",value:function(e){if(!e)return T.none;switch(e.type.id){case qe:return this.checkAST(e.firstChild);case 29:this.checkAggregationExpr(e);break;case Fe:this.checkBinaryExpr(e);break;case 53:this.checkCallFunction(e);break;case 126:case Ve:this.checkAST(ut(e,qe));break;case 129:var t=this.checkAST(ut(e,qe));t!==T.scalar&&t!==T.vector&&this.addDiagnostic(e,"unary expression only allowed on expressions of type scalar or instant vector, got ".concat(t));break;case Be:var n=this.checkAST(ut(e,qe));n!==T.vector&&this.addDiagnostic(e,"subquery is only allowed on instant vector, got ".concat(n," in ").concat(e.name," instead"));break;case He:this.checkVectorSelector(e);break;case 140:var a=this.checkAST(ut(e,qe));a!==T.vector&&a!==T.matrix&&this.addDiagnostic(e,"@ modifier must be preceded by an instant selector vector or range vector selector or a subquery")}return ht(e)}},{key:"checkAggregationExpr",value:function(e){var t,n=null===(t=e.firstChild)||void 0===t?void 0:t.firstChild;if(n){var a=ut(e,36,37,qe);if(a){this.expectType(a,T.vector,"aggregation expression");var r=ut(e,36,37,37,qe);if(18===n.type.id||8===n.type.id||14===n.type.id){if(!r)return void this.addDiagnostic(e,"no parameter found");this.expectType(r,T.scalar,"aggregation parameter")}if(10===n.type.id){if(!r)return void this.addDiagnostic(e,"no parameter found");this.expectType(r,T.string,"aggregation parameter")}}else this.addDiagnostic(e,"unable to find the parameter for the expression")}else this.addDiagnostic(e,"aggregation operator expected in aggregation expression but got nothing")}},{key:"checkBinaryExpr",value:function(e){var t=e.firstChild,n=e.lastChild;if(t&&n){var a=this.checkAST(t),r=this.checkAST(n),i=ut(e,40,1),o=dt(e,47,52,50,51,48,49),s=dt(e,21,22,23);i?o||this.addDiagnostic(e,"bool modifier can only be used on comparison operators"):o&&a===T.scalar&&r===T.scalar&&this.addDiagnostic(e,"comparisons between scalars must use BOOL modifier");var c=function(e,t){if(!t||t.type.id!==Fe)return null;var n={card:it.CardOneToOne,matchingLabels:[],on:!1,include:[]},a=t.getChild(40);if(a){var r=a.getChild(41);if(r){n.on=null!==r.getChild(3);var i=pt(r.getChild(32),33,34);if(i.length>0){var o,s=Object(nt.a)(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;n.matchingLabels.push(e.sliceDoc(c.from,c.to))}}catch(m){s.e(m)}finally{s.f()}}}var l=a.getChild(4),u=a.getChild(5);if(l||u){n.card=l?it.CardManyToOne:it.CardOneToMany;var d=pt(a.getChild(32),33,34);if(d.length>0){var p,h=Object(nt.a)(d);try{for(h.s();!(p=h.n()).done;){var f=p.value;n.include.push(e.sliceDoc(f.from,f.to))}}catch(m){h.e(m)}finally{h.f()}}}}return dt(t,21,22,23)&&n.card===it.CardOneToOne&&(n.card=it.CardManyToMany),n}(this.state,e);if(null!==c&&c.on){var l,u=Object(nt.a)(c.matchingLabels);try{for(u.s();!(l=u.n()).done;){var d,p=l.value,h=Object(nt.a)(c.include);try{for(h.s();!(d=h.n()).done;){p===d.value&&this.addDiagnostic(e,'label "'.concat(p,'" must not occur in ON and GROUP clause at once'))}}catch(f){h.e(f)}finally{h.f()}}}catch(f){u.e(f)}finally{u.f()}}a!==T.scalar&&a!==T.vector&&this.addDiagnostic(t,"binary expression must contain only scalar and instant vector types"),r!==T.scalar&&r!==T.vector&&this.addDiagnostic(n,"binary expression must contain only scalar and instant vector types"),a===T.vector&&r===T.vector||null===c?s&&((null===c||void 0===c?void 0:c.card)!==it.CardOneToMany&&(null===c||void 0===c?void 0:c.card)!==it.CardManyToOne||this.addDiagnostic(e,"no grouping allowed for set operations"),(null===c||void 0===c?void 0:c.card)!==it.CardManyToMany&&this.addDiagnostic(e,"set operations must always be many-to-many")):c.matchingLabels.length>0&&this.addDiagnostic(e,"vector matching only allowed between instant vectors"),a!==T.scalar&&r!==T.scalar||!s||this.addDiagnostic(e,"set operator not allowed in binary scalar expression")}else this.addDiagnostic(e,"left or right expression is missing in binary expression")}},{key:"checkCallFunction",value:function(e){var t,n=null===(t=e.firstChild)||void 0===t?void 0:t.firstChild;if(n){var a=pt(ut(e,36),37,qe),r=rt(n.type.id),i=r.argTypes.length;if(0===r.variadic)a.length!==i&&this.addDiagnostic(e,"expected ".concat(i,' argument(s) in call to "').concat(r.name,'", got ').concat(a.length));else{var o=i-1;if(o>a.length)this.addDiagnostic(e,"expected at least ".concat(o,' argument(s) in call to "').concat(r.name,'", got ').concat(a.length));else{var s=o+r.variadic;r.variadic>0&&s<a.length&&this.addDiagnostic(e,"expected at most ".concat(s,' argument(s) in call to "').concat(r.name,'", got ').concat(a.length))}}for(var c=0,l=0;l<a.length;l++){if((c=l)>=r.argTypes.length){if(0===r.variadic)break;c=r.argTypes.length-1}this.expectType(a[l],r.argTypes[c],'call to function "'.concat(r.name,'"'))}}else this.addDiagnostic(e,"function not defined")}},{key:"checkVectorSelector",value:function(e){var t=st(pt(ut(e,133,Ue),Ue,Ye),this.state),n="",a=ut(e,132,56);if(a&&(n=this.state.sliceDoc(a.from,a.to)),""!==n){var r=t.find((function(e){return"__name__"===e.name}));r&&this.addDiagnostic(e,"metric name must not be set twice: ".concat(n," or ").concat(r.value)),t.push(new ot(Ge,"__name__",n))}t.every((function(e){return e.matchesEmpty()}))&&this.addDiagnostic(e,"vector selector must contain at least one non-empty matcher")}},{key:"expectType",value:function(e,t,n){var a=this.checkAST(e);a!==t&&this.addDiagnostic(e,"expected type ".concat(t," in ").concat(n,", got ").concat(a))}},{key:"addDiagnostic",value:function(e,t){this.diagnostics.push({severity:"error",message:t,from:e.from,to:e.to})}}]),e}(),vt=n(68),gt=[{label:"^"},{label:"*"},{label:"/"},{label:"%"},{label:"+"},{label:"-"},{label:"=="},{label:">="},{label:">"},{label:"<"},{label:"<="},{label:"!="},{label:"and"},{label:"or"},{label:"unless"}],xt=[{label:"avg",detail:"aggregation",info:"Calculate the average over dimensions",type:"keyword"},{label:"bottomk",detail:"aggregation",info:"Smallest k elements by sample value",type:"keyword"},{label:"count",detail:"aggregation",info:"Count number of elements in the vector",type:"keyword"},{label:"count_values",detail:"aggregation",info:"Count number of elements with the same value",type:"keyword"},{label:"group",detail:"aggregation",info:"Group series, while setting the sample value to 1",type:"keyword"},{label:"max",detail:"aggregation",info:"Select maximum over dimensions",type:"keyword"},{label:"min",detail:"aggregation",info:"Select minimum over dimensions",type:"keyword"},{label:"quantile",detail:"aggregation",info:"Calculate \u03c6-quantile (0 \u2264 \u03c6 \u2264 1) over dimensions",type:"keyword"},{label:"stddev",detail:"aggregation",info:"Calculate population standard deviation over dimensions",type:"keyword"},{label:"stdvar",detail:"aggregation",info:"Calculate population standard variance over dimensions",type:"keyword"},{label:"sum",detail:"aggregation",info:"Calculate sum over dimensions",type:"keyword"},{label:"topk",detail:"aggregation",info:"Largest k elements by sample value",type:"keyword"}],Ot=[{label:"sum(rate(__input_vector__[5m]))",type:"function",detail:"snippet",info:"Sum over rates of increase",apply:Object(vt.snippet)("sum(rate(${__input_vector__}[5m]))")},{label:"histogram_quantile(__quantile__, sum by(le) (rate(__histogram_metric__[5m])))",type:"function",detail:"snippet",info:"Approximate a quantile value from an aggregated histogram",apply:Object(vt.snippet)("histogram_quantile(${__quantile__}, sum by(le) (rate(${__histogram_metric__}[5m])))")},{label:'label_replace(__input_vector__, "__dst__", "__replacement__", "__src__", "__regex__")',type:"function",detail:"snippet",info:"Set or replace a label value in an input vector",apply:Object(vt.snippet)('label_replace(${__input_vector__}, "${__dst__}", "${__replacement__}", "${__src__}", "${__regex__}")')},{label:"topk(__rank_number__, __input_vector__)",type:"function",detail:"snippet",info:"Largest k elements by sample value",apply:Object(vt.snippet)("topk(${__rank_number__}, ${__input_vector__})")},{label:"bottomk(__rank_number__, __input_vector__)",type:"function",detail:"snippet",info:"Smallest k elements by sample value",apply:Object(vt.snippet)("bottomk(${__rank_number__}, ${__input_vector__})")},{label:'count_values("__label_name__", __input_vector__)',type:"function",detail:"snippet",info:"Count the number of series per distinct sample value",apply:Object(vt.snippet)('count_values("${__label_name__}", ${__metric__})')}],yt={matchOp:[{label:"="},{label:"!="},{label:"=~"},{label:"!~"}],binOp:gt,duration:[{label:"y"},{label:"w"},{label:"d"},{label:"h"},{label:"m"},{label:"s"},{label:"ms"}],binOpModifier:[{label:"on",info:"Match only on specified labels",type:"keyword"},{label:"ignoring",info:"Ignore specified labels for matching",type:"keyword"},{label:"group_left",info:"Allow many-to-one matching",type:"keyword"},{label:"group_right",info:"Allow one-to-many matching",type:"keyword"}],atModifier:[{label:"start()",info:"resolve to the start of the query",type:"keyword"},{label:"end()",info:"resolve to the end of the query",type:"keyword"}],functionIdentifier:[{label:"abs",detail:"function",info:"Return absolute values of input series",type:"function"},{label:"absent",detail:"function",info:"Determine whether input vector is empty",type:"function"},{label:"absent_over_time",detail:"function",info:"Determine whether input range vector is empty",type:"function"},{label:"acos",detail:"function",info:"Calculate the arccosine, in radians, for input series",type:"function"},{label:"acosh",detail:"function",info:"Calculate the inverse hyperbolic cosine, in radians, for input series",type:"function"},{label:"asin",detail:"function",info:"Calculate the arcsine, in radians, for input series",type:"function"},{label:"asinh",detail:"function",info:"Calculate the inverse hyperbolic sine, in radians, for input series",type:"function"},{label:"atan",detail:"function",info:"Calculate the arctangent, in radians, for input series",type:"function"},{label:"atanh",detail:"function",info:"Calculate the inverse hyperbolic tangent, in radians, for input series",type:"function"},{label:"avg_over_time",detail:"function",info:"Average series values over time",type:"function"},{label:"ceil",detail:"function",info:"Round up values of input series to nearest integer",type:"function"},{label:"changes",detail:"function",info:"Return number of value changes in input series over time",type:"function"},{label:"clamp",detail:"function",info:"Limit the value of input series between a minimum and a maximum",type:"function"},{label:"clamp_max",detail:"function",info:"Limit the value of input series to a maximum",type:"function"},{label:"clamp_min",detail:"function",info:"Limit the value of input series to a minimum",type:"function"},{label:"cos",detail:"function",info:"Calculate the cosine, in radians, for input series",type:"function"},{label:"cosh",detail:"function",info:"Calculate the hyperbolic cosine, in radians, for input series",type:"function"},{label:"count_over_time",detail:"function",info:"Count the number of values for each input series",type:"function"},{label:"days_in_month",detail:"function",info:"Return the number of days in current month for provided timestamps",type:"function"},{label:"day_of_month",detail:"function",info:"Return the day of the month for provided timestamps",type:"function"},{label:"day_of_week",detail:"function",info:"Return the day of the week for provided timestamps",type:"function"},{label:"deg",detail:"function",info:"Convert radians to degrees for input series",type:"function"},{label:"delta",detail:"function",info:"Calculate the difference between beginning and end of a range vector (for gauges)",type:"function"},{label:"deriv",detail:"function",info:"Calculate the per-second derivative over series in a range vector (for gauges)",type:"function"},{label:"exp",detail:"function",info:"Calculate exponential function for input vector values",type:"function"},{label:"floor",detail:"function",info:"Round down values of input series to nearest integer",type:"function"},{label:"histogram_quantile",detail:"function",info:"Calculate quantiles from histogram buckets",type:"function"},{label:"holt_winters",detail:"function",info:"Calculate smoothed value of input series",type:"function"},{label:"hour",detail:"function",info:"Return the hour of the day for provided timestamps",type:"function"},{label:"idelta",detail:"function",info:"Calculate the difference between the last two samples of a range vector (for counters)",type:"function"},{label:"increase",detail:"function",info:"Calculate the increase in value over a range of time (for counters)",type:"function"},{label:"irate",detail:"function",info:"Calculate the per-second increase over the last two samples of a range vector (for counters)",type:"function"},{label:"label_replace",detail:"function",info:"Set or replace label values",type:"function"},{label:"label_join",detail:"function",info:"Join together label values into new label",type:"function"},{label:"last_over_time",detail:"function",info:"The most recent point value in specified interval.",type:"function"},{label:"ln",detail:"function",info:"Calculate natural logarithm of input series",type:"function"},{label:"log10",detail:"function",info:"Calulcate base-10 logarithm of input series",type:"function"},{label:"log2",detail:"function",info:"Calculate base-2 logarithm of input series",type:"function"},{label:"max_over_time",detail:"function",info:"Return the maximum value over time for input series",type:"function"},{label:"min_over_time",detail:"function",info:"Return the minimum value over time for input series",type:"function"},{label:"minute",detail:"function",info:"Return the minute of the hour for provided timestamps",type:"function"},{label:"month",detail:"function",info:"Return the month for provided timestamps",type:"function"},{label:"pi",detail:"function",info:"Return pi",type:"function"},{label:"predict_linear",detail:"function",info:"Predict the value of a gauge into the future",type:"function"},{label:"present_over_time",detail:"function",info:"the value 1 for any series in the specified interval",type:"function"},{label:"quantile_over_time",detail:"function",info:"Calculate value quantiles over time for input series",type:"function"},{label:"rad",detail:"function",info:"Convert degrees to radians for input series",type:"function"},{label:"rate",detail:"function",info:"Calculate per-second increase over a range vector (for counters)",type:"function"},{label:"resets",detail:"function",info:"Return number of value decreases (resets) in input series of time",type:"function"},{label:"round",detail:"function",info:"Round values of input series to nearest integer",type:"function"},{label:"scalar",detail:"function",info:"Convert single-element series vector into scalar value",type:"function"},{label:"sgn",detail:"function",info:"Returns the sign of the instant vector",type:"function"},{label:"sin",detail:"function",info:"Calculate the sine, in radians, for input series",type:"function"},{label:"sinh",detail:"function",info:"Calculate the hyperbolic sine, in radians, for input series",type:"function"},{label:"sort",detail:"function",info:"Sort input series ascendingly by value",type:"function"},{label:"sort_desc",detail:"function",info:"Sort input series descendingly by value",type:"function"},{label:"sqrt",detail:"function",info:"Return the square root for input series",type:"function"},{label:"stddev_over_time",detail:"function",info:"Calculate the standard deviation within input series over time",type:"function"},{label:"stdvar_over_time",detail:"function",info:"Calculate the standard variation within input series over time",type:"function"},{label:"sum_over_time",detail:"function",info:"Calculate the sum over the values of input series over time",type:"function"},{label:"tan",detail:"function",info:"Calculate the tangent, in radians, for input series",type:"function"},{label:"tanh",detail:"function",info:"Calculate the hyperbolic tangent, in radians, for input series",type:"function"},{label:"time",detail:"function",info:"Return the Unix timestamp at the current evaluation time",type:"function"},{label:"timestamp",detail:"function",info:"Return the Unix timestamp for the samples in the input vector",type:"function"},{label:"vector",detail:"function",info:"Convert a scalar value into a single-element series vector",type:"function"},{label:"year",detail:"function",info:"Return the year for provided timestamps",type:"function"}],aggregateOp:xt,aggregateOpModifier:[{label:"by",info:"Keep the listed labels, remove all others.",type:"keyword"},{label:"without",info:"Remove the listed labels, preserve all others.",type:"keyword"}],number:[{label:"nan",info:"Floating-point NaN value",type:"constant"},{label:"inf",info:"Floating-point infinity",type:"constant"}]};function jt(e,t){var n=lt(e,He);return n&&(n=ut(n,132,56))?t.sliceDoc(n.from,n.to):""}function kt(e,t){var n,a,r,i,o,s,c,l,u,d,p,h,f,m,b,v,g,x,O,y=[];switch(t.type.id){case 0:if((null===(n=t.parent)||void 0===n?void 0:n.type.id)===ze){y.push({kind:mt.Duration});break}if((null===(a=t.parent)||void 0===a?void 0:a.type.id)===Ye){y.push({kind:mt.MatchOp});break}if((null===(r=t.parent)||void 0===r?void 0:r.type.id)===Ve){y.push({kind:mt.Duration});break}if((null===(i=t.parent)||void 0===i?void 0:i.type.id)===Be&&dt(t.parent,123)){y.push({kind:mt.Duration});break}var j=e.sliceDoc(t.from,t.to);gt.filter((function(e){return e.label.includes(j)})).length>0&&y.push({kind:mt.BinOp});break;case 56:if(0===(null===(o=t.parent)||void 0===o?void 0:o.type.id)){var k=t.parent;if(140===(null===(s=k.parent)||void 0===s?void 0:s.type.id)){y.push({kind:mt.AtModifiers});break}if(29===(null===(c=k.parent)||void 0===c?void 0:c.type.id)){y.push({kind:mt.AggregateOpModifier},{kind:mt.BinOp});break}if((null===(l=k.parent)||void 0===l?void 0:l.type.id)===He){var T=jt(t,e);xt.filter((function(e){return e.label===T})).length>0&&y.push({kind:mt.AggregateOpModifier}),y.push({kind:mt.BinOp},{kind:mt.Offset});break}}var _=null===(p=null===(d=null===(u=t.parent)||void 0===u?void 0:u.parent)||void 0===d?void 0:d.parent)||void 0===p?void 0:p.parent;if(!_){y.push({kind:mt.MetricName,metricName:e.sliceDoc(t.from,t.to)});break}var w=function(e){var t=e.cursor;if(!t.next())return!1;for(var n=0,a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];do{t.type.id!==r[n]&&t.type.name!==r[n]||n++}while(n<r.length&&t.nextSibling());return n>=r.length}(_,qe,qe);w?_.type.id!==Fe||dt(_,0)?(_.type.id!==Fe||_.type.id===Fe&&dt(_,0))&&y.push({kind:mt.BinOp},{kind:mt.Offset}):(y.push({kind:mt.MetricName,metricName:e.sliceDoc(t.from,t.to)},{kind:mt.Function},{kind:mt.Aggregation},{kind:mt.BinOpModifier},{kind:mt.Number}),dt(_,47,48,49,50,51,52)&&!ut(_,40,1)&&y.push({kind:mt.Bool})):(y.push({kind:mt.MetricName,metricName:e.sliceDoc(t.from,t.to)},{kind:mt.Function},{kind:mt.Aggregation}),37!==_.type.id&&_.type.id!==Ve&&y.push({kind:mt.Number}));break;case 27:t.firstChild||y.push({kind:mt.MetricName,metricName:""},{kind:mt.Function},{kind:mt.Aggregation},{kind:mt.Number});break;case 32:y.push({kind:mt.LabelName});break;case 133:y.push({kind:mt.LabelName,metricName:jt(t,e)});break;case 35:34===(null===(h=t.parent)||void 0===h?void 0:h.type.id)?y.push({kind:mt.LabelName}):(null===(f=t.parent)||void 0===f?void 0:f.type.id)===Ye&&y.push({kind:mt.LabelName,metricName:jt(t,e)});break;case We:if((null===(m=t.parent)||void 0===m?void 0:m.type.id)===Ye){var S="";35===(null===(b=t.parent.firstChild)||void 0===b?void 0:b.type.id)&&(S=e.sliceDoc(t.parent.firstChild.from,t.parent.firstChild.to));var C=jt(t,e),M=st(pt(lt(t,Ue),Ue,Ye),e);y.push({kind:mt.LabelValue,metricName:C,labelName:S,matchers:M})}break;case 124:0===(null===(v=t.parent)||void 0===v?void 0:v.type.id)&&(null===(g=t.parent.parent)||void 0===g?void 0:g.type.id)===Be?y.push({kind:mt.Duration}):y.push({kind:mt.Number});break;case 123:case ze:y.push({kind:mt.Duration});break;case 36:y.push({kind:mt.MetricName,metricName:""},{kind:mt.Function},{kind:mt.Aggregation});break;case 52:136===(null===(x=t.parent)||void 0===x?void 0:x.type.id)?y.push({kind:mt.MatchOp}):(null===(O=t.parent)||void 0===O?void 0:O.type.id)===Fe&&y.push({kind:mt.BinOp});break;case Ge:case 138:case 139:case 136:y.push({kind:mt.MatchOp});break;case 39:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 21:case 23:case 22:case Fe:y.push({kind:mt.BinOp})}return y}!function(e){e[e.MetricName=0]="MetricName",e[e.LabelName=1]="LabelName",e[e.LabelValue=2]="LabelValue",e[e.Function=3]="Function",e[e.Aggregation=4]="Aggregation",e[e.BinOpModifier=5]="BinOpModifier",e[e.BinOp=6]="BinOp",e[e.MatchOp=7]="MatchOp",e[e.AggregateOpModifier=8]="AggregateOpModifier",e[e.Duration=9]="Duration",e[e.Offset=10]="Offset",e[e.Bool=11]="Bool",e[e.AtModifiers=12]="AtModifiers",e[e.Number=13]="Number"}(mt||(mt={}));var Tt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;Object(te.a)(this,e),this.prometheusClient=t,this.maxMetricsMetadata=n}return Object(ne.a)(e,[{key:"getPrometheusClient",value:function(){return this.prometheusClient}},{key:"promQL",value:function(e){var t,n=this,a=e.state,r=e.pos,i=Object(ft.syntaxTree)(a).resolve(r,-1),o=kt(a,i),s=Promise.resolve([]),c=!1,l=!0,u=Object(nt.a)(o);try{var d=function(){var e=t.value;switch(e.kind){case mt.Aggregation:c=!0,s=s.then((function(e){return e.concat(yt.aggregateOp)}));break;case mt.Function:c=!0,s=s.then((function(e){return e.concat(yt.functionIdentifier)}));break;case mt.BinOpModifier:s=s.then((function(e){return e.concat(yt.binOpModifier)}));break;case mt.BinOp:s=s.then((function(e){return e.concat(yt.binOp)}));break;case mt.MatchOp:s=s.then((function(e){return e.concat(yt.matchOp)}));break;case mt.AggregateOpModifier:s=s.then((function(e){return e.concat(yt.aggregateOpModifier)}));break;case mt.Duration:l=!1,s=s.then((function(e){return e.concat(yt.duration)}));break;case mt.Offset:s=s.then((function(e){return e.concat([{label:"offset"}])}));break;case mt.Bool:s=s.then((function(e){return e.concat([{label:"bool"}])}));break;case mt.AtModifiers:s=s.then((function(e){return e.concat(yt.atModifier)}));break;case mt.Number:s=s.then((function(e){return e.concat(yt.number)}));break;case mt.MetricName:s=s.then((function(t){return n.autocompleteMetricName(t,e)}));break;case mt.LabelName:s=s.then((function(t){return n.autocompleteLabelName(t,e)}));break;case mt.LabelValue:s=s.then((function(t){return n.autocompleteLabelValue(t,e)}))}};for(u.s();!(t=u.n()).done;)d()}catch(p){u.e(p)}finally{u.f()}return s.then((function(e){return function(e,t,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=e;return arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&r.push.apply(r,Object(J.a)(Ot)),{from:t,to:n,options:r,span:a?/^[a-zA-Z0-9_:]+$/:void 0}}(e,function(e,t){var n,a,r,i,o,s,c=e.from;return 133===e.type.id||32===e.type.id?c=function(e,t){var n=e.from+1;return null!==e.firstChild&&(n=t),n}(e,t):36===e.type.id||e.type.id===We&&(null===(n=e.parent)||void 0===n?void 0:n.type.id)===Ye?c++:(e.type.id===ze||124===e.type.id&&0===(null===(a=e.parent)||void 0===a?void 0:a.type.id)&&(null===(r=e.parent.parent)||void 0===r?void 0:r.type.id)===Be||0===e.type.id&&((null===(i=e.parent)||void 0===i?void 0:i.type.id)===ze||(null===(o=e.parent)||void 0===o?void 0:o.type.id)===Ve||(null===(s=e.parent)||void 0===s?void 0:s.type.id)===Be&&dt(e.parent,123)))&&(c=t),c}(i,r),r,c,l)}))}},{key:"autocompleteMetricName",value:function(e,t){var n=this;if(!this.prometheusClient)return e;var a=new Map;return this.prometheusClient.metricNames(t.metricName).then((function(e){var t,r,i=Object(nt.a)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;a.set(o,{label:o,type:"constant"})}}catch(s){i.e(s)}finally{i.f()}if(e.length<=n.maxMetricsMetadata)return null===(t=n.prometheusClient)||void 0===t?void 0:t.metricMetadata()})).then((function(t){if(t){var n,r=Object(nt.a)(a);try{for(r.s();!(n=r.n()).done;){var i=Object(l.a)(n.value,2),o=i[0],s=i[1],c=t[o.replace(/(_count|_sum|_bucket)$/,"")];if(c)if(c.length>1){var u,d=Object(nt.a)(c);try{for(d.s();!(u=d.n()).done;){var p=u.value;""===s.detail?s.detail=p.type:s.detail!==p.type&&(s.detail="unknown",s.info="multiple different definitions for this metric"),""===s.info?s.info=p.help:s.info!==p.help&&(s.info="multiple different definitions for this metric")}}catch(b){d.e(b)}finally{d.f()}}else if(1===c.length){var h=c[0],f=h.type,m=h.help;"histogram"!==f&&"summary"!==f||(o.endsWith("_count")&&(f="counter",m="The total number of observations for: ".concat(m)),o.endsWith("_sum")&&(f="counter",m="The total sum of observations for: ".concat(m)),o.endsWith("_bucket")&&(f="counter",m="The total count of observations for a bucket in the histogram: ".concat(m))),s.detail=f,s.info=m}}}catch(b){r.e(b)}finally{r.f()}}return e.concat(Array.from(a.values()))}))}},{key:"autocompleteLabelName",value:function(e,t){return this.prometheusClient?this.prometheusClient.labelNames(t.metricName).then((function(t){return e.concat(t.map((function(e){return{label:e,type:"constant"}})))})):e}},{key:"autocompleteLabelValue",value:function(e,t){return this.prometheusClient&&t.labelName?this.prometheusClient.labelValues(t.labelName,t.metricName,t.matchers).then((function(t){return e.concat(t.map((function(e){return{label:e,type:"text"}})))})):e}}]),e}(),_t=n(91),wt=n.n(_t),St="/api/v1/label/:name/values",Ct=400,Mt=422,Pt=503,Lt=function(){function e(t){Object(te.a)(this,e),this.lookbackInterval=432e5,this.httpMethod="POST",this.fetchFn=function(e,t){return fetch(e,t)},this.url=t.url,this.errorHandler=t.httpErrorHandler,t.lookbackInterval&&(this.lookbackInterval=t.lookbackInterval),t.fetchFn&&(this.fetchFn=t.fetchFn),t.httpMethod&&(this.httpMethod=t.httpMethod)}return Object(ne.a)(e,[{key:"labelNames",value:function(e){var t=this,n=new Date,a=new Date(n.getTime()-this.lookbackInterval);if(void 0===e||""===e){var r=this.buildRequest("/api/v1/labels",new URLSearchParams({start:a.toISOString(),end:n.toISOString()}));return this.fetchAPI(r.uri,{method:this.httpMethod,body:r.body}).catch((function(e){return t.errorHandler&&t.errorHandler(e),[]}))}return this.series(e).then((function(e){var t,n=new Set,a=Object(nt.a)(e);try{for(a.s();!(t=a.n()).done;)for(var r=t.value,i=0,o=Object.entries(r);i<o.length;i++){var s=Object(l.a)(o[i],1)[0];"__name__"!==s&&n.add(s)}}catch(c){a.e(c)}finally{a.f()}return Array.from(n)}))}},{key:"labelValues",value:function(e,t,n){var a=this,r=new Date,i=new Date(r.getTime()-this.lookbackInterval);if(!t||0===t.length){var o=new URLSearchParams({start:i.toISOString(),end:r.toISOString()});return this.fetchAPI("".concat(St.replace(/:name/gi,e),"?").concat(o)).catch((function(e){return a.errorHandler&&a.errorHandler(e),[]}))}return this.series(t,n,e).then((function(t){var n,a=new Set,r=Object(nt.a)(t);try{for(r.s();!(n=r.n()).done;)for(var i=n.value,o=0,s=Object.entries(i);o<s.length;o++){var c=Object(l.a)(s[o],2),u=c[0],d=c[1];"__name__"!==u&&(u===e&&a.add(d))}}catch(p){r.e(p)}finally{r.f()}return Array.from(a)}))}},{key:"metricMetadata",value:function(){var e=this;return this.fetchAPI("/api/v1/metadata").catch((function(t){return e.errorHandler&&e.errorHandler(t),{}}))}},{key:"series",value:function(e,t,n){var a=this,r=new Date,i=new Date(r.getTime()-this.lookbackInterval),o=this.buildRequest("/api/v1/series",new URLSearchParams({start:i.toISOString(),end:r.toISOString(),"match[]":ct(e,t,n)}));return this.fetchAPI(o.uri,{method:this.httpMethod,body:o.body}).catch((function(e){return a.errorHandler&&a.errorHandler(e),[]}))}},{key:"metricNames",value:function(){return this.labelValues("__name__")}},{key:"fetchAPI",value:function(e,t){return this.fetchFn(this.url+e,t).then((function(e){if(!e.ok&&![Ct,Mt,Pt].includes(e.status))throw new Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){if("error"===e.status)throw new Error(void 0!==e.error?e.error:'missing "error" field in response JSON');if(void 0===e.data)throw new Error('missing "data" field in response JSON');return e.data}))}},{key:"buildRequest",value:function(e,t){var n=e,a=t;return"GET"===this.httpMethod&&(n="".concat(n,"?").concat(t),a=null),{uri:n,body:a}}}]),e}(),$t=function(){function e(t){Object(te.a)(this,e);var n=t&&t.maxAge?t.maxAge:3e5;this.completeAssociation=new wt.a(n),this.metricMetadata={},this.labelValues=new wt.a(n),this.labelNames=[],(null===t||void 0===t?void 0:t.initialMetricList)&&this.setLabelValues("__name__",t.initialMetricList)}return Object(ne.a)(e,[{key:"setAssociations",value:function(e,t){var n=this;t.forEach((function(t){var a=n.completeAssociation.get(e);a||(a=new Map,n.completeAssociation.set(e,a));for(var r=0,i=Object.entries(t);r<i.length;r++){var o=Object(l.a)(i[r],2),s=o[0],c=o[1];if("__name__"!==s){var u=a.get(s);void 0===u?a.set(s,new Set([c])):u.add(c)}}}))}},{key:"setMetricMetadata",value:function(e){this.metricMetadata=e}},{key:"getMetricMetadata",value:function(){return this.metricMetadata}},{key:"setLabelNames",value:function(e){this.labelNames=e}},{key:"getLabelNames",value:function(e){if(!e||0===e.length)return this.labelNames;var t=this.completeAssociation.get(e);return t?Array.from(t.keys()):[]}},{key:"setLabelValues",value:function(e,t){this.labelValues.set(e,t)}},{key:"getLabelValues",value:function(e,t){if(!t||0===t.length){var n=this.labelValues.get(e);return n||[]}var a=this.completeAssociation.get(t);if(a){var r=a.get(e);return r?Array.from(r):[]}return[]}}]),e}(),Et=function(){function e(t,n){Object(te.a)(this,e),this.client=t,this.cache=new $t(n)}return Object(ne.a)(e,[{key:"labelNames",value:function(e){var t=this,n=this.cache.getLabelNames(e);return n&&n.length>0?Promise.resolve(n):void 0===e||""===e?this.client.labelNames().then((function(e){return t.cache.setLabelNames(e),e})):this.series(e).then((function(){return t.cache.getLabelNames(e)}))}},{key:"labelValues",value:function(e,t){var n=this,a=this.cache.getLabelValues(e,t);return a&&a.length>0?Promise.resolve(a):void 0===t||""===t?this.client.labelValues(e).then((function(t){return n.cache.setLabelValues(e,t),t})):this.series(t).then((function(){return n.cache.getLabelValues(e,t)}))}},{key:"metricMetadata",value:function(){var e=this,t=this.cache.getMetricMetadata();return t&&Object.keys(t).length>0?Promise.resolve(t):this.client.metricMetadata().then((function(t){return e.cache.setMetricMetadata(t),e.cache.getMetricMetadata()}))}},{key:"series",value:function(e){var t=this;return this.client.series(e).then((function(n){return t.cache.setAssociations(e,n),n}))}},{key:"metricNames",value:function(){return this.labelValues("__name__")}}]),e}();function Nt(e){return(null===e||void 0===e?void 0:e.completeStrategy)?e.completeStrategy:(null===e||void 0===e?void 0:e.remote)?void 0===e.remote.url?new Tt(e.remote,e.maxMetricsMetadata):new Tt(new Et(new Lt(e.remote),e.remote.cache),e.maxMetricsMetadata):new Tt}var Qt,At=n(185),Dt=function(){function e(){Object(te.a)(this,e)}return Object(ne.a)(e,[{key:"promQL",value:function(){return function(e){var t=new bt(e.state);return t.analyze(),t.getDiagnostics()}}}]),e}();function Rt(e,t){return Object(At.a)(e.call(t))}function It(e){return ft.LezerLanguage.define({parser:et.configure({top:e,props:[Object(tt.a)({LineComment:tt.b.comment,LabelName:tt.b.labelName,StringLiteral:tt.b.string,NumberLiteral:tt.b.number,Duration:tt.b.number,"Abs Absent AbsentOverTime Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Time Timestamp Vector Year":tt.b.function(tt.b.variableName),"Avg Bottomk Count Count_values Group Max Min Quantile Stddev Stdvar Sum Topk":tt.b.operatorKeyword,"By Without Bool On Ignoring GroupLeft GroupRight Offset Start End":tt.b.modifier,"And Unless Or":tt.b.logicOperator,"Sub Add Mul Mod Div Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow At":tt.b.operator,UnaryOp:tt.b.arithmeticOperator,"( )":tt.b.paren,"[ ]":tt.b.squareBracket,"{ }":tt.b.brace,"\u26a0":tt.b.invalid})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}})}!function(e){e.PromQL="PromQL",e.MetricName="MetricName"}(Qt||(Qt={}));var Xt=function(){function e(){Object(te.a)(this,e),this.complete=Nt(),this.lint=new Dt,this.enableLinter=!0,this.enableCompletion=!0}return Object(ne.a)(e,[{key:"setComplete",value:function(e){return this.complete=Nt(e),this}},{key:"getComplete",value:function(){return this.complete}},{key:"activateCompletion",value:function(e){return this.enableCompletion=e,this}},{key:"setLinter",value:function(e){return this.lint=e,this}},{key:"getLinter",value:function(){return this.lint}},{key:"activateLinter",value:function(e){return this.enableLinter=e,this}},{key:"asExtension",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt.PromQL,n=It(t),a=[n];if(this.enableCompletion){var r=n.data.of({autocomplete:function(t){return e.complete.promQL(t)}});a=a.concat(r)}return this.enableLinter&&(a=a.concat(Rt(this.lint.promQL,this.lint))),a}}]),e}(),qt=n(175),Ft=new Xt,Vt=new _e.e,zt=function(){function e(t,n){Object(te.a)(this,e),this.complete=void 0,this.queryHistory=void 0,this.complete=t,this.queryHistory=n}return Object(ne.a)(e,[{key:"promQL",value:function(e){var t=this;return Promise.resolve(this.complete.promQL(e)).then((function(n){var a=e.state,r=e.pos,i=Object(we.g)(a).resolve(r,-1),o=null!=n?n.from:i.from;if(0!==o)return n;var s={from:o,to:r,options:t.queryHistory.map((function(e){return{label:e.length<80?e:e.slice(0,76).concat("..."),detail:"past query",apply:e,info:e.length<80?void 0:e}})),span:/^[a-zA-Z0-9_:]+$/};return null!==n&&(s.options=s.options.concat(n.options)),s}))}}]),e}(),Wt=function(e){var t=e.value,n=e.onExpressionChange,a=e.queryHistory,r=e.metricNames,o=e.executeQuery,s=e.loading,c=e.enableAutocomplete,u=e.enableHighlighting,d=e.enableLinter,p=Object(i.useRef)(null),h=Object(i.useRef)(null),f=Object(i.useState)(!1),m=Object(l.a)(f,2),b=m[0],v=m[1],g=j(),x=L().theme;Object(i.useEffect)((function(){Ft.activateCompletion(c).activateLinter(d).setComplete({completeStrategy:new zt(Object(qt.newCompleteStrategy)({remote:{url:g,cache:{initialMetricList:r}}}),a)});var e=[u?Ie:[],Ft.asExtension(),"dark"===x?Re:De],i=h.current;if(null===i){if(!p.current)throw new Error("expected CodeMirror container element to exist");var s=_e.g.create({doc:t,extensions:[Ae,Object(Te.g)(),Object(Se.a)(),_e.g.allowMultipleSelections.of(!0),Object(we.d)(),Object(Me.a)(),Object(Pe.a)(),Object(Ne.a)(),Object(Le.a)(),Te.c.lineWrapping,Te.h.of([].concat(Object(J.a)(Pe.b),Object(J.a)(Ce.a),Object(J.a)(Se.b),Object(J.a)($e.a),Object(J.a)(Ne.b),Object(J.a)(Ee.a))),Object(Te.j)("Expression (press Shift+Enter for newlines)"),Vt.of(e),Te.h.of([{key:"Escape",run:function(e){return e.contentDOM.blur(),!1}}]),_e.j.override(Te.h.of([{key:"Enter",run:function(e){return o(),!0}},{key:"Shift-Enter",run:Ce.b}])),Te.c.updateListener.of((function(e){n(e.state.doc.toString())}))]}),l=new Te.c({state:s,parent:p.current});h.current=l,l.focus()}else i.dispatch(i.state.update({effects:Vt.reconfigure(e)}))}),[c,u,d,o,n,a,x]);return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(le.a,{className:"expression-input",children:[Object($.jsx)(ue.a,{addonType:"prepend",children:Object($.jsx)(de.a,{children:s?Object($.jsx)(C.a,{icon:M.r,spin:!0}):Object($.jsx)(C.a,{icon:M.n})})}),Object($.jsx)("div",{ref:p,className:"cm-expression-input"}),Object($.jsxs)(ue.a,{addonType:"append",children:[Object($.jsx)(S.a,{className:"metrics-explorer-btn",title:"Open metrics explorer",onClick:function(){return v(!0)},children:Object($.jsx)(C.a,{icon:M.j})}),Object($.jsx)(S.a,{className:"execute-btn",color:"primary",onClick:o,children:"Execute"})]})]}),Object($.jsx)(Oe,{show:b,updateShow:v,metrics:r,insertAtCursor:function(e){var t=h.current;if(null!==t){var n=t.state.selection.ranges[0],a=n.from,r=n.to;t.dispatch(t.state.update({changes:{from:a,to:r,insert:e}}))}}})]})},Bt=(n(280),n(281),n(282),n(66));Bt.c.add(M.h,M.i,M.d,M.c,M.b,M.t),Bt.a.watch();var Ht=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(te.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).timeInputRef=o.a.createRef(),e.$time=null,e.getBaseTime=function(){return e.props.time||ee()().valueOf()},e.calcShiftRange=function(){return e.props.range/2},e.increaseTime=function(){var t=e.getBaseTime()+e.calcShiftRange();e.props.onChangeTime(t)},e.decreaseTime=function(){var t=e.getBaseTime()-e.calcShiftRange();e.props.onChangeTime(t)},e.clearTime=function(){e.props.onChangeTime(null)},e.timezone=function(){return e.props.useLocalTime?ee.a.tz.guess():"UTC"},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timeInputRef.current&&(this.$time=r()(this.timeInputRef.current),this.$time.datetimepicker({icons:{today:"fas fa-calendar-check"},buttons:{showClose:!0,showToday:!0},sideBySide:!0,format:"YYYY-MM-DD HH:mm:ss",locale:"en",timeZone:this.timezone(),defaultDate:this.props.time}),this.$time.on("change.datetimepicker",(function(t){var n;t.date&&t.date.valueOf()!==Math.trunc((null===(n=e.props.time)||void 0===n?void 0:n.valueOf())||NaN)&&e.props.onChangeTime(t.date.valueOf())})))}},{key:"componentWillUnmount",value:function(){this.$time.datetimepicker("destroy")}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.time,a=t.useLocalTime;e.time!==n&&this.$time.datetimepicker("date",n?ee()(n):null),e.useLocalTime!==a&&this.$time.datetimepicker("options",{timeZone:this.timezone(),defaultDate:null})}},{key:"render",value:function(){var e=this;return Object($.jsxs)(le.a,{className:"time-input",size:"sm",children:[Object($.jsx)(ue.a,{addonType:"prepend",children:Object($.jsx)(S.a,{title:"Decrease time",onClick:this.decreaseTime,children:Object($.jsx)(C.a,{icon:M.h,fixedWidth:!0})})}),Object($.jsx)(pe.a,{placeholder:this.props.placeholder,innerRef:this.timeInputRef,onFocus:function(){return e.$time.datetimepicker("show")},onBlur:function(){return e.$time.datetimepicker("hide")},onKeyDown:function(t){return["Escape","Enter"].includes(t.key)&&e.$time.datetimepicker("hide")}}),this.props.time&&Object($.jsx)(ue.a,{addonType:"append",children:Object($.jsx)(S.a,{outline:!0,className:"clear-time-btn",title:"Clear time",onClick:this.clearTime,children:Object($.jsx)(C.a,{icon:M.t,fixedWidth:!0})})}),Object($.jsx)(ue.a,{addonType:"append",children:Object($.jsx)(S.a,{title:"Increase time",onClick:this.increaseTime,children:Object($.jsx)(C.a,{icon:M.i,fixedWidth:!0})})})]})}}]),n}(i.Component),Ut=Ht,Yt=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(te.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).rangeRef=o.a.createRef(),e.resolutionRef=o.a.createRef(),e.rangeSteps=[1,10,60,300,900,1800,3600,7200,21600,43200,86400,172800,604800,1209600,2419200,4838400,9676800,15724800,31536e3,63072e3].map((function(e){return 1e3*e})),e.onChangeRangeInput=function(t){var n=Tn(t);null===n?e.changeRangeInput(e.props.range):e.props.onChangeRange(n)},e.changeRangeInput=function(t){e.setCurrentRangeValue(_n(t))},e.increaseRange=function(){var t,n=Object(nt.a)(e.rangeSteps);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.props.range<a)return e.changeRangeInput(a),void e.props.onChangeRange(a)}}catch(r){n.e(r)}finally{n.f()}},e.decreaseRange=function(){var t,n=Object(nt.a)(e.rangeSteps.slice().reverse());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.props.range>a)return e.changeRangeInput(a),void e.props.onChangeRange(a)}}catch(r){n.e(r)}finally{n.f()}},e}return Object(ne.a)(n,[{key:"componentDidUpdate",value:function(e){e.range!==this.props.range&&this.changeRangeInput(this.props.range),e.resolution!==this.props.resolution&&this.setCurrentRangeValue(null!==this.props.resolution?this.props.resolution.toString():"")}},{key:"setCurrentRangeValue",value:function(e){this.rangeRef.current&&(this.rangeRef.current.value=e)}},{key:"render",value:function(){var e=this;return Object($.jsxs)(_.a,{inline:!0,className:"graph-controls",onSubmit:function(e){return e.preventDefault()},children:[Object($.jsxs)(le.a,{className:"range-input",size:"sm",children:[Object($.jsx)(ue.a,{addonType:"prepend",children:Object($.jsx)(S.a,{title:"Decrease range",onClick:this.decreaseRange,children:Object($.jsx)(C.a,{icon:M.k,fixedWidth:!0})})}),Object($.jsx)(pe.a,{defaultValue:_n(this.props.range),innerRef:this.rangeRef,onBlur:function(){e.rangeRef.current&&e.onChangeRangeInput(e.rangeRef.current.value)},onKeyDown:function(t){return"Enter"===t.key&&e.rangeRef.current&&e.onChangeRangeInput(e.rangeRef.current.value)}}),Object($.jsx)(ue.a,{addonType:"append",children:Object($.jsx)(S.a,{title:"Increase range",onClick:this.increaseRange,children:Object($.jsx)(C.a,{icon:M.m,fixedWidth:!0})})})]}),Object($.jsx)(Ut,{time:this.props.endTime,useLocalTime:this.props.useLocalTime,range:this.props.range,placeholder:"End time",onChangeTime:this.props.onChangeEndTime}),Object($.jsx)(pe.a,{placeholder:"Res. (s)",className:"resolution-input",defaultValue:null!==this.props.resolution?this.props.resolution.toString():"",innerRef:this.resolutionRef,onBlur:function(){if(e.resolutionRef.current){var t=parseInt(e.resolutionRef.current.value);e.props.onChangeResolution(t||null)}},bsSize:"sm"}),Object($.jsxs)(w.a,{className:"stacked-input",size:"sm",children:[Object($.jsx)(S.a,{title:"Show unstacked line graph",onClick:function(){return e.props.onChangeStacking(!1)},active:!this.props.stacked,children:Object($.jsx)(C.a,{icon:M.f,fixedWidth:!0})}),Object($.jsx)(S.a,{title:"Show stacked graph",onClick:function(){return e.props.onChangeStacking(!0)},active:this.props.stacked,children:Object($.jsx)(C.a,{icon:M.e,fixedWidth:!0})})]}),Object($.jsx)(w.a,{className:"show-exemplars",size:"sm",children:this.props.showExemplars?Object($.jsx)(S.a,{title:"Hide exemplars",onClick:function(){return e.props.onChangeShowExemplars(!1)},active:!0,children:"Hide Exemplars"}):Object($.jsx)(S.a,{title:"Show exemplars",onClick:function(){return e.props.onChangeShowExemplars(!0)},active:!1,children:"Show Exemplars"})})]})}}]),n}(i.Component),Gt=Yt,Zt=n(180),Jt=function(e){var t=e.labels,n=e.format;return null===t?Object($.jsx)($.Fragment,{children:"scalar"}):n?function(){var e=[],n=!0;for(var a in t)"__name__"!==a&&(e.push(Object($.jsxs)("span",{children:[!n&&", ",Object($.jsx)("span",{className:"legend-label-name",children:a}),"=",Object($.jsxs)("span",{className:"legend-label-value",children:['"',t[a],'"']})]},a)),n&&(n=!1));return Object($.jsxs)("div",{children:[Object($.jsx)("span",{className:"legend-metric-name",children:t?t.__name__:""}),Object($.jsx)("span",{className:"legend-label-brace",children:"{"}),e,Object($.jsx)("span",{className:"legend-label-brace",children:"}"})]})}():Object($.jsx)($.Fragment,{children:kn(t)})},Kt=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(te.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={selectedIndexes:[]},e.handleSeriesSelect=function(t){return function(n){var a=e.state.selectedIndexes,r=[t];if(n.ctrlKey||n.metaKey){var i=e.props.chartData;r=a.includes(t)?a.filter((function(e){return e!==t})):0===a.length?i.reduce((function(e,n,a){return a===t?e:[].concat(Object(J.a)(e),[a])}),[]):[].concat(Object(J.a)(a),[t])}else 1===a.length&&a.includes(t)&&(r=[]);e.setState({selectedIndexes:r}),e.props.onSeriesToggle(r,t)}},e}return Object(ne.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.shouldReset&&e.shouldReset!==this.props.shouldReset&&this.setState({selectedIndexes:[]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.chartData,a=t.onLegendMouseOut,r=t.onHover,i=this.state.selectedIndexes,o=n.length>1&&0===i.length;return Object($.jsxs)("div",{className:"graph-legend",onMouseOut:o?a:void 0,children:[n.map((function(t){var a=t.index,s=t.color,c=t.labels;return Object($.jsxs)("div",{style:{opacity:0===i.length||i.includes(a)?1:.5},onClick:n.length>1?e.handleSeriesSelect(a):void 0,onMouseOver:o?r(a):void 0,className:"legend-item",children:[Object($.jsx)("span",{className:"legend-swatch",style:{backgroundColor:s}}),Object($.jsx)(Jt,{labels:c,format:!0})]},a)})),n.length>1&&Object($.jsxs)("div",{className:"pl-1 mt-1 text-muted",style:{fontSize:13},children:["Click: select series, ",navigator.platform.includes("Mac")?"CMD":"CTRL"," + click: toggle multiple series"]})]})}}]),n}(i.PureComponent),en=function(e){if(null===e)return"null";var t=Math.abs(e);if(t>=1e24)return(e/1e24).toFixed(2)+"Y";if(t>=1e21)return(e/1e21).toFixed(2)+"Z";if(t>=1e18)return(e/1e18).toFixed(2)+"E";if(t>=1e15)return(e/1e15).toFixed(2)+"P";if(t>=1e12)return(e/1e12).toFixed(2)+"T";if(t>=1e9)return(e/1e9).toFixed(2)+"G";if(t>=1e6)return(e/1e6).toFixed(2)+"M";if(t>=1e3)return(e/1e3).toFixed(2)+"k";if(t>=1)return e.toFixed(2);if(0===t)return e.toFixed(2);if(t<1e-23)return(e/1e-24).toFixed(2)+"y";if(t<1e-20)return(e/1e-21).toFixed(2)+"z";if(t<1e-17)return(e/1e-18).toFixed(2)+"a";if(t<1e-14)return(e/1e-15).toFixed(2)+"f";if(t<1e-11)return(e/1e-12).toFixed(2)+"p";if(t<1e-8)return(e/1e-9).toFixed(2)+"n";if(t<1e-5)return(e/1e-6).toFixed(2)+"\xb5";if(t<.01)return(e/.001).toFixed(2)+"m";if(t<=1)return e.toFixed(2);throw Error("couldn't format a value, this is a bug")},tn=function(e,t,n){var a=r.a.color.parse(e),i=a.r,o=a.g,s=a.b;if(!n)return"rgba(".concat(i,", ").concat(o,", ").concat(s,", ").concat(t,")");var c=255*(1-t);return"rgb(".concat(Math.round(c+t*i),",").concat(Math.round(c+t*o),",").concat(Math.round(c+t*s),")")},nn=function(e,t){return function(n,a){return Object(R.a)(Object(R.a)({},n),{},{color:tn(n.color,a!==e?.3:1,t)})}},an=function(e,t){return{grid:{hoverable:!0,clickable:!0,autoHighlight:!0,mouseActiveRadius:100},legend:{show:!1},xaxis:{mode:"time",showTicks:!0,showMinorTicks:!0,timeBase:"milliseconds",timezone:t?"browser":void 0},yaxis:{tickFormatter:en},crosshair:{mode:"xy",color:"#bbb"},tooltip:{show:!0,cssClass:"graph-tooltip",content:function(e,n,a,r){var i=r.series,o=i.labels,s=i.color,c=ee()(n);t||(c=c.utc());var l=function(e){return'\n            <div class="labels">\n              '.concat(0===Object.keys(e).length?'<div class="mb-1 font-italic">no labels</div>':"","\n              ").concat(e.__name__?'<div class="mb-1"><strong>'.concat(e.__name__,"</strong></div>"):"","\n              ").concat(Object.keys(e).filter((function(e){return"__name__"!==e})).map((function(t){return'<div class="mb-1"><strong>'.concat(t,"</strong>: ").concat(jn(e[t]),"</div>")})).join(""),"\n            </div>")};return'\n            <div class="date">'.concat(c.format("YYYY-MM-DD HH:mm:ss Z"),'</div>\n            <div>\n              <span class="detail-swatch" style="background-color: ').concat(s,'"></span>\n              <span>').concat(o.__name__||"value",": <strong>").concat(a,'</strong></span>\n            </div>\n            <div class="mt-2 mb-1 font-weight-bold">').concat("seriesLabels"in i?"Trace exemplar:":"Series:","</div>\n            ").concat(l(o),"\n            ").concat("seriesLabels"in i?'\n            <div class="mt-2 mb-1 font-weight-bold">Associated series:</div>'.concat(l(i.seriesLabels),"\n"):"","\n          ").trimEnd()},defaultTheme:!1,lines:!0},series:{stack:!1,lines:{lineWidth:e?1:2,steps:!1,fill:e},shadowSize:0},selection:{mode:"x"}}},rn=function(e){var t,n=e.queryParams,a=e.data,i=e.exemplars,o=e.stacked,s=function(e){var t=["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],n=t.length,a=0;return e.result.map((function(e,i){return i%n===0&&i&&(a=a>=0?a<.5?-a-.2:0:-a),r.a.color.parse(t[i%n]||"#666").scale("rgb",1+a)}))}(a),c=n,l=c.startTime,u=c.endTime,d=c.resolution,p=0,h=[],f={},m=Object(nt.a)(i||[]);try{for(m.s();!(t=m.n()).done;){var b,v=t.value,g=Object(nt.a)(v.exemplars);try{for(g.s();!(b=g.n()).done;){var x=b.value,O=x.labels,y=x.value,j=x.timestamp,k=on(y)||0;p+=k,h.push(k);var T=1e3*Math.floor(j/((u-l)/60)*.8);f[T]||(f[T]=[]),f[T].push({seriesLabels:v.seriesLabels,labels:O,data:[[1e3*j,k]],points:{symbol:sn},color:"#0275d8"})}}catch(w){g.e(w)}finally{g.f()}}}catch(w){m.e(w)}finally{m.f()}var _=cn(p,h);return{series:a.result.map((function(e,t){for(var n=e.values,a=e.metric,r=[],i=0,c=l;c<=u;c+=d){var p=n[i];n.length>i&&p[0]<c+d/100?(r.push([1e3*p[0],on(p[1])]),i++):r.push([1e3*c,null])}return{labels:null!==a?a:{},color:s[t].toString(),stack:o,data:r,index:t}})),exemplars:Object.values(f).flatMap((function(e){return 1===e.length?e[0]:e.sort((function(e,t){return ln(t)-ln(e)})).reduce((function(e,t){if(0===e.length)e.push(t);else{var n=e[e.length-1];ln(n)-ln(t)>=2*_&&e.push(t)}return e}),[])}))}},on=function(e){var t=parseFloat(e);return isNaN(t)?null:t},sn=function(e,t,n){n-=3.5,t>e.canvas.clientWidth-59&&(t=e.canvas.clientWidth-59),n>e.canvas.clientHeight-40&&(n=e.canvas.clientHeight-40),e.translate(t,n),e.rotate(Math.PI/4),e.translate(-t,-n),e.fillStyle="#92bce1",e.fillRect(t,n,7,7),e.strokeStyle="#0275d8",e.lineWidth=1,e.strokeRect(t,n,7,7)},cn=function(e,t){var n=e/t.length,a=0;return t.map((function(e){return a+=Math.pow(e-n,2)})),a/=t.length,Math.sqrt(a)},ln=function(e){return e.data[0][1]};n(283),n(284),n(285),n(286),n(287),n(288);var un,dn=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(te.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).chartRef=o.a.createRef(),e.$chart=void 0,e.rafID=0,e.selectedSeriesIndexes=[],e.state={chartData:rn(e.props),selectedExemplarLabels:{exemplar:{},series:{}}},e.plot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[].concat(Object(J.a)(e.state.chartData.series),Object(J.a)(e.state.chartData.exemplars));e.chartRef.current&&(e.destroyPlot(),e.$chart=r.a.plot(r()(e.chartRef.current),t,an(e.props.stacked,e.props.useLocalTime)))},e.destroyPlot=function(){yn(e.$chart)&&e.$chart.destroy()},e.handleSeriesSelect=function(t,n){var a=e.state.chartData;e.plot(1===e.selectedSeriesIndexes.length&&e.selectedSeriesIndexes.includes(n)?[].concat(Object(J.a)(a.series.map(nn(n,e.props.stacked))),Object(J.a)(a.exemplars)):[].concat(Object(J.a)(a.series.filter((function(e,n){return t.includes(n)}))),Object(J.a)(a.exemplars.filter((function(e){e:for(var n in t){for(var r in a.series[t[n]].labels)if(e.seriesLabels[r]!==a.series[t[n]].labels[r])continue e;return!0}return!1}))))),e.selectedSeriesIndexes=t},e.handleSeriesHover=function(t){return function(){e.rafID&&cancelAnimationFrame(e.rafID),e.rafID=requestAnimationFrame((function(){e.plotSetAndDraw([].concat(Object(J.a)(e.state.chartData.series.map(nn(t,e.props.stacked))),Object(J.a)(e.state.chartData.exemplars)))}))}},e.handleLegendMouseOut=function(){cancelAnimationFrame(e.rafID),e.plotSetAndDraw()},e.handleResize=function(){yn(e.$chart)&&e.plot(e.$chart.getData())},e}return Object(ne.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.data,r=n.stacked,i=n.useLocalTime,o=n.showExemplars;e.data!==a?(this.selectedSeriesIndexes=[],this.setState({chartData:rn(this.props)},this.plot)):e.stacked!==r&&this.setState({chartData:rn(this.props)},(function(){0===t.selectedSeriesIndexes.length?t.plot():t.plot([].concat(Object(J.a)(t.state.chartData.series.filter((function(e,n){return t.selectedSeriesIndexes.includes(n)}))),Object(J.a)(t.state.chartData.exemplars)))})),e.useLocalTime!==i&&this.plot(),e.showExemplars===o||o||this.setState({chartData:{series:this.state.chartData.series,exemplars:[]},selectedExemplarLabels:{exemplar:{},series:{}}},(function(){t.plot()}))}},{key:"componentDidMount",value:function(){var e=this;this.plot(),r()(".graph-".concat(this.props.id)).bind("plotclick",(function(t,n,a){a&&"seriesLabels"in a.series?e.setState({selectedExemplarLabels:{exemplar:a.series.labels,series:a.series.seriesLabels},chartData:e.state.chartData}):e.setState({chartData:e.state.chartData,selectedExemplarLabels:{exemplar:{},series:{}}})})),r()(".graph-".concat(this.props.id)).bind("plotselected",(function(t,n){yn(e.$chart)&&(e.$chart.clearSelection(),e.props.handleTimeRangeSelection(n.xaxis.from,n.xaxis.to))}))}},{key:"componentWillUnmount",value:function(){this.destroyPlot()}},{key:"plotSetAndDraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[].concat(Object(J.a)(this.state.chartData.series),Object(J.a)(this.state.chartData.exemplars));yn(this.$chart)&&(this.$chart.setData(e),this.$chart.draw())}},{key:"render",value:function(){var e=this,t=this.state,n=t.chartData,a=t.selectedExemplarLabels;return Object($.jsxs)("div",{className:"graph-".concat(this.props.id),children:[Object($.jsx)(Zt.a,{handleWidth:!0,onResize:this.handleResize,skipOnMount:!0}),Object($.jsx)("div",{className:"graph-chart",ref:this.chartRef}),Object.keys(a.exemplar).length>0?Object($.jsxs)("div",{className:"graph-selected-exemplar",children:[Object($.jsx)("div",{className:"font-weight-bold",children:"Selected exemplar labels:"}),Object($.jsx)("div",{className:"labels mt-1 ml-3",children:Object.keys(a.exemplar).map((function(e,t){return Object($.jsxs)("div",{children:[Object($.jsx)("strong",{children:e}),": ",a.exemplar[e]]},t)}))}),Object($.jsx)("div",{className:"font-weight-bold mt-3",children:"Associated series labels:"}),Object($.jsx)("div",{className:"labels mt-1 ml-3",children:Object.keys(a.series).map((function(e,t){return Object($.jsxs)("div",{children:[Object($.jsx)("strong",{children:e}),": ",a.series[e]]},t)}))}),Object($.jsx)(S.a,{size:"small",color:"light",style:{position:"absolute",top:5,right:5},title:"Hide selected exemplar details",onClick:function(){return e.setState({chartData:e.state.chartData,selectedExemplarLabels:{exemplar:{},series:{}}})},children:Object($.jsx)(C.a,{icon:M.t})})]}):null,Object($.jsx)(Kt,{shouldReset:0===this.selectedSeriesIndexes.length,chartData:n.series,onHover:this.handleSeriesHover,onLegendMouseOut:this.handleLegendMouseOut,onSeriesToggle:this.handleSeriesSelect}),Object($.jsx)("br",{style:{clear:"both"}})]})}}]),n}(i.PureComponent),pn=dn,hn=function(e){var t=e.data,n=e.exemplars,a=e.stacked,r=e.useLocalTime,i=e.lastQueryParams,o=e.showExemplars,s=e.handleTimeRangeSelection,c=e.id;return yn(t)?0===t.result.length?Object($.jsx)(B.a,{color:"secondary",children:"Empty query result"}):"matrix"!==t.resultType?Object($.jsxs)(B.a,{color:"danger",children:["Query result is of wrong type '",t.resultType,"', should be 'matrix' (range vector)."]}):Object($.jsx)(pn,{data:t,exemplars:n,stacked:a,useLocalTime:r,showExemplars:o,handleTimeRangeSelection:s,queryParams:i,id:c}):Object($.jsx)(B.a,{color:"light",children:"No data queried yet"})},fn=function(e){return e.length>1e4?e.slice(0,1e4):e},mn=function(e){var t=e.data;if(null===t)return Object($.jsx)(B.a,{color:"light",children:"No data queried yet"});if(null===t.result||0===t.result.length)return Object($.jsx)(B.a,{color:"secondary",children:"Empty query result"});var n=[],a=!1,r=t.result.length<=1e3;switch(t.resultType){case"vector":a=(n=fn(t.result).map((function(e,t){return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:Object($.jsx)(Jt,{labels:e.metric,format:r})}),Object($.jsx)("td",{children:e.value[1]})]},t)}))).length!==t.result.length;break;case"matrix":a=(n=fn(t.result).map((function(e,t){var n=e.values.map((function(e){return e[1]+" @"+e[0]})).join("\n");return Object($.jsxs)("tr",{style:{whiteSpace:"pre"},children:[Object($.jsx)("td",{children:Object($.jsx)(Jt,{labels:e.metric,format:r})}),Object($.jsx)("td",{children:n})]},t)}))).length!==t.result.length;break;case"scalar":n.push(Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:"scalar"}),Object($.jsx)("td",{children:t.result[1]})]},"0"));break;case"string":n.push(Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:"string"}),Object($.jsx)("td",{children:t.result[1]})]},"0"));break;default:return Object($.jsx)(B.a,{color:"danger",children:"Unsupported result value type"})}return Object($.jsxs)($.Fragment,{children:[a&&Object($.jsxs)(B.a,{color:"danger",children:[Object($.jsx)("strong",{children:"Warning:"})," Fetched ",t.result.length," metrics, only displaying first ",n.length,"."]}),!r&&Object($.jsxs)(B.a,{color:"secondary",children:[Object($.jsx)("strong",{children:"Notice:"})," Showing more than ",1e3," series, turning off label formatting for performance reasons."]}),Object($.jsx)(Z.a,{hover:!0,size:"sm",className:"data-table",children:Object($.jsx)("tbody",{children:n})})]})},bn=function(e){var t=e.loadTime,n=e.resolution,a=e.resultSeries;return Object($.jsx)("div",{className:"query-stats",children:Object($.jsxs)("span",{className:"float-right",children:["Load time: ",t,"ms \u2002 Resolution: ",n,"s \u2002 Result series: ",a]})})};!function(e){e.Graph="graph",e.Table="table"}(un||(un={}));var vn={type:un.Table,expr:"",range:36e5,endTime:null,resolution:null,stacked:!1,showExemplars:!1},gn=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(e){var a;return Object(te.a)(this,n),(a=t.call(this,e)).abortInFlightFetch=null,a.executeQuery=Object(q.a)(X.a.mark((function e(){var t,n,r,i,o,s,c,l,u,d,p,h,f,m,b,v;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.exprInputValue,n=Date.now(),a.props.onExecuteQuery(t),a.props.options.expr!==t&&a.setOptions({expr:t}),""!==t){e.next=6;break}return e.abrupt("return");case 6:a.abortInFlightFetch&&(a.abortInFlightFetch(),a.abortInFlightFetch=null),r=new AbortController,a.abortInFlightFetch=function(){return r.abort()},a.setState({loading:!0}),i=a.getEndTime().valueOf()/1e3,o=i-a.props.options.range/1e3,s=a.props.options.resolution||Math.max(Math.floor(a.props.options.range/25e4),1),c=new URLSearchParams({query:t}),e.t0=a.props.options.type,e.next="graph"===e.t0?17:"table"===e.t0?22:25;break;case 17:return l="query_range",c.append("start",o.toString()),c.append("end",i.toString()),c.append("step",s.toString()),e.abrupt("break",26);case 22:return l="query",c.append("time",i.toString()),e.abrupt("break",26);case 25:throw new Error('Invalid panel type "'+a.props.options.type+'"');case 26:return e.prev=26,e.next=29,fetch("".concat(a.props.pathPrefix,"/").concat(F,"/").concat(l,"?").concat(c),{cache:"no-store",credentials:"same-origin",signal:r.signal}).then((function(e){return e.json()}));case 29:if("success"===(u=e.sent).status){e.next=32;break}throw new Error(u.error||"invalid response JSON");case 32:if("graph"!==a.props.options.type||!a.props.options.showExemplars){e.next=39;break}return c.delete("step"),e.next=36,fetch("".concat(a.props.pathPrefix,"/").concat(F,"/query_exemplars?").concat(c),{cache:"no-store",credentials:"same-origin",signal:r.signal}).then((function(e){return e.json()}));case 36:if("success"===(d=e.sent).status){e.next=39;break}throw new Error(d.error||"invalid response JSON");case 39:h=0,u.data&&(f=u.data,m=f.resultType,b=f.result,"scalar"===m?h=1:b&&b.length>0&&(h=b.length)),a.setState({error:null,data:u.data,exemplars:null===(p=d)||void 0===p?void 0:p.data,warnings:u.warnings,lastQueryParams:{startTime:o,endTime:i,resolution:s},stats:{loadTime:Date.now()-n,resolution:s,resultSeries:h},loading:!1}),a.abortInFlightFetch=null,e.next=51;break;case 45:if(e.prev=45,e.t1=e.catch(26),"AbortError"!==(v=e.t1).name){e.next=50;break}return e.abrupt("return");case 50:a.setState({error:"Error executing query: "+v.message,loading:!1});case 51:case"end":return e.stop()}}),e,null,[[26,45]])}))),a.handleExpressionChange=function(e){a.setState({exprInputValue:e})},a.handleChangeRange=function(e){a.setOptions({range:e})},a.getEndTime=function(){return null===a.props.options.endTime?ee()():a.props.options.endTime},a.handleChangeEndTime=function(e){a.setOptions({endTime:e})},a.handleChangeResolution=function(e){a.setOptions({resolution:e})},a.handleChangeType=function(e){a.props.options.type!==e&&(a.setState({data:null}),a.setOptions({type:e}))},a.handleChangeStacking=function(e){a.setOptions({stacked:e})},a.handleChangeShowExemplars=function(e){a.setOptions({showExemplars:e})},a.handleTimeRangeSelection=function(e,t){a.setOptions({range:t-e,endTime:t})},a.state={data:null,exemplars:[],lastQueryParams:null,loading:!1,warnings:null,error:null,stats:null,exprInputValue:e.options.expr},a}return Object(ne.a)(n,[{key:"componentDidUpdate",value:function(e){var t=e.options,n=this.props.options,a=n.endTime,r=n.range,i=n.resolution,o=n.showExemplars,s=n.type;t.endTime===a&&t.range===r&&t.resolution===i&&t.type===s&&o===t.showExemplars||this.executeQuery()}},{key:"componentDidMount",value:function(){this.executeQuery()}},{key:"setOptions",value:function(e){var t=Object(R.a)(Object(R.a)({},this.props.options),e);this.props.onOptionsChanged(t)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.pastQueries,r=n.metricNames,i=n.options;return Object($.jsxs)("div",{className:"panel",children:[Object($.jsx)(ie.a,{children:Object($.jsx)(oe.a,{children:this.props.useExperimentalEditor?Object($.jsx)(Wt,{value:this.state.exprInputValue,onExpressionChange:this.handleExpressionChange,executeQuery:this.executeQuery,loading:this.state.loading,enableAutocomplete:this.props.enableAutocomplete,enableHighlighting:this.props.enableHighlighting,enableLinter:this.props.enableLinter,queryHistory:a,metricNames:r}):Object($.jsx)(ke,{value:this.state.exprInputValue,onExpressionChange:this.handleExpressionChange,executeQuery:this.executeQuery,loading:this.state.loading,enableAutocomplete:this.props.enableAutocomplete,queryHistory:a,metricNames:r})})}),Object($.jsx)(ie.a,{children:Object($.jsx)(oe.a,{children:this.state.error&&Object($.jsx)(B.a,{color:"danger",children:this.state.error})})}),null===(e=this.state.warnings)||void 0===e?void 0:e.map((function(e,t){return Object($.jsx)(ie.a,{children:Object($.jsx)(oe.a,{children:e&&Object($.jsx)(B.a,{color:"warning",children:e})})},t)})),Object($.jsx)(ie.a,{children:Object($.jsxs)(oe.a,{children:[Object($.jsxs)(f.a,{tabs:!0,children:[Object($.jsx)(m.a,{children:Object($.jsx)(b.a,{className:"table"===i.type?"active":"",onClick:function(){return t.handleChangeType(un.Table)},children:"Table"})}),Object($.jsx)(m.a,{children:Object($.jsx)(b.a,{className:"graph"===i.type?"active":"",onClick:function(){return t.handleChangeType(un.Graph)},children:"Graph"})}),!this.state.loading&&!this.state.error&&this.state.stats&&Object($.jsx)(bn,Object(R.a)({},this.state.stats))]}),Object($.jsxs)(se.a,{activeTab:i.type,children:[Object($.jsx)(ce.a,{tabId:"table",children:"table"===i.type&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{className:"table-controls",children:Object($.jsx)(Ut,{time:i.endTime,useLocalTime:this.props.useLocalTime,range:i.range,placeholder:"Evaluation time",onChangeTime:this.handleChangeEndTime})}),Object($.jsx)(mn,{data:this.state.data})]})}),Object($.jsx)(ce.a,{tabId:"graph",children:"graph"===this.props.options.type&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Gt,{range:i.range,endTime:i.endTime,useLocalTime:this.props.useLocalTime,resolution:i.resolution,stacked:i.stacked,showExemplars:i.showExemplars,onChangeRange:this.handleChangeRange,onChangeEndTime:this.handleChangeEndTime,onChangeResolution:this.handleChangeResolution,onChangeStacking:this.handleChangeStacking,onChangeShowExemplars:this.handleChangeShowExemplars}),Object($.jsx)(hn,{data:this.state.data,exemplars:this.state.exemplars,stacked:i.stacked,useLocalTime:this.props.useLocalTime,showExemplars:i.showExemplars,lastQueryParams:this.state.lastQueryParams,id:this.props.id,handleTimeRangeSelection:this.handleTimeRangeSelection})]})})]})]})}),Object($.jsx)(ie.a,{children:Object($.jsx)(oe.a,{children:Object($.jsx)(S.a,{className:"float-right",color:"link",onClick:this.props.removePanel,size:"sm",children:"Remove Panel"})})})]})}}]),n}(i.Component),xn=function(){return"_".concat(Math.random().toString(36).substr(2,9))},On=function(e){return e.length>0},yn=function(e){return null!==e&&void 0!==e},jn=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'/]/g,(function(e){return t[e]}))},kn=function(e){if(null===e)return"scalar";var t=(e.__name__||"")+"{",n=[];for(var a in e)"__name__"!==a&&n.push(a+'="'+e[a]+'"');return t+=n.join(", ")+"}"},Tn=function(e){if(""===e)return null;if("0"===e)return 0;var t=new RegExp("^(([0-9]+)y)?(([0-9]+)w)?(([0-9]+)d)?(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?(([0-9]+)ms)?$"),n=e.match(t);if(!n)return null;var a=0,r=function(e,t){if(void 0!==n[e]){var r=parseInt(n[e]);a+=r*t}};return r(2,31536e6),r(4,6048e5),r(6,864e5),r(8,36e5),r(10,6e4),r(12,1e3),r(14,1),a},_n=function(e){var t=e,n="";if(0===t)return"0s";var a=function(e,a,r){if(!r||t%a===0){var i=Math.floor(t/a);i>0&&(n+="".concat(i).concat(e),t-=i*a)}};return a("y",31536e6,!0),a("w",6048e5,!0),a("d",864e5,!1),a("h",36e5,!1),a("m",6e4,!1),a("s",1e3,!1),a("ms",1,!1),n};function wn(e){return ee.a.utc(e).valueOf()}var Sn=function(e){var t=e<0?"-":"",n=e<0?-1*e:e,a=ee.a.duration(n,"ms"),r=Math.floor(a.milliseconds()),i=Math.floor(a.seconds()),o=Math.floor(a.minutes()),s=Math.floor(a.hours()),c=Math.floor(a.asDays());return 0!==c?"".concat(t).concat(c,"d ").concat(s,"h ").concat(o,"m ").concat(i,"s"):0!==s?"".concat(t).concat(s,"h ").concat(o,"m ").concat(i,"s"):0!==o?"".concat(t).concat(o,"m ").concat(i,"s"):0!==i?"".concat(t).concat(i,".").concat(r,"s"):n>0?"".concat(t).concat(n.toFixed(3),"ms"):"0s"},Cn=function(e,t){var n=wn(e);return n<0?"Never":Sn(t-n)+" ago"},Mn=/^g\d+\..+=.+$/,Pn=function(e){if(""===e)return[];var t=e.substring(1).split("&");return t.reduce((function(e,n,a){var r=e.length,i="g".concat(r,".");if(n.startsWith("".concat(i,"expr="))){var o=i.length;return[].concat(Object(J.a)(e),[{id:xn(),key:"".concat(r),options:t.slice(a).reduce((function(e,t){return t.startsWith(i)&&Mn.test(t)?Object(R.a)(Object(R.a)({},e),Ln(t.substring(o))):e}),vn)}])}return e}),[])},Ln=function(e){var t=e.split("="),n=Object(l.a)(t,2),a=n[0],r=n[1],i=decodeURIComponent(r.replace(/\+/g," "));switch(a){case"expr":return{expr:i};case"tab":return{type:"0"===i?un.Graph:un.Table};case"stacked":return{stacked:"1"===i};case"show_exemplars":return{showExemplars:"1"===i};case"range_input":var o=Tn(i);return yn(o)?{range:o}:{};case"end_input":case"moment_input":return{endTime:wn(i)};case"step_input":var s=parseInt(i);return s>0?{resolution:s}:{}}return{}},$n=function(e){var t=e.key,n=e.options,a=function(e){return function(t,n){return"g".concat(e,".").concat(t,"=").concat(encodeURIComponent(n))}}(t),r=n.expr,i=n.type,o=n.stacked,s=n.range,c=n.endTime,l=n.resolution,u=n.showExemplars,d=!!yn(c)&&function(e){return ee.a.utc(e).format("YYYY-MM-DD HH:mm:ss")}(c);return[a("expr",r),a("tab",i===un.Graph?0:1),a("stacked",o?1:0),a("show_exemplars",u?1:0),a("range_input",_n(s)),d?"".concat(a("end_input",d),"&").concat(a("moment_input",d)):"",yn(l)?a("step_input",l):""].filter(On).join("&")},En=function(e){return"../graph?g0.expr=".concat(encodeURIComponent(e),"&g0.tab=1&g0.stacked=0&g0.show_exemplars=0.g0.range_input=1h.")},Nn=function(e,t){return Object.entries(e).map(t)},Qn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.filter(Boolean).forEach((function(e){return e.apply(null,n)}))}},An={firing:"danger",pending:"warning",inactive:"success"},Dn=function(e){var t=e.annotations;return Object($.jsxs)(i.Fragment,{children:[Object($.jsx)("tr",{children:Object($.jsx)("td",{colSpan:4,children:Object($.jsx)("h5",{className:"font-weight-bold",children:"Annotations"})})}),Object($.jsx)("tr",{children:Object($.jsx)("td",{colSpan:4,children:Object.entries(t).map((function(e,t){var n=Object(l.a)(e,2),a=n[0],r=n[1];return Object($.jsxs)("div",{children:[Object($.jsx)("strong",{children:a}),Object($.jsx)("div",{children:r})]},t)}))})})]})},Rn=function(e){var t=e.rule,n=e.showAnnotations,a=Object(i.useState)(!1),r=Object(l.a)(a,2),o=r[0],s=r[1];return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(B.a,{fade:!1,onClick:function(){return s(!o)},color:An[t.state],style:{cursor:"pointer"},children:[Object($.jsx)(C.a,{icon:o?M.g:M.i,fixedWidth:!0}),Object($.jsx)("strong",{children:t.name})," (","".concat(t.alerts.length," active"),")"]}),Object($.jsx)(h.a,{isOpen:o,className:"mb-2",children:o&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)("pre",{className:"alert-cell",children:Object($.jsxs)("code",{children:[Object($.jsxs)("div",{children:["name: ",Object($.jsx)(u.b,{to:En('ALERTS{alertname="'.concat(t.name,'"}')),children:t.name})]}),Object($.jsxs)("div",{children:["expr: ",Object($.jsx)(u.b,{to:En(t.query),children:t.query})]}),t.duration>0&&Object($.jsx)("div",{children:Object($.jsxs)("div",{children:["for: ",_n(1e3*t.duration)]})}),t.labels&&Object.keys(t.labels).length>0&&Object($.jsxs)("div",{children:[Object($.jsx)("div",{children:"labels:"}),Object.entries(t.labels).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsxs)("div",{className:"ml-4",children:[n,": ",a]},n)}))]}),t.annotations&&Object.keys(t.annotations).length>0&&Object($.jsxs)("div",{children:[Object($.jsx)("div",{children:"annotations:"}),Object.entries(t.annotations).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsxs)("div",{className:"ml-4",children:[n,": ",a]},n)}))]})]})}),t.alerts.length>0&&Object($.jsxs)(Z.a,{bordered:!0,size:"sm",children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("th",{children:"Labels"}),Object($.jsx)("th",{children:"State"}),Object($.jsx)("th",{children:"Active Since"}),Object($.jsx)("th",{children:"Value"})]})}),Object($.jsx)("tbody",{children:t.alerts.map((function(e,t){return Object($.jsxs)(i.Fragment,{children:[Object($.jsxs)("tr",{children:[Object($.jsx)("td",{style:{verticalAlign:"middle"},children:Object.entries(e.labels).map((function(e,t){var n=Object(l.a)(e,2),a=n[0],r=n[1];return Object($.jsxs)(G.a,{color:"primary",className:"mr-1",children:[a,"=",r]},t)}))}),Object($.jsx)("td",{children:Object($.jsx)("h5",{className:"m-0",children:Object($.jsx)(G.a,{color:An[e.state]+" text-uppercase",className:"px-3",children:e.state})})}),Object($.jsx)("td",{children:e.activeAt}),Object($.jsx)("td",{children:(a=e.value,isNaN(Number(a))?a:Number(a))})]}),n&&Object($.jsx)(Dn,{annotations:e.annotations})]},t);var a}))})]})]})})]})},In=n(319),Xn=n(320),qn=["children","wrapperStyles","id"],Fn=function(e){var t=e.children,n=e.wrapperStyles,a=e.id,r=Object(W.a)(e,qn);return Object($.jsxs)(In.a,{className:"custom-control custom-checkbox",style:n,children:[Object($.jsx)(pe.a,Object(R.a)(Object(R.a)({},r),{},{id:a,type:"checkbox",className:"custom-control-input"})),Object($.jsx)(Xn.a,{style:{userSelect:"none"},className:"custom-control-label",for:a,children:t})]})},Vn=Object(i.memo)(Fn);function zn(e,t){var n=JSON.parse(localStorage.getItem(e)||JSON.stringify(t)),a=Object(i.useState)(n),r=Object(l.a)(a,2),o=r[0],s=r[1];return Object(i.useEffect)((function(){var t=JSON.stringify(o);localStorage.setItem(e,t)}),[e,o]),[o,s]}var Wn=[["inactive","success"],["pending","warning"],["firing","danger"]],Bn=function(e){var t=e.groups,n=void 0===t?[]:t,a=e.statsCount,r=zn("alerts-status-filter",{firing:!0,pending:!0,inactive:!0}),o=Object(l.a)(r,2),s=o[0],c=o[1],u=zn("alerts-annotations-status",{checked:!1}),d=Object(l.a)(u,2),p=d[0],h=d[1];return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("div",{className:"d-flex togglers-wrapper",children:[Wn.map((function(e){var t,n=Object(l.a)(e,2),r=n[0],i=n[1];return Object($.jsx)(Vn,{wrapperStyles:{marginRight:10},checked:s[r],id:"".concat(r,"-toggler"),onChange:(t=r,function(){c(Object(R.a)(Object(R.a)({},s),{},Object(Y.a)({},t,!s[t])))}),children:Object($.jsxs)(G.a,{color:i,className:"text-capitalize",children:[r," (",a[r],")"]})},r)})),Object($.jsx)(Vn,{wrapperStyles:{marginLeft:"auto"},checked:p.checked,id:"show-annotations-toggler",onChange:function(e){var t=e.target;return h({checked:t.checked})},children:Object($.jsx)("span",{style:{fontSize:"0.9rem",lineHeight:1.9},children:"Show annotations"})})]}),n.map((function(e,t){return e.rules.some((function(e){return s[e.state]}))?Object($.jsxs)(i.Fragment,{children:[Object($.jsxs)(Hn,{rules:e.rules,children:[e.file," > ",e.name]}),e.rules.map((function(e,t){return s[e.state]&&Object($.jsx)(Rn,{showAnnotations:p.checked,rule:e},e.name+t)}))]},t):null}))]})},Hn=function(e){var t=e.rules,n=e.children,a=t.reduce((function(e,t){return Object(R.a)(Object(R.a)({},e),{},Object(Y.a)({},t.state,e[t.state]+t.alerts.length))}),{firing:0,pending:0});return Object($.jsxs)("div",{className:"group-info border rounded-sm",style:{lineHeight:1.1},children:[n,Object($.jsxs)("div",{className:"badges-wrapper",children:[yn(a.inactive)&&Object($.jsx)(G.a,{color:"success",children:"inactive"}),a.pending>0&&Object($.jsxs)(G.a,{color:"warning",children:["pending (",a.pending,")"]}),a.firing>0&&Object($.jsxs)(G.a,{color:"danger",children:["firing (",a.firing,")"]})]})]})};Bn.displayName="Alerts";var Un=U(Bn),Yn=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/rules?type=alert")),n=t.response,a=t.error,r=t.isLoading,i={inactive:0,pending:0,firing:0};return n.data&&n.data.groups&&n.data.groups.forEach((function(e){return e.rules.forEach((function(e){return i[e.state]++}))})),Object($.jsx)(Un,Object(R.a)(Object(R.a)({},n.data),{},{statsCount:i,error:a,isLoading:r}))},Gn=n(183),Zn=n.n(Gn),Jn=function(e){var t=e.yaml;return Object($.jsx)("pre",{className:"config-yaml",children:t})};Jn.displayName="Config";var Kn=U(Jn),ea=function(e){var t=e.error,n=e.data,a=Object(i.useState)(!1),r=Object(l.a)(a,2),o=r[0],s=r[1],c=n&&n.yaml;return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("h2",{children:["Configuration\xa0",Object($.jsx)(Zn.a,{text:c||"",onCopy:function(e,t){s(t),setTimeout(s,1500)},children:Object($.jsx)(S.a,{color:"light",disabled:!c,children:o?"Copied":"Copy to clipboard"})})]}),Object($.jsx)(Kn,{error:t,isLoading:!c,yaml:c})]})},ta=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/status/config")),n=t.response,a=t.error;return Object($.jsx)(ea,{error:a,data:n.data})},na=new ye.Fuzzy({pre:"<strong>",post:"</strong>",shouldSort:!0}),aa=function(e){var t,n,a=e.data,r=void 0===a?{}:a,o=Object(i.useState)(""),s=Object(l.a)(o,2),c=s[0],u=s[1],d=Object(i.useState)({name:"Flag",alpha:!0,focused:!0}),p=Object(l.a)(d,2),h=p[0],f=p[1],m=Object.entries(r).sort((t="Flag"===h.name,n=!h.alpha,function(e,a){var r=Object(l.a)(e,2),i=r[0],o=r[1],s=Object(l.a)(a,2),c=s[0],u=s[1],d=t?c:u;return(n?-1:1)*(t?i:o).localeCompare(d)})).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return"--".concat(n).concat("||").concat(a)})),b=m;return c.length>0&&(b=na.filter(c,m).map((function(e){return e.rendered}))),Object($.jsxs)($.Fragment,{children:[Object($.jsx)("h2",{children:"Command-Line Flags"}),Object($.jsx)(le.a,{children:Object($.jsx)(pe.a,{autoFocus:!0,placeholder:"Filter by flag name or value...",className:"my-3",value:c,onChange:function(e){var t=e.target;u(t.value)}})}),Object($.jsxs)(Z.a,{bordered:!0,size:"sm",striped:!0,hover:!0,children:[Object($.jsx)("thead",{children:Object($.jsx)("tr",{children:["Flag","Value"].map((function(e){return Object($.jsxs)("td",{className:"px-4 ".concat(e),style:{width:"50%"},onClick:function(){return f({name:e,focused:!0,alpha:h.name!==e||!h.alpha})},children:[Object($.jsx)("span",{className:"mr-2",children:e}),Object($.jsx)(C.a,{icon:(t=h.name!==e?void 0:h.alpha,void 0===t?M.o:t?M.p:M.q)})]},e);var t}))})}),Object($.jsx)("tbody",{children:b.map((function(e){var t=e.split("||"),n=Object(l.a)(t,2),a=n[0],r=n[1],i={allowedTags:["strong"]};return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{className:"flag-item",children:Object($.jsx)("span",{dangerouslySetInnerHTML:{__html:me()(a,i)}})}),Object($.jsx)("td",{className:"flag-value",children:Object($.jsx)("span",{dangerouslySetInnerHTML:{__html:me()(r,i)}})})]},a)}))})]})]})},ra=U(aa);aa.displayName="Flags";var ia=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/status/flags")),n=t.response,a=t.error,r=t.isLoading;return Object($.jsx)(ra,{data:n.data,error:a,isLoading:r})},oa=n(63),sa=function(e){return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("strong",{children:[e.title,":"]}),Object($.jsx)(u.b,{className:"ml-4",to:En(e.expr),children:e.text}),Object($.jsx)("br",{})]})},ca=U((function(e){var t=e.response,n=function(e){switch(e){case"ok":return"success";case"err":return"danger";case"unknown":return"warning"}};if(t.data){var a=t.data.groups;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("h2",{children:"Rules"}),a.map((function(e,t){return Object($.jsxs)(Z.a,{bordered:!0,children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("td",{colSpan:3,children:Object($.jsx)("a",{href:"#"+e.name,children:Object($.jsx)("h4",{id:e.name,className:"text-break",children:e.name})})}),Object($.jsx)("td",{children:Object($.jsx)("h4",{children:Cn(e.lastEvaluation,Object(oa.now)())})}),Object($.jsx)("td",{children:Object($.jsx)("h4",{children:Sn(1e3*parseFloat(e.evaluationTime))})})]})}),Object($.jsxs)("tbody",{children:[Object($.jsxs)("tr",{className:"font-weight-bold",children:[Object($.jsx)("td",{children:"Rule"}),Object($.jsx)("td",{children:"State"}),Object($.jsx)("td",{children:"Error"}),Object($.jsx)("td",{children:"Last Evaluation"}),Object($.jsx)("td",{children:"Evaluation Time"})]}),e.rules.map((function(e,t){return Object($.jsxs)("tr",{children:[Object($.jsxs)("td",{className:"rule-cell",children:[e.alerts?Object($.jsx)(sa,{title:"alert",text:e.name,expr:'ALERTS{alertname="'.concat(e.name,'"}')}):Object($.jsx)(sa,{title:"record",text:e.name,expr:e.name}),Object($.jsx)(sa,{title:"expr",text:e.query,expr:e.query}),e.duration>0&&Object($.jsxs)("div",{children:[Object($.jsx)("strong",{children:"for:"})," ",_n(1e3*e.duration)]}),e.labels&&Object.keys(e.labels).length>0&&Object($.jsxs)("div",{children:[Object($.jsx)("strong",{children:"labels:"}),Object.entries(e.labels).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsxs)("div",{className:"ml-4",children:[n,": ",a]},n)}))]}),e.alerts&&e.annotations&&Object.keys(e.annotations).length>0&&Object($.jsxs)("div",{children:[Object($.jsx)("strong",{children:"annotations:"}),Object.entries(e.annotations).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsxs)("div",{className:"ml-4",children:[n,": ",a]},n)}))]})]}),Object($.jsx)("td",{children:Object($.jsx)(G.a,{color:n(e.health),children:e.health.toUpperCase()})}),Object($.jsx)("td",{children:e.lastError?Object($.jsx)(B.a,{color:"danger",children:e.lastError}):null}),Object($.jsx)("td",{children:Cn(e.lastEvaluation,Object(oa.now)())}),Object($.jsx)("td",{children:Sn(1e3*parseFloat(e.evaluationTime))})]},t)}))]})]},t)}))]})}return null})),la=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/rules")),n=t.response,a=t.error,r=t.isLoading;return Object($.jsx)(ca,{response:n,error:a,isLoading:r})},ua=function(e){var t=e.children,n=e.event,a=e.showMore;return Object($.jsxs)("h3",{children:[t,Object($.jsxs)(S.a,{size:"xs",onClick:n,style:{padding:"0.3em 0.3em 0.25em 0.3em",fontSize:"0.375em",marginLeft:"1em",verticalAlign:"baseline"},color:"primary",children:["show ",a?"less":"more"]})]})},da=function(e){return Object.entries(e).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsx)("div",{children:Object($.jsx)(G.a,{color:"primary",className:"mr-1",children:"".concat(n,'="').concat(a,'"')})},n)}))},pa=function(e){var t=e.value,n=e.name,a=Object(i.useState)(!1),r=Object(l.a)(a,2),o=r[0],s=r[1];return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{children:Object($.jsx)(ua,{event:function(){s(!o)},showMore:o,children:Object($.jsx)("span",{className:"target-head",children:n})})}),o?Object($.jsxs)(Z.a,{size:"sm",bordered:!0,hover:!0,striped:!0,children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("th",{children:"Discovered Labels"}),Object($.jsx)("th",{children:"Target Labels"})]})}),Object($.jsx)("tbody",{children:t.map((function(e,n){return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:da(t[n].discoveredLabels)}),t[n].isDropped?Object($.jsx)("td",{style:{fontWeight:"bold"},children:"Dropped"}):Object($.jsx)("td",{children:da(t[n].labels)})]},n)}))})]}):null]})},ha=function(e){var t=e.activeTargets,n=e.droppedTargets,a=function(e,t){var n,a={},r=Object(nt.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value.scrapePool;a[i]||(a[i]={total:0,active:0}),a[i].total++,a[i].active++}}catch(l){r.e(l)}finally{r.f()}var o,s=Object(nt.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value.discoveredLabels.job;a[c]||(a[c]={total:0,active:0}),a[c].total++}}catch(l){s.e(l)}finally{s.f()}return a}(t,n),r=function(e,t){var n,a={},r=Object(nt.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.scrapePool;a[o]||(a[o]=[]),a[o].push({discoveredLabels:i.discoveredLabels,labels:i.labels,isDropped:!1})}}catch(d){r.e(d)}finally{r.f()}var s,c=Object(nt.a)(t);try{for(c.s();!(s=c.n()).done;){var l=s.value,u=l.discoveredLabels.job;a[u]||(a[u]=[]),a[u].push({discoveredLabels:l.discoveredLabels,isDropped:!0,labels:{}})}}catch(d){c.e(d)}finally{c.f()}return a}(t,n);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("h2",{children:"Service Discovery"}),Object($.jsx)("ul",{children:Nn(a,(function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsx)("li",{children:Object($.jsxs)("a",{href:"#"+n,children:[n," (",a.active," / ",a.total," active targets)"]})},n)}))}),Object($.jsx)("hr",{}),Nn(r,(function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsx)(pa,{value:a,name:n},n)}))]})};ha.displayName="ServiceDiscoveryContent";var fa=U(ha),ma=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/targets")),n=t.response,a=t.error,r=t.isLoading;return Object($.jsx)(fa,Object(R.a)(Object(R.a)({},n.data),{},{error:a,isLoading:r,componentTitle:"Service Discovery information"}))},ba={startTime:{title:"Start time",customizeValue:function(e){return new Date(e).toUTCString()}},CWD:{title:"Working directory"},reloadConfigSuccess:{title:"Configuration reload",customizeValue:function(e){return e?"Successful":"Unsuccessful"}},lastConfigTime:{title:"Last successful configuration reload"},corruptionCount:{title:"WAL corruptions"},goroutineCount:{title:"Goroutines"},storageRetention:{title:"Storage retention"},activeAlertmanagers:{customRow:!0,customizeValue:function(e,t){return Object($.jsxs)(i.Fragment,{children:[Object($.jsx)("tr",{children:Object($.jsx)("th",{children:"Endpoint"})}),e.map((function(e){var t=e.url,n=new URL(t),a=n.origin,r=n.pathname;return Object($.jsx)("tr",{children:Object($.jsxs)("td",{children:[Object($.jsx)("a",{href:t,children:a}),r]})},t)}))]},t)}},droppedAlertmanagers:{skip:!0}},va=function(e){var t=e.data,n=e.title;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("h2",{children:n}),Object($.jsx)(Z.a,{className:"h-auto",size:"sm",bordered:!0,striped:!0,children:Object($.jsx)("tbody",{children:Object.entries(t).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1],r=ba[n]||{},i=r.title,o=void 0===i?n:i,s=r.customizeValue,c=void 0===s?function(e){return e}:s,u=r.customRow;return r.skip?null:u?c(a,n):Object($.jsxs)("tr",{children:[Object($.jsx)("th",{className:"capitalize-title",style:{width:"35%"},children:o}),Object($.jsx)("td",{className:"text-break",children:c(a,o)})]},n)}))})})]})},ga=U(va);va.displayName="Status";var xa=function(){var e=j(),t="".concat(e,"/").concat(F);return Object($.jsx)($.Fragment,{children:[{fetchResult:V("".concat(t,"/status/runtimeinfo")),title:"Runtime Information"},{fetchResult:V("".concat(t,"/status/buildinfo")),title:"Build Information"},{fetchResult:V("".concat(t,"/alertmanagers")),title:"Alertmanagers"}].map((function(e){var t=e.fetchResult,n=e.title,a=t.response,r=t.isLoading,i=t.error;return Object($.jsx)(ga,{data:a.data,title:n,isLoading:r,error:i,componentTitle:n},n)}))})},Oa=function(e){var t=e.filter,n=e.setFilter,a=e.expanded,r=e.setExpanded,i=t.showHealthy,o=Object.values(a).every((function(e){return e})),s={all:{active:i,className:"all",color:"primary",onClick:function(){return n(Object(R.a)(Object(R.a)({},t),{},{showHealthy:!0}))}},unhealthy:{active:!i,className:"unhealthy",color:"primary",onClick:function(){return n(Object(R.a)(Object(R.a)({},t),{},{showHealthy:!1}))}},expansionState:{active:!1,className:"expansion",color:"primary",onClick:function(){return r((e=!o,Object.keys(a).reduce((function(t,n){return Object(R.a)(Object(R.a)({},t),{},Object(Y.a)({},n,e))}),{})));var e}}};return Object($.jsxs)(w.a,{className:"mt-3 mb-4",children:[Object($.jsx)(S.a,Object(R.a)(Object(R.a)({},s.all),{},{children:"All"})),Object($.jsx)(S.a,Object(R.a)(Object(R.a)({},s.unhealthy),{},{children:"Unhealthy"})),Object($.jsx)(S.a,Object(R.a)(Object(R.a)({},s.expansionState),{},{children:o?"Collapse All":"Expand All"}))]})},ya=n(57),ja=n.n(ya),ka=function(e){var t,n=e.endpoint,a=e.globalUrl;try{t=new URL(n)}catch(p){var r=p;return Object($.jsxs)(B.a,{color:"danger",children:[Object($.jsx)("strong",{children:"Error:"})," ",r.message]})}var i=t,o=i.host,s=i.pathname,c=i.protocol,u=i.searchParams,d=Array.from(u.entries());return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("a",{href:a,children:"".concat(c,"//").concat(o).concat(s)}),d.length>0?Object($.jsx)("br",{}):null,d.map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object($.jsx)(G.a,{color:"primary",className:"mr-1",children:"".concat(n,'="').concat(a,'"')},"".concat(n,"/").concat(a))}))]})},Ta=n(323),_a=(n(167),n(184)),wa=n.n(_a),Sa=function(e){return Object.keys(e).map((function(t){return"".concat(t,'="').concat(e[t],'"')}))},Ca=function(e){var t=e.discoveredLabels,n=e.labels,a=e.idx,r=e.scrapePool,o=Object(i.useState)(!1),s=Object(l.a)(o,2),c=s[0],u=s[1],d="series-labels-".concat(r,"-").concat(a);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{id:d,className:"series-labels-container",children:Object.keys(n).map((function(e){return Object($.jsx)(G.a,{color:"primary",className:"mr-1",children:"".concat(e,'="').concat(n[e],'"')},e)}))}),Object($.jsxs)(Ta.a,{isOpen:c,target:CSS.escape(d),toggle:function(){return u(!c)},style:{maxWidth:"none",textAlign:"left"},children:[Object($.jsx)("b",{children:"Before relabeling:"}),Sa(t).map((function(e,t){return Object($.jsxs)(i.Fragment,{children:[Object($.jsx)("br",{}),Object($.jsx)("span",{className:wa.a.discovered,children:e})]},t)}))]})]})},Ma=function(e){var t=e.duration,n=e.interval,a=e.timeout,r=e.idx,o=e.scrapePool,s=Object(i.useState)(!1),c=Object(l.a)(s,2),u=c[0],d=c[1],p="scrape-duration-".concat(o,"-").concat(r);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{id:p,className:"scrape-duration-container",children:Sn(1e3*t)}),Object($.jsxs)(Ta.a,{isOpen:u,toggle:function(){return d(!u)},target:CSS.escape(p),style:{maxWidth:"none",textAlign:"left"},children:[Object($.jsxs)(i.Fragment,{children:[Object($.jsxs)("span",{children:["Interval: ",n]}),Object($.jsx)("br",{})]}),Object($.jsx)(i.Fragment,{children:Object($.jsxs)("span",{children:["Timeout: ",a]})})]})]})},Pa=["Endpoint","State","Labels","Last Scrape","Scrape Duration","Error"],La=function(e){var t=e.scrapePool,n=e.targetGroup,a=e.expanded,r=e.toggleExpanded,i=n.upCount<n.targets.length?"danger":"normal",o="pool-".concat(t),s={href:"#".concat(o),id:o};return Object($.jsxs)("div",{className:ja.a.container,children:[Object($.jsx)(ua,{event:r,showMore:a,children:Object($.jsx)("a",Object(R.a)(Object(R.a)({className:ja.a[i]},s),{},{children:"".concat(t," (").concat(n.upCount,"/").concat(n.targets.length," up)")}))}),Object($.jsx)(h.a,{isOpen:a,children:Object($.jsxs)(Z.a,{className:ja.a.table,size:"sm",bordered:!0,hover:!0,striped:!0,children:[Object($.jsx)("thead",{children:Object($.jsx)("tr",{children:Pa.map((function(e){return Object($.jsx)("th",{children:e},e)}))},"header")}),Object($.jsx)("tbody",{children:n.targets.map((function(e,t){var n=e.discoveredLabels,a=e.labels,r=e.scrapePool,i=e.scrapeUrl,o=e.globalUrl,s=e.lastError,c=e.lastScrape,l=e.lastScrapeDuration,u=e.health,d=e.scrapeInterval,p=e.scrapeTimeout,h=function(e){switch(e.toLowerCase()){case"up":return"success";case"down":return"danger";default:return"warning"}}(u);return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{className:ja.a.endpoint,children:Object($.jsx)(ka,{endpoint:i,globalUrl:o})}),Object($.jsx)("td",{className:ja.a.state,children:Object($.jsx)(G.a,{color:h,children:u.toUpperCase()})}),Object($.jsx)("td",{className:ja.a.labels,children:Object($.jsx)(Ca,{discoveredLabels:n,labels:a,scrapePool:r,idx:t})}),Object($.jsx)("td",{className:ja.a["last-scrape"],children:Cn(c,Object(oa.now)())}),Object($.jsx)("td",{className:ja.a["scrape-duration"],children:Object($.jsx)(Ma,{duration:l,scrapePool:r,idx:t,interval:d,timeout:p})}),Object($.jsx)("td",{className:ja.a.errors,children:s?Object($.jsx)("span",{className:"text-danger",children:s}):null})]},i)}))})]})})]})},$a=function(e){var t=e.activeTargets,n=t.reduce((function(e,t){var n=t.health,a=t.scrapePool,r="up"===n.toLowerCase()?1:0;return e[a]||(e[a]={upCount:0,targets:[]}),e[a].targets.push(t),e[a].upCount+=r,e}),{}),a=zn("targets-page-filter",{showHealthy:!0,showUnhealthy:!0}),r=Object(l.a)(a,2),i=r[0],o=r[1],s=zn("targets-page-expansion-state",Object.keys(n).reduce((function(e,t){return Object(R.a)(Object(R.a)({},e),{},Object(Y.a)({},t,!0))}),{})),c=Object(l.a)(s,2),u=c[0],d=c[1],p=i.showHealthy,h=i.showUnhealthy;return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(Oa,{filter:i,setFilter:o,expanded:u,setExpanded:d}),Object.keys(n).filter((function(e){var t=n[e],a=t.upCount===t.targets.length;return a&&p||!a&&h})).map((function(e){return Object($.jsx)(La,{scrapePool:e,targetGroup:n[e],expanded:u[e],toggleExpanded:function(){return d(Object(R.a)(Object(R.a)({},u),{},Object(Y.a)({},e,!u[e])))}},e)}))]})};$a.displayName="ScrapePoolContent";var Ea=U($a),Na=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/targets?state=active")),n=t.response,a=t.error,r=t.isLoading,i=n.status,o="success"!==i&&"start fetching"!==i;return Object($.jsx)(Ea,Object(R.a)(Object(R.a)({},n.data),{},{error:o?new Error(i):a,isLoading:r,componentTitle:"Targets information"}))},Qa=function(){return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("h2",{children:"Targets"}),Object($.jsx)(Na,{})]})},Aa=["metrics","useLocalTime","useExperimentalEditor","queryHistoryEnabled","enableAutocomplete","enableHighlighting","enableLinter"],Da=function(e){var t="?".concat(e.map($n).join("&"));window.history.pushState({},"",t)},Ra=function(e){var t=e.metrics,n=void 0===t?[]:t,a=e.useLocalTime,r=e.useExperimentalEditor,o=e.queryHistoryEnabled,s=e.enableAutocomplete,c=e.enableHighlighting,u=e.enableLinter,d=Object(W.a)(e,Aa),p=Object(i.useState)(d.panels),h=Object(l.a)(p,2),f=h[0],m=h[1],b=zn("history",[]),v=Object(l.a)(b,2),g=v[0],x=v[1];Object(i.useEffect)((function(){!f.length&&y(),window.onpopstate=function(){var e=Pn(window.location.search);e.length>0&&m(e)}}),[]);var O=function(e){if(!(-1!==n.indexOf(e))&&e.length){var t=g.reduce((function(t,n){return n===e?t:[].concat(Object(J.a)(t),[n])}),[e]);x(t.slice(0,50))}},y=function(){Qn(m,Da)([].concat(Object(J.a)(f),[{id:xn(),key:"".concat(f.length),options:vn}]))},k=j();return Object($.jsxs)($.Fragment,{children:[f.map((function(e){var t=e.id,i=e.options;return Object($.jsx)(gn,{pathPrefix:k,onExecuteQuery:O,id:t,options:i,onOptionsChanged:function(e){return Qn(m,Da)(f.map((function(n){return t===n.id?Object(R.a)(Object(R.a)({},n),{},{options:e}):n})))},removePanel:function(){return Qn(m,Da)(f.reduce((function(e,n){return n.id!==t?[].concat(Object(J.a)(e),[Object(R.a)(Object(R.a)({},n),{},{key:"".concat(e.length)})]):e}),[]))},useExperimentalEditor:r,useLocalTime:a,metricNames:n,pastQueries:o?g:[],enableAutocomplete:s,enableHighlighting:c,enableLinter:u},t)})),Object($.jsx)(S.a,{className:"d-block mb-3",color:"primary",onClick:y,children:"Add Panel"})]})},Ia=function(){var e=Object(i.useState)(0),t=Object(l.a)(e,2),n=t[0],a=t[1],r=zn("use-new-editor",!0),o=Object(l.a)(r,2),s=o[0],c=o[1],u=zn("use-local-time",!1),d=Object(l.a)(u,2),p=d[0],h=d[1],f=zn("enable-query-history",!1),m=Object(l.a)(f,2),b=m[0],v=m[1],g=zn("enable-metric-autocomplete",!0),x=Object(l.a)(g,2),O=x[0],y=x[1],k=zn("enable-syntax-highlighting",!0),T=Object(l.a)(k,2),_=T[0],w=T[1],S=zn("enable-linter",!0),C=Object(l.a)(S,2),M=C[0],P=C[1],L=j(),E=V("".concat(L,"/").concat(F,"/label/__name__/values")),N=E.response,Q=E.error,A=(new Date).getTime()/1e3,D=V("".concat(L,"/").concat(F,"/query?query=time()")),R=D.response,I=D.error;return Object(i.useEffect)((function(){if(R.data){var e=R.data.result[0];a(Math.abs(A-e))}}),[R.data]),Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("div",{className:"clearfix",children:[Object($.jsxs)("div",{className:"float-left",children:[Object($.jsx)(Vn,{wrapperStyles:{display:"inline-block"},id:"use-local-time-checkbox",onChange:function(e){var t=e.target;return h(t.checked)},defaultChecked:p,children:"Use local time"}),Object($.jsx)(Vn,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"query-history-checkbox",onChange:function(e){var t=e.target;return v(t.checked)},defaultChecked:b,children:"Enable query history"}),Object($.jsx)(Vn,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"autocomplete-checkbox",onChange:function(e){var t=e.target;return y(t.checked)},defaultChecked:O,children:"Enable autocomplete"})]}),Object($.jsxs)("div",{className:"float-right",children:[Object($.jsx)(Vn,{wrapperStyles:{display:"inline-block"},id:"use-experimental-editor-checkbox",onChange:function(e){var t=e.target;return c(t.checked)},defaultChecked:s,children:"Use experimental editor"}),Object($.jsx)(Vn,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"highlighting-checkbox",onChange:function(e){var t=e.target;return w(t.checked)},defaultChecked:_,disabled:!s,children:"Enable highlighting"}),Object($.jsx)(Vn,{wrapperStyles:{marginLeft:20,display:"inline-block"},id:"linter-checkbox",onChange:function(e){var t=e.target;return P(t.checked)},defaultChecked:M,disabled:!s,children:"Enable linter"})]})]}),(n>30||I)&&Object($.jsxs)(B.a,{color:"danger",children:[Object($.jsx)("strong",{children:"Warning: "}),I&&"Unexpected response status when fetching server time: ".concat(I.message),n>=30&&"Error fetching server time: Detected ".concat(n," seconds time difference between your browser and the server. Prometheus relies on accurate time and time drift might cause unexpected query results.")]}),Q&&Object($.jsxs)(B.a,{color:"danger",children:[Object($.jsx)("strong",{children:"Warning: "}),"Error fetching metrics list: Unexpected response status when fetching metric names: ",Q.message]}),Object($.jsx)(Ra,{panels:Pn(window.location.search),useLocalTime:p,metrics:N.data,useExperimentalEditor:s,queryHistoryEnabled:b,enableAutocomplete:O,enableHighlighting:_,enableLinter:M})]})},Xa=function(e){var t=e.headStats,n=e.labelValueCountByLabelName,a=e.seriesCountByMetricName,r=e.memoryInBytesByLabelName,i=e.seriesCountByLabelValuePair,o=function(e){try{return"".concat(new Date(e).toISOString()," (").concat(e,")")}catch(t){return 0===c?"No datapoints yet":"Error parsing time (".concat(e,")")}},s=t.chunkCount,c=t.numSeries,l=t.numLabelPairs,u=t.minTime,d=t.maxTime,p=[{header:"Number of Series",value:c},{header:"Number of Chunks",value:s},{header:"Number of Label Pairs",value:l},{header:"Current Min Time",value:"".concat(o(u))},{header:"Current Max Time",value:"".concat(o(d))}];return Object($.jsxs)("div",{children:[Object($.jsx)("h2",{children:"TSDB Status"}),Object($.jsx)("h3",{className:"p-2",children:"Head Stats"}),Object($.jsx)("div",{className:"p-2",children:Object($.jsxs)(Z.a,{bordered:!0,size:"sm",striped:!0,children:[Object($.jsx)("thead",{children:Object($.jsx)("tr",{children:p.map((function(e){var t=e.header;return Object($.jsx)("th",{children:t},t)}))})}),Object($.jsx)("tbody",{children:Object($.jsx)("tr",{children:p.map((function(e){var t=e.header,n=e.value;return Object($.jsx)("td",{children:n},t)}))})})]})}),Object($.jsx)("h3",{className:"p-2",children:"Head Cardinality Stats"}),[{title:"Top 10 label names with value count",stats:n},{title:"Top 10 series count by metric names",stats:a},{title:"Top 10 label names with high memory usage",unit:"Bytes",stats:r},{title:"Top 10 series count by label value pairs",stats:i}].map((function(e){var t=e.title,n=e.unit,a=void 0===n?"Count":n,r=e.stats;return Object($.jsxs)("div",{className:"p-2",children:[Object($.jsx)("h3",{children:t}),Object($.jsxs)(Z.a,{bordered:!0,size:"sm",striped:!0,children:[Object($.jsx)("thead",{children:Object($.jsxs)("tr",{children:[Object($.jsx)("th",{children:"Name"}),Object($.jsx)("th",{children:a})]})}),Object($.jsx)("tbody",{children:r.map((function(e){var t=e.name,n=e.value;return Object($.jsxs)("tr",{children:[Object($.jsx)("td",{children:t}),Object($.jsx)("td",{children:n})]},t)}))})]})]},t)}))]})};Xa.displayName="TSDBStatusContent";var qa=U(Xa),Fa=function(){var e=j(),t=V("".concat(e,"/").concat(F,"/status/tsdb")),n=t.response,a=t.error,r=t.isLoading;return Object($.jsx)(qa,Object(R.a)(Object(R.a)({error:a,isLoading:r},n.data),{},{componentTitle:"TSDB Status information"}))},Va=n(321),za=function(e){var t=e.status;return e.isUnexpected?Object($.jsxs)(B.a,{color:"danger",children:[Object($.jsx)("strong",{children:"Error:"})," Server is not responding"]}):Object($.jsx)("div",{className:"text-center m-3",children:Object($.jsxs)("div",{className:"m-4",children:[Object($.jsx)("h2",{children:"Starting up..."}),t&&t.max>0?Object($.jsxs)("div",{children:[Object($.jsxs)("p",{children:["Replaying WAL (",t.current,"/",t.max,")"]}),Object($.jsx)(Va.a,{animated:!0,value:t.current-t.min+1,min:t.min,max:t.max-t.min+1,color:t.max===t.current?"success":void 0,style:{width:"10%",margin:"auto"}})]}):null]})})},Wa=function(e){return function(t){var n=Object.assign({},t),a=function(e,t){var n=Object(i.useState)(!1),a=Object(l.a)(n,2),r=a[0],o=a[1],s=Object(i.useState)(!1),c=Object(l.a)(s,2),u=c[0],d=c[1],p=Object(i.useState)({}),h=Object(l.a)(p,2),f=h[0],m=h[1];return Object(i.useEffect)((function(){if(!z){var n=!0,a=function(){var a=Object(q.a)(X.a.mark((function a(){var i,s;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("".concat(e,"/-/ready"),Object(R.a)({cache:"no-store",credentials:"same-origin"},t));case 3:if(200!==(i=a.sent).status){a.next=10;break}n&&o(!0),z=!0,clearInterval(r),a.next=25;break;case 10:if(503===i.status){a.next=16;break}return n&&d(!0),clearInterval(r),a.abrupt("return");case 16:return n&&d(!1),a.next=19,fetch("".concat(e,"/").concat(F,"/status/walreplay"),{cache:"no-store",credentials:"same-origin"});case 19:if(!(i=a.sent).ok){a.next=25;break}return a.next=23,i.json();case 23:s=a.sent,n&&m(s);case 25:a.next=32;break;case 27:return a.prev=27,a.t0=a.catch(0),n&&d(!0),clearInterval(r),a.abrupt("return");case 32:case"end":return a.stop()}}),a,null,[[0,27]])})));return function(){return a.apply(this,arguments)}}();a();var r=setInterval(a,1e3);return function(){clearInterval(r),n=!1}}o(!0)}),[e,t]),{ready:r,isUnexpected:u,walReplayStatus:f}}(j()),r=a.ready,o=a.walReplayStatus,s=a.isUnexpected;return r||s?Object($.jsx)(e,Object(R.a)({},n)):Object($.jsx)(za,{isUnexpected:s,status:o.data})}},Ba=Wa(Yn),Ha=Wa(ta),Ua=Wa(ia),Ya=Wa(la),Ga=Wa(ma),Za=Wa(xa),Ja=Wa(Fa),Ka=Wa(Qa),er=Wa(Ia),tr=function(e){var t=window.matchMedia(e),n=Object(i.useState)(t.matches),a=Object(l.a)(n,2),r=a[0],o=a[1];return Object(i.useEffect)((function(){var e=function(){return o(t.matches)};return t.addEventListener("change",e),function(){return t.removeEventListener("change",e)}}),[t]),r},nr=function(e){var t=e.consolesLink,n=window.location.pathname,a=["/graph","/alerts","/status","/tsdb-status","/flags","/config","/rules","/targets","/service-discovery"];if(n.endsWith("/")&&(n=n.slice(0,-1)),n.length>1)for(var r=0;r<a.length;r++)if(n.endsWith(a[r])){n=n.slice(0,n.length-a[r].length);break}var i,o=zn("user-prefers-color-scheme","auto"),s=Object(l.a)(o,2),c=s[0],d=s[1],p=tr("(prefers-color-scheme)"),h=tr("(prefers-color-scheme: dark)");return i="auto"!==c?c:p&&h?"dark":"light",Object($.jsxs)(P.Provider,{value:{theme:i,userPreference:c,setTheme:function(e){return d(e)}},children:[Object($.jsx)(E,{}),Object($.jsx)(y.Provider,{value:n,children:Object($.jsxs)(u.a,{basename:n,children:[Object($.jsx)(Q,{consolesLink:t}),Object($.jsx)(A.a,{fluid:!0,style:{paddingTop:70},children:Object($.jsxs)(D.d,{children:[Object($.jsx)(D.a,{exact:!0,from:"/",to:"config"}),Object($.jsx)(D.b,{path:"/graph",children:Object($.jsx)(er,{})}),Object($.jsx)(D.b,{path:"/alerts",children:Object($.jsx)(Ba,{})}),Object($.jsx)(D.b,{path:"/config",children:Object($.jsx)(Ha,{})}),Object($.jsx)(D.b,{path:"/flags",children:Object($.jsx)(Ua,{})}),Object($.jsx)(D.b,{path:"/rules",children:Object($.jsx)(Ya,{})}),Object($.jsx)(D.b,{path:"/service-discovery",children:Object($.jsx)(Ga,{})}),Object($.jsx)(D.b,{path:"/status",children:Object($.jsx)(Za,{})}),Object($.jsx)(D.b,{path:"/tsdb-status",children:Object($.jsx)(Ja,{})}),Object($.jsx)(D.b,{path:"/targets",children:Object($.jsx)(Ka,{})})]})})]})})]})},ar=(n(292),n(293),n(294),n.p,GLOBAL_CONSOLES_LINK);"CONSOLES_LINK_PLACEHOLDER"!==GLOBAL_CONSOLES_LINK&&""!==GLOBAL_CONSOLES_LINK&&yn(GLOBAL_CONSOLES_LINK)||(ar=null),c.a.render(Object($.jsx)(nr,{consolesLink:ar}),document.getElementById("root"))},57:function(e,t,n){e.exports={container:"ScrapePoolPanel_container__2macm",title:"ScrapePoolPanel_title__1ppGj",normal:"ScrapePoolPanel_normal__1AuiN ScrapePoolPanel_title__1ppGj",danger:"ScrapePoolPanel_danger__ZoHk6 ScrapePoolPanel_title__1ppGj",table:"ScrapePoolPanel_table__1Sdr1",cell:"ScrapePoolPanel_cell__3LVb_",endpoint:"ScrapePoolPanel_endpoint__1N4gx ScrapePoolPanel_cell__3LVb_",labels:"ScrapePoolPanel_labels__1VVxb ScrapePoolPanel_cell__3LVb_",state:"ScrapePoolPanel_state__2BqDx ScrapePoolPanel_cell__3LVb_","last-scrape":"ScrapePoolPanel_last-scrape__192VK ScrapePoolPanel_cell__3LVb_",errors:"ScrapePoolPanel_errors__2JBvY ScrapePoolPanel_cell__3LVb_"}},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Gte=t.Eql=t.Sub=t.Add=t.Mod=t.Div=t.Mul=t.OnOrIgnoring=t.BinModifiers=t.Pow=t.BinaryExpr=t.FunctionCallArgs=t.FunctionCallBody=t.LabelName=t.GroupingLabel=t.GroupingLabelList=t.GroupingLabels=t.AggregateModifier=t.AggregateOp=t.AggregateExpr=t.Expr=t.PromQL=t.LineComment=t.End=t.Start=t.Unless=t.Or=t.And=t.Without=t.By=t.Topk=t.Sum=t.Stdvar=t.Stddev=t.Quantile=t.Min=t.Max=t.Group=t.CountValues=t.Count=t.Bottomk=t.Avg=t.Offset=t.GroupRight=t.GroupLeft=t.On=t.Ignoring=t.Bool=t.nan=t.inf=void 0,t.Pi=t.Month=t.Minute=t.MinOverTime=t.MaxOverTime=t.Log2=t.Log10=t.Ln=t.LastOverTime=t.LabelJoin=t.LabelReplace=t.Irate=t.Increase=t.Idelta=t.Hour=t.HoltWinters=t.HistogramQuantile=t.Floor=t.Exp=t.Deriv=t.Delta=t.Deg=t.DayOfWeek=t.DayOfMonth=t.DaysInMonth=t.CountOverTime=t.Cosh=t.Cos=t.ClampMin=t.ClampMax=t.Clamp=t.Changes=t.Ceil=t.AvgOverTime=t.Atanh=t.Atan=t.Asinh=t.Asin=t.Acosh=t.Acos=t.Abs=t.Absent=t.Identifier=t.AbsentOverTime=t.FunctionIdentifier=t.FunctionCall=t.Neq=t.Lss=t.Lte=t.Gtr=void 0,t.MetricName=t.AtModifierPreprocessors=t.At=t.StepInvariantExpr=t.NeqRegex=t.EqlRegex=t.EqlSingle=t.MatchOp=t.LabelMatcher=t.LabelMatchList=t.LabelMatchers=t.MetricIdentifier=t.VectorSelector=t.UnaryOp=t.UnaryExpr=t.SubqueryExpr=t.StringLiteral=t.ParenExpr=t.OffsetExpr=t.NumberLiteral=t.Duration=t.MatrixSelector=t.Year=t.Vector=t.Time=t.Timestamp=t.Tanh=t.Tan=t.SumOverTime=t.StdvarOverTime=t.StddevOverTime=t.Sqrt=t.SortDesc=t.Sort=t.Sinh=t.Sin=t.Sgn=t.Scalar=t.Round=t.Resets=t.Rate=t.Rad=t.QuantileOverTime=t.PresentOverTime=t.PredictLinear=void 0,t.inf=145,t.nan=146,t.Bool=1,t.Ignoring=2,t.On=3,t.GroupLeft=4,t.GroupRight=5,t.Offset=6,t.Avg=7,t.Bottomk=8,t.Count=9,t.CountValues=10,t.Group=11,t.Max=12,t.Min=13,t.Quantile=14,t.Stddev=15,t.Stdvar=16,t.Sum=17,t.Topk=18,t.By=19,t.Without=20,t.And=21,t.Or=22,t.Unless=23,t.Start=24,t.End=25,t.LineComment=26,t.PromQL=27,t.Expr=28,t.AggregateExpr=29,t.AggregateOp=30,t.AggregateModifier=31,t.GroupingLabels=32,t.GroupingLabelList=33,t.GroupingLabel=34,t.LabelName=35,t.FunctionCallBody=36,t.FunctionCallArgs=37,t.BinaryExpr=38,t.Pow=39,t.BinModifiers=40,t.OnOrIgnoring=41,t.Mul=42,t.Div=43,t.Mod=44,t.Add=45,t.Sub=46,t.Eql=47,t.Gte=48,t.Gtr=49,t.Lte=50,t.Lss=51,t.Neq=52,t.FunctionCall=53,t.FunctionIdentifier=54,t.AbsentOverTime=55,t.Identifier=56,t.Absent=57,t.Abs=58,t.Acos=59,t.Acosh=60,t.Asin=61,t.Asinh=62,t.Atan=63,t.Atanh=64,t.AvgOverTime=65,t.Ceil=66,t.Changes=67,t.Clamp=68,t.ClampMax=69,t.ClampMin=70,t.Cos=71,t.Cosh=72,t.CountOverTime=73,t.DaysInMonth=74,t.DayOfMonth=75,t.DayOfWeek=76,t.Deg=77,t.Delta=78,t.Deriv=79,t.Exp=80,t.Floor=81,t.HistogramQuantile=82,t.HoltWinters=83,t.Hour=84,t.Idelta=85,t.Increase=86,t.Irate=87,t.LabelReplace=88,t.LabelJoin=89,t.LastOverTime=90,t.Ln=91,t.Log10=92,t.Log2=93,t.MaxOverTime=94,t.MinOverTime=95,t.Minute=96,t.Month=97,t.Pi=98,t.PredictLinear=99,t.PresentOverTime=100,t.QuantileOverTime=101,t.Rad=102,t.Rate=103,t.Resets=104,t.Round=105,t.Scalar=106,t.Sgn=107,t.Sin=108,t.Sinh=109,t.Sort=110,t.SortDesc=111,t.Sqrt=112,t.StddevOverTime=113,t.StdvarOverTime=114,t.SumOverTime=115,t.Tan=116,t.Tanh=117,t.Timestamp=118,t.Time=119,t.Vector=120,t.Year=121,t.MatrixSelector=122,t.Duration=123,t.NumberLiteral=124,t.OffsetExpr=125,t.ParenExpr=126,t.StringLiteral=127,t.SubqueryExpr=128,t.UnaryExpr=129,t.UnaryOp=130,t.VectorSelector=131,t.MetricIdentifier=132,t.LabelMatchers=133,t.LabelMatchList=134,t.LabelMatcher=135,t.MatchOp=136,t.EqlSingle=137,t.EqlRegex=138,t.NeqRegex=139,t.StepInvariantExpr=140,t.At=141,t.AtModifierPreprocessors=142,t.MetricName=143},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorMatchCardinality=t.Matcher=t.getFunction=t.ValueType=void 0;var a=n(272);Object.defineProperty(t,"ValueType",{enumerable:!0,get:function(){return a.ValueType}}),Object.defineProperty(t,"getFunction",{enumerable:!0,get:function(){return a.getFunction}});var r=n(273);Object.defineProperty(t,"Matcher",{enumerable:!0,get:function(){return r.Matcher}});var i=n(274);Object.defineProperty(t,"VectorMatchCardinality",{enumerable:!0,get:function(){return i.VectorMatchCardinality}})},87:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveAllRecursiveNodes=t.containsChild=t.containsAtLeastOneChild=t.walkThrough=t.walkBackward=void 0,t.walkBackward=function(e,t){for(var n=e.cursor,a=!0;a&&n.type.id!==t;)a=n.parent();return n.type.id===t?n.node:null},t.walkThrough=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=e.cursor,r=0,i=!0;for(t.unshift(a.type.id);r<t.length&&i;)a.type.id===t[r]||a.type.name===t[r]?++r<t.length&&(i=a.next()):i=a.nextSibling();return r>=t.length?a.node:null},t.containsAtLeastOneChild=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=e.cursor;if(!a.next())return!1;var r=!1;do{r=t.some((function(e){return a.type.id===e||a.type.name===e}))}while(!r&&a.nextSibling());return r},t.containsChild=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=e.cursor;if(!a.next())return!1;var r=0;do{a.type.id!==t[r]&&a.type.name!==t[r]||r++}while(r<t.length&&a.nextSibling());return r>=t.length},t.retrieveAllRecursiveNodes=function(e,t,n){var a=[];return function e(a,r){var i=null===a||void 0===a?void 0:a.getChild(t),o=null===a||void 0===a?void 0:a.lastChild;i&&i.type.id===t&&e(i,r),o&&o.type.id===n&&r.push(o)}(e,a),a}}},[[295,1,2]]]);
//# sourceMappingURL=main.ea85d635.chunk.js.map