| Azure Monitor                          | Description                                                  | Detail Description                                                              | Default alert queries                                                                                                                                                                                                                                                                                                                                                                                                                               |
|----------------------------------------|--------------------------------------------------------------|---------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Average container CPU %                | Calculates average CPU used per container.                   | When average CPU usage per container is greater than 95 percent.                | sum (rate(container_cpu_usage_seconds_total{cluster = "$cluster",name!~".*prometheus.*", image!="", container_name!="POD"}[5m])) by (pod_name, container,cluster,namespace) /sum(container_spec_cpu_quota{cluster = "$cluster",name!~".*prometheus.*", image!="", container_name!="POD"}/container_spec_cpu_period{cluster = "$cluster",name!~".*prometheus.*", image!="", container_name!="POD"}) by (pod_name, container,cluster,namespace) >.95  |
| Average container working set memory % | Calculates average working set memory used per container.    | When average working set memory usage per container is greater than 95 percent. | sum by (namespace,cluster,container) (container_memory_working_set_bytes{cluster = "$cluster", container!="", image!="", container_name!="POD"}) / sum by (namespace,cluster,container) (kube_pod_container_resource_limits{cluster = "$cluster", resource="memory"})  > .95                                                                                                                                                                        |
| Average CPU %                          | Calculates average CPU used per node.                        | When average node CPU utilization is greater than 80 percent.                   | ( (1 - rate(node_cpu_seconds_total{job="node", mode="idle",cluster="$cluster"}[5m]) ) / ignoring(cpu) group_left  count without (cpu)( node_cpu_seconds_total{job="node", mode="idle",cluster="$cluster"}) )> .8                                                                                                                                                                                                                                    |
| Average disk usage %                   | Calculates average disk usage for a node.                    | When disk usage for a node is greater than 80 percent.                          | 1 - avg by (cluster,job)(node_memory_MemAvailable_bytes{job="node",cluster="$cluster"})/  avg by (cluster,job)(node_memory_MemTotal_bytes{job="node",cluster="$cluster"}) > .8                                                                                                                                                                                                                                                                      |
| Average working set memory %           | Calculates average working set memory for a node.            | When average Working set memory for a node is greater than 80 percent.          | 1 - avg by (cluster,job)(node_memory_MemAvailable_bytes{job="node",cluster="$cluster"})/ avg by (cluster,job)(node_memory_MemTotal_bytes{job="node",cluster="$cluster"}) > .8                                                                                                                                                                                                                                                                       |
| Restarting container count             | Calculates number of restarting containers.                  | When container restarts are greater than 0.                                     | sum by (namespace, pod, container, cluster) (kube_pod_container_status_restarts_total{job="kube-state-metrics", cluster= "$cluster"}) > 0                                                                                                                                                                                                                                                                                                           |
| Failed pod counts                      | Calculates if any pod in failed state.                       | When a number of pods in failed state are greater than 0.                       | sum by (cluster, namespace, pod) (kube_pod_status_phase{cluster="$cluster",phase="failed"}) > 0                                                                                                                                                                                                                                                                                                                                                     |
| Node NotReady status                   | Calculates if any node is in NotReady state.                 | When a number of nodes in NotReady state are greater than 0.                    | sum by (namespace,cluster,node)(kube_node_status_condition{cluster="$cluster",job="kube-state-metrics",condition="Ready",status!="true", node!=""}) > 0                                                                                                                                                                                                                                                                                             |
| OOM killed containers                  | Calculates number of OOM killed containers.                  | When a number of OOM killed containers is greater than 0.                       | sum by (cluster,container,namespace)(kube_pod_container_status_last_terminated_reason{reason="OOMKilled",cluster="$cluster"})  > 0                                                                                                                                                                                                                                                                                                                  |
| Pods ready %                           | Calculates the average ready state of pods.                  | When ready state of pods are less than 80 percent.                              | sum by (cluster,namespace,deployment)(kube_deployment_status_replicas_ready {cluster="$cluster"}) / sum by (cluster,namespace,deployment)(kube_deployment_spec_replicas {cluster="$cluster"}) <.8 or sum by (cluster,namespace,deployment)(kube_daemonset_status_number_ready{cluster="$cluster"}) / sum by (cluster,namespace,deployment)(kube_daemonset_status_desired_number_scheduled{cluster="$cluster"}) <.8                                  |
| Completed job count                    | Calculates number of jobs completed more than six hours ago. | When number of stale jobs older than six hours is greater than 0.               | sum by(namespace,cluster)(kube_job_spec_completions{job="kube-state-metrics",cluster="$cluster"}) - sum by(namespace,cluster)(kube_job_status_succeeded{job="kube-state-metrics",cluster="$cluster"})  > 0                                                                                                                                                                                                                                          |
